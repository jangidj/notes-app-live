import{a as K}from"./chunk-FMLZKYIE.js";import"./chunk-74LLULWK.js";import{a as J}from"./chunk-AZYLTBPO.js";import{c as Q}from"./chunk-MVTUDABA.js";import{a as _,b as j}from"./chunk-LOCZZ25B.js";import{a as X}from"./chunk-A7V3V4Y2.js";import{b as R,c as E,d as Y,e as q,f as H,g as W}from"./chunk-ESAVHXRM.js";import{p as k}from"./chunk-OODGCCPB.js";import{Ca as v,Ea as p,Ga as s,Ha as x,Ia as z,Ja as c,Ka as C,La as h,Ma as A,P as m,Pa as B,Qa as w,Ra as S,S as b,T as f,Ua as V,Za as D,_ as y,_a as L,c as M,cb as $,da as a,db as U,gb as G,ia as P,pa as d,qa as g,ta as T,ua as F,va as u,wa as o,xa as i,ya as O}from"./chunk-FCD34S5F.js";var oe=t=>["/note",t];function ie(t,n){if(t&1&&(o(0,"span",9),c(1),i()),t&2){let e=s();a(),h("\u{1F4F7} ",e.note.images.length)}}function re(t,n){if(t&1&&(o(0,"span",9),c(1),i()),t&2){let e=s();a(),h("\u{1F517} ",e.note.links.length)}}var I=class t{note;store=m(k);categories=this.store.selectSignal(E);getCategoryName(){return this.note?.categoryName?this.note.categoryName:this.note?.categoryId&&this.categories().find(e=>e.id===this.note.categoryId)?.name||"Uncategorized"}getCategoryColor(){return this.note?.categoryId&&this.store.selectSignal(Y(this.note.categoryId))()?.color||"#9E9E9E"}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=P({type:t,selectors:[["app-note-card"]],inputs:{note:"note"},decls:19,vars:15,consts:[[1,"note-card",3,"routerLink"],[1,"note-content"],[1,"note-header"],[1,"note-title"],[1,"note-date"],[1,"note-preview"],[1,"note-footer"],[1,"category-badge"],[1,"note-meta"],[1,"meta-badge"],[1,"note-arrow"]],template:function(e,r){e&1&&(o(0,"div",0)(1,"div",1)(2,"div",2)(3,"h3",3),c(4),i(),o(5,"span",4),c(6),w(7,"date"),i()(),o(8,"div",5)(9,"p"),c(10),i()(),o(11,"div",6)(12,"span",7),c(13),i(),o(14,"div",8),d(15,ie,2,1,"span",9),d(16,re,2,1,"span",9),i()()(),o(17,"div",10),c(18,"\u203A"),i()()),e&2&&(u("routerLink",B(13,oe,r.note.id)),a(4),C(r.note.title||"Untitled Note"),a(2),C(S(7,10,r.note.updatedAt,"short")),a(4),A("",(r.note.content||"").substring(0,100),"",(r.note.content||"").length>100?"...":""),a(2),x("background-color",r.getCategoryColor()),a(),h(" ",r.getCategoryName()," "),a(2),g(r.note.images&&r.note.images.length>0?15:-1),a(),g(r.note.links&&r.note.links.length>0?16:-1))},dependencies:[U,D],styles:['.note-card[_ngcontent-%COMP%]{background:var(--bg-elevated);border-radius:12px;padding:1rem;box-shadow:var(--shadow-sm);cursor:pointer;transition:all .2s ease;border:1px solid var(--border-color);display:flex;align-items:center;gap:1rem;position:relative;overflow:hidden}.note-card[_ngcontent-%COMP%]:active{transform:scale(.98);background:var(--bg-hover)}.note-card[_ngcontent-%COMP%]:before{content:"";position:absolute;top:50%;left:50%;width:0;height:0;border-radius:50%;background:#6366f11a;transform:translate(-50%,-50%);transition:width .6s,height .6s}.note-card[_ngcontent-%COMP%]:active:before{width:300px;height:300px}.note-card[_ngcontent-%COMP%]   .note-content[_ngcontent-%COMP%]{flex:1;min-width:0}.note-card[_ngcontent-%COMP%]   .note-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:flex-start;gap:.75rem;margin-bottom:.5rem}.note-card[_ngcontent-%COMP%]   .note-header[_ngcontent-%COMP%]   .note-title[_ngcontent-%COMP%]{margin:0;font-size:1rem;font-weight:600;color:var(--text-primary);flex:1;line-height:1.4;word-break:break-word;display:-webkit-box;-webkit-line-clamp:2;line-clamp:2;-webkit-box-orient:vertical;overflow:hidden}.note-card[_ngcontent-%COMP%]   .note-header[_ngcontent-%COMP%]   .note-date[_ngcontent-%COMP%]{font-size:.75rem;color:var(--text-secondary);white-space:nowrap;flex-shrink:0}.note-card[_ngcontent-%COMP%]   .note-preview[_ngcontent-%COMP%]{margin-bottom:.75rem;color:var(--text-secondary);line-height:1.5;font-size:.875rem;display:-webkit-box;-webkit-line-clamp:2;line-clamp:2;-webkit-box-orient:vertical;overflow:hidden}.note-card[_ngcontent-%COMP%]   .note-preview[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0}.note-card[_ngcontent-%COMP%]   .note-footer[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;gap:.75rem;flex-wrap:wrap}.note-card[_ngcontent-%COMP%]   .note-footer[_ngcontent-%COMP%]   .category-badge[_ngcontent-%COMP%]{padding:.25rem .625rem;border-radius:12px;font-size:.75rem;font-weight:500;color:var(--text-inverse);text-transform:capitalize}.note-card[_ngcontent-%COMP%]   .note-footer[_ngcontent-%COMP%]   .note-meta[_ngcontent-%COMP%]{display:flex;gap:.5rem;flex-wrap:wrap}.note-card[_ngcontent-%COMP%]   .note-footer[_ngcontent-%COMP%]   .note-meta[_ngcontent-%COMP%]   .meta-badge[_ngcontent-%COMP%]{font-size:.75rem;color:var(--text-secondary);display:flex;align-items:center;gap:.25rem}.note-card[_ngcontent-%COMP%]   .note-arrow[_ngcontent-%COMP%]{font-size:1.5rem;color:var(--text-tertiary);flex-shrink:0;transition:transform .2s ease}.note-card[_ngcontent-%COMP%]:active   .note-arrow[_ngcontent-%COMP%]{transform:translate(4px)}']})};var ee=(t,n)=>n.id;function ae(t,n){if(t&1){let e=v();o(0,"button",21),p("click",function(){b(e);let l=s();return f(l.clearFilters())}),c(1,"\u2715"),i()}}function ce(t,n){t&1&&(o(0,"span",22),c(1,"\u{1F504} Syncing..."),i())}function se(t,n){if(t&1&&(o(0,"span",23),c(1),w(2,"date"),i()),t&2){let e=s(2);a(),h("Last synced: ",S(2,1,e.lastSynced(),"short"))}}function le(t,n){if(t&1){let e=v();o(0,"div",11),d(1,ce,2,0,"span",22)(2,se,3,4,"span",23),o(3,"button",24),p("click",function(){b(e);let l=s();return f(l.syncToDrive())}),c(4),i()()}if(t&2){let e=s();a(),g(e.isSyncing()?1:e.lastSynced()?2:-1),a(2),u("disabled",e.isSyncing()),a(),h(" ",e.isSyncing()?"\u23F3":"\u2601\uFE0F"," ")}}function de(t,n){if(t&1){let e=v();o(0,"button",14),p("click",function(){let l=b(e).$implicit,N=s();return f(N.onCategoryFilter(l.id))}),o(1,"span"),c(2,"\u25CF"),i(),o(3,"span"),c(4),i(),o(5,"span",25),c(6),i()()}if(t&2){let e=n.$implicit,r=s();x("border-color",e.color),z("active",r.selectedCategoryId()===e.id),a(),x("color",e.color),a(3),C(e.name),a(2),C(r.getNotesCountForCategory(e.id))}}function ge(t,n){t&1&&c(0," Try adjusting your search ")}function pe(t,n){t&1&&c(0," Tap the + button to create your first note ")}function me(t,n){if(t&1&&(o(0,"div",19)(1,"div",26),c(2,"\u{1F4C4}"),i(),o(3,"h3"),c(4,"No notes yet"),i(),o(5,"p"),d(6,ge,1,0)(7,pe,1,0),i()()),t&2){let e=s();a(6),g(e.searchInput()||e.selectedCategoryId()?6:7)}}function he(t,n){if(t&1&&O(0,"app-note-card",27),t&2){let e=n.$implicit;u("note",e)}}function _e(t,n){if(t&1&&(o(0,"div",20),T(1,he,1,1,"app-note-card",27,ee),i()),t&2){let e=s();a(),F(e.notes())}}function ue(t,n){if(t&1){let e=v();o(0,"app-category-manager",28),p("close",function(){b(e);let l=s();return f(l.toggleCategoryManager())}),i()}}var Z=class t{store=m(k);router=m($);driveService=m(X);authService=m(G);notes=this.store.selectSignal(R);categories=this.store.selectSignal(E);searchQuery=this.store.selectSignal(q);selectedCategoryId=this.store.selectSignal(H);searchInput=y("");showCategoryManager=y(!1);isSyncing=y(!1);lastSynced=y(null);notesCount=V(()=>this.notes().length);categoriesCount=V(()=>this.categories().length);isSignedIn=this.authService.isSignedIn;ngOnInit(){return M(this,null,function*(){this.store.dispatch(_.loadNotes()),this.store.dispatch(j.loadCategories()),this.authService.isSignedIn()&&(yield this.syncFromDrive())})}syncFromDrive(){return M(this,null,function*(){if(this.authService.isSignedIn()){this.isSyncing.set(!0);try{let n=yield this.driveService.syncFromDrive();n&&(this.store.dispatch(_.loadNotesSuccess({notes:n.notes})),this.store.dispatch(j.loadCategoriesSuccess({categories:n.categories})),this.lastSynced.set(new Date))}catch(n){console.error("Error syncing from Drive:",n)}finally{this.isSyncing.set(!1)}}})}syncToDrive(){return M(this,null,function*(){if(this.authService.isSignedIn()){this.isSyncing.set(!0);try{yield this.driveService.syncToDrive(this.notes(),this.categories()),this.lastSynced.set(new Date)}catch(n){console.error("Error syncing to Drive:",n)}finally{this.isSyncing.set(!1)}}})}onSearchChange(n){this.searchInput.set(n),this.store.dispatch(_.searchNotes({query:n}))}onCategoryFilter(n){this.store.dispatch(_.filterByCategory({categoryId:n}))}clearFilters(){this.searchInput.set(""),this.store.dispatch(_.searchNotes({query:""})),this.store.dispatch(_.filterByCategory({categoryId:null}))}createNewNote(){this.router.navigate(["/note/new"])}toggleCategoryManager(){this.showCategoryManager.update(n=>!n)}getNotesCountForCategory(n){return this.notes().filter(e=>e.categoryId===n).length}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=P({type:t,selectors:[["app-dashboard"]],decls:33,vars:7,consts:[[1,"dashboard"],[1,"app-header"],[1,"header-top"],[1,"app-title"],[1,"header-actions"],["aria-label","Categories",1,"icon-btn",3,"click"],[1,"icon"],[1,"search-bar"],[1,"search-icon"],["type","text","placeholder","Search notes...",1,"search-input",3,"input","value"],[1,"clear-btn"],[1,"sync-status"],[1,"categories-chips"],[1,"chips-container"],[1,"category-chip",3,"click"],[1,"category-chip",3,"active","border-color"],["aria-label","Create new note",1,"fab",3,"click"],[1,"fab-icon"],[1,"notes-list"],[1,"empty-state"],[1,"notes-container"],[1,"clear-btn",3,"click"],[1,"sync-indicator"],[1,"sync-time"],[1,"sync-btn",3,"click","disabled"],[1,"chip-count"],[1,"empty-icon"],[3,"note"],[3,"close"]],template:function(e,r){e&1&&(o(0,"div",0)(1,"header",1)(2,"div",2)(3,"h1",3),c(4,"\u{1F4DD} Notes"),i(),o(5,"div",4),O(6,"app-theme-toggle"),o(7,"button",5),p("click",function(){return r.toggleCategoryManager()}),o(8,"span",6),c(9,"\u{1F3F7}\uFE0F"),i()()()(),o(10,"div",7)(11,"span",8),c(12,"\u{1F50D}"),i(),o(13,"input",9),p("input",function(N){return r.onSearchChange(N.target.value)}),i(),d(14,ae,2,0,"button",10),i(),d(15,le,5,3,"div",11),i(),o(16,"section",12)(17,"div",13)(18,"button",14),p("click",function(){return r.onCategoryFilter(null)}),o(19,"span"),c(20,"\u{1F4CB}"),i(),o(21,"span"),c(22,"All"),i()(),T(23,de,7,8,"button",15,ee),i()(),o(25,"button",16),p("click",function(){return r.createNewNote()}),o(26,"span",17),c(27,"\u2795"),i()(),o(28,"main",18),d(29,me,8,1,"div",19)(30,_e,3,0,"div",20),i(),O(31,"app-bottom-nav"),d(32,ue,1,0,"app-category-manager"),i()),e&2&&(a(13),u("value",r.searchInput()),a(),g(r.searchInput()?14:-1),a(),g(r.isSignedIn()?15:-1),a(3),z("active",r.selectedCategoryId()===null),a(5),F(r.categories()),a(6),g(r.notes().length===0?29:30),a(3),g(r.showCategoryManager()?32:-1))},dependencies:[L,Q,I,J,K,W,D],styles:[".dashboard[_ngcontent-%COMP%]{min-height:100vh;background:var(--bg-primary);padding-bottom:80px;padding-top:env(safe-area-inset-top);transition:background-color .3s ease}.app-header[_ngcontent-%COMP%]{background:var(--bg-elevated);border-bottom:1px solid var(--border-color);padding:1rem;position:sticky;top:0;z-index:50;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);box-shadow:var(--shadow-sm)}.app-header[_ngcontent-%COMP%]   .header-top[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:1rem}.app-header[_ngcontent-%COMP%]   .app-title[_ngcontent-%COMP%]{margin:0;font-size:1.75rem;font-weight:700;color:var(--text-primary);display:flex;align-items:center;gap:.5rem}.app-header[_ngcontent-%COMP%]   .header-actions[_ngcontent-%COMP%]{display:flex;gap:.5rem;align-items:center}.app-header[_ngcontent-%COMP%]   .icon-btn[_ngcontent-%COMP%]{background:var(--bg-secondary);border:1px solid var(--border-color);border-radius:12px;width:40px;height:40px;display:flex;align-items:center;justify-content:center;cursor:pointer;transition:all .2s ease;padding:0}.app-header[_ngcontent-%COMP%]   .icon-btn[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{font-size:1.25rem}.app-header[_ngcontent-%COMP%]   .icon-btn[_ngcontent-%COMP%]:active{transform:scale(.95);background:var(--bg-hover)}.search-bar[_ngcontent-%COMP%]{display:flex;align-items:center;background:var(--bg-secondary);border-radius:12px;padding:.75rem 1rem;gap:.75rem;border:1px solid var(--border-color);transition:all .2s ease}.search-bar[_ngcontent-%COMP%]:focus-within{border-color:var(--primary-color);box-shadow:0 0 0 3px var(--primary-light)}.search-bar[_ngcontent-%COMP%]   .search-icon[_ngcontent-%COMP%]{font-size:1.125rem;color:var(--text-secondary);flex-shrink:0}.search-bar[_ngcontent-%COMP%]   .search-input[_ngcontent-%COMP%]{flex:1;border:none;outline:none;font-size:1rem;color:var(--text-primary);background:transparent}.search-bar[_ngcontent-%COMP%]   .search-input[_ngcontent-%COMP%]::placeholder{color:var(--text-tertiary)}.search-bar[_ngcontent-%COMP%]   .clear-btn[_ngcontent-%COMP%]{background:transparent;border:none;color:var(--text-secondary);cursor:pointer;font-size:1.125rem;padding:.25rem;display:flex;align-items:center;justify-content:center;width:24px;height:24px;border-radius:50%;transition:all .2s ease}.search-bar[_ngcontent-%COMP%]   .clear-btn[_ngcontent-%COMP%]:active{background:var(--bg-hover);color:var(--text-primary)}.sync-status[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;margin-top:.75rem;padding-top:.75rem;border-top:1px solid var(--border-color);font-size:.75rem;color:var(--text-secondary)}.sync-status[_ngcontent-%COMP%]   .sync-indicator[_ngcontent-%COMP%]{color:var(--primary-color)}.sync-status[_ngcontent-%COMP%]   .sync-time[_ngcontent-%COMP%]{flex:1}.sync-status[_ngcontent-%COMP%]   .sync-btn[_ngcontent-%COMP%]{background:var(--bg-secondary);border:1px solid var(--border-color);border-radius:8px;width:32px;height:32px;display:flex;align-items:center;justify-content:center;cursor:pointer;font-size:1rem;transition:all .2s ease}.sync-status[_ngcontent-%COMP%]   .sync-btn[_ngcontent-%COMP%]:active:not(:disabled){transform:scale(.95);background:var(--bg-hover)}.sync-status[_ngcontent-%COMP%]   .sync-btn[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed}.categories-chips[_ngcontent-%COMP%]{padding:1rem;overflow-x:auto;-webkit-overflow-scrolling:touch;scrollbar-width:none}.categories-chips[_ngcontent-%COMP%]::-webkit-scrollbar{display:none}.categories-chips[_ngcontent-%COMP%]   .chips-container[_ngcontent-%COMP%]{display:flex;gap:.75rem;padding-bottom:.5rem}.categories-chips[_ngcontent-%COMP%]   .category-chip[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;padding:.625rem 1rem;background:var(--bg-elevated);border:2px solid var(--border-color);border-radius:20px;font-size:.875rem;font-weight:500;color:var(--text-primary);white-space:nowrap;cursor:pointer;transition:all .2s ease;flex-shrink:0}.categories-chips[_ngcontent-%COMP%]   .category-chip[_ngcontent-%COMP%]   .chip-count[_ngcontent-%COMP%]{background:var(--bg-secondary);padding:.125rem .5rem;border-radius:10px;font-size:.75rem;font-weight:600}.categories-chips[_ngcontent-%COMP%]   .category-chip[_ngcontent-%COMP%]:active{transform:scale(.95)}.categories-chips[_ngcontent-%COMP%]   .category-chip.active[_ngcontent-%COMP%]{background:var(--primary-light);border-color:var(--primary-color);color:var(--primary-color)}.categories-chips[_ngcontent-%COMP%]   .category-chip.active[_ngcontent-%COMP%]   .chip-count[_ngcontent-%COMP%]{background:var(--primary-color);color:var(--text-inverse)}.fab[_ngcontent-%COMP%]{position:fixed;bottom:100px;right:1.5rem;width:56px;height:56px;border-radius:50%;background:var(--primary-color);color:var(--text-inverse);border:none;box-shadow:var(--shadow-lg);cursor:pointer;display:flex;align-items:center;justify-content:center;z-index:90;transition:all .3s cubic-bezier(.4,0,.2,1)}.fab[_ngcontent-%COMP%]   .fab-icon[_ngcontent-%COMP%]{font-size:1.5rem;line-height:1}.fab[_ngcontent-%COMP%]:active{transform:scale(.9)}.fab[_ngcontent-%COMP%]:hover{box-shadow:var(--shadow-xl);transform:translateY(-2px)}@media (min-width: 768px){.fab[_ngcontent-%COMP%]{bottom:120px;right:2rem}}.notes-list[_ngcontent-%COMP%]{padding:0 1rem 1rem}.notes-list[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]{text-align:center;padding:4rem 2rem;color:var(--text-secondary)}.notes-list[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]   .empty-icon[_ngcontent-%COMP%]{font-size:4rem;margin-bottom:1rem;opacity:.5}.notes-list[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 .5rem;color:var(--text-primary);font-size:1.25rem}.notes-list[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:.875rem}.notes-list[_ngcontent-%COMP%]   .notes-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.75rem}@media (min-width: 768px){.dashboard[_ngcontent-%COMP%]{max-width:600px;margin:0 auto}.app-header[_ngcontent-%COMP%]{border-radius:0}}"]})};export{Z as Dashboard};
