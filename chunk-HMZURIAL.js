import{a as he}from"./chunk-YOMTIJQ3.js";import{a as Le}from"./chunk-6G4WT3MB.js";import"./chunk-ZSXNHPOI.js";import{a as Ie,b as Se,c as Te,d as ze,e as Ne,f as Ae}from"./chunk-RBVRXRCS.js";import{a as Pe}from"./chunk-ABUW7L7G.js";import{a as Z,b as De,c as Re,e as Ve}from"./chunk-QEQF3ZYK.js";import{$ as h,Aa as f,Ba as a,Ca as s,Da as C,Hb as ke,Ja as k,L as xe,La as m,Na as g,Nb as Q,Ob as Ee,P as A,Qa as fe,Ra as D,S as u,T as _,Ta as d,Ua as z,Va as K,Wa as ye,a as T,b as U,cb as J,d as M,da as Me,db as Y,ea as oe,eb as H,fa as c,fb as G,la as $,lb as q,ob as we,qb as re,ua as y,ub as B,va as w,wa as _e,xa as X,ya as R,za as L}from"./chunk-PTQK4OVV.js";var Ue=["user","model","function","system"];var ae=(function(n){return n.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",n.STOP="STOP",n.MAX_TOKENS="MAX_TOKENS",n.SAFETY="SAFETY",n.RECITATION="RECITATION",n.LANGUAGE="LANGUAGE",n.BLOCKLIST="BLOCKLIST",n.PROHIBITED_CONTENT="PROHIBITED_CONTENT",n.SPII="SPII",n.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",n.OTHER="OTHER",n})(ae||{});var S=class extends Error{constructor(t){super(`[GoogleGenerativeAI Error]: ${t}`)}},j=class extends S{constructor(t,e){super(t),this.response=e}},ce=class extends S{constructor(t,e,o,i){super(t),this.status=e,this.statusText=o,this.errorDetails=i}},V=class extends S{},le=class extends S{};var Xe="https://generativelanguage.googleapis.com",Je="v1beta",Qe="0.24.1",et="genai-js",W=(function(n){return n.GENERATE_CONTENT="generateContent",n.STREAM_GENERATE_CONTENT="streamGenerateContent",n.COUNT_TOKENS="countTokens",n.EMBED_CONTENT="embedContent",n.BATCH_EMBED_CONTENTS="batchEmbedContents",n})(W||{}),Ce=class{constructor(t,e,o,i,r){this.model=t,this.task=e,this.apiKey=o,this.stream=i,this.requestOptions=r}toString(){var t,e;let o=((t=this.requestOptions)===null||t===void 0?void 0:t.apiVersion)||Je,r=`${((e=this.requestOptions)===null||e===void 0?void 0:e.baseUrl)||Xe}/${o}/${this.model}:${this.task}`;return this.stream&&(r+="?alt=sse"),r}};function tt(n){let t=[];return n?.apiClient&&t.push(n.apiClient),t.push(`${et}/${Qe}`),t.join(" ")}function nt(n){return M(this,null,function*(){var t;let e=new Headers;e.append("Content-Type","application/json"),e.append("x-goog-api-client",tt(n.requestOptions)),e.append("x-goog-api-key",n.apiKey);let o=(t=n.requestOptions)===null||t===void 0?void 0:t.customHeaders;if(o){if(!(o instanceof Headers))try{o=new Headers(o)}catch(i){throw new V(`unable to convert customHeaders value ${JSON.stringify(o)} to Headers: ${i.message}`)}for(let[i,r]of o.entries()){if(i==="x-goog-api-key")throw new V(`Cannot set reserved header name ${i}`);if(i==="x-goog-api-client")throw new V(`Header name ${i} can only be set using the apiClient field`);e.append(i,r)}}return e})}function it(n,t,e,o,i,r){return M(this,null,function*(){let l=new Ce(n,t,e,o,r);return{url:l.toString(),fetchOptions:Object.assign(Object.assign({},st(r)),{method:"POST",headers:yield nt(l),body:i})}})}function ne(p,b,E,I,P){return M(this,arguments,function*(n,t,e,o,i,r={},l=fetch){let{url:v,fetchOptions:x}=yield it(n,t,e,o,i,r);return ot(v,x,l)})}function ot(o,i){return M(this,arguments,function*(n,t,e=fetch){let r;try{r=yield e(n,t)}catch(l){rt(l,n)}return r.ok||(yield at(r,n)),r})}function rt(n,t){let e=n;throw e.name==="AbortError"?(e=new le(`Request aborted when fetching ${t.toString()}: ${n.message}`),e.stack=n.stack):n instanceof ce||n instanceof V||(e=new S(`Error fetching from ${t.toString()}: ${n.message}`),e.stack=n.stack),e}function at(n,t){return M(this,null,function*(){let e="",o;try{let i=yield n.json();e=i.error.message,i.error.details&&(e+=` ${JSON.stringify(i.error.details)}`,o=i.error.details)}catch{}throw new ce(`Error fetching from ${t.toString()}: [${n.status} ${n.statusText}] ${e}`,n.status,n.statusText,o)})}function st(n){let t={};if(n?.signal!==void 0||n?.timeout>=0){let e=new AbortController;n?.timeout>=0&&setTimeout(()=>e.abort(),n.timeout),n?.signal&&n.signal.addEventListener("abort",()=>{e.abort()}),t.signal=e.signal}return t}function be(n){return n.text=()=>{if(n.candidates&&n.candidates.length>0){if(n.candidates.length>1&&console.warn(`This response had ${n.candidates.length} candidates. Returning text from the first candidate only. Access response.candidates directly to use the other candidates.`),se(n.candidates[0]))throw new j(`${F(n)}`,n);return ct(n)}else if(n.promptFeedback)throw new j(`Text not available. ${F(n)}`,n);return""},n.functionCall=()=>{if(n.candidates&&n.candidates.length>0){if(n.candidates.length>1&&console.warn(`This response had ${n.candidates.length} candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates.`),se(n.candidates[0]))throw new j(`${F(n)}`,n);return console.warn("response.functionCall() is deprecated. Use response.functionCalls() instead."),Ke(n)[0]}else if(n.promptFeedback)throw new j(`Function call not available. ${F(n)}`,n)},n.functionCalls=()=>{if(n.candidates&&n.candidates.length>0){if(n.candidates.length>1&&console.warn(`This response had ${n.candidates.length} candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates.`),se(n.candidates[0]))throw new j(`${F(n)}`,n);return Ke(n)}else if(n.promptFeedback)throw new j(`Function call not available. ${F(n)}`,n)},n}function ct(n){var t,e,o,i;let r=[];if(!((e=(t=n.candidates)===null||t===void 0?void 0:t[0].content)===null||e===void 0)&&e.parts)for(let l of(i=(o=n.candidates)===null||o===void 0?void 0:o[0].content)===null||i===void 0?void 0:i.parts)l.text&&r.push(l.text),l.executableCode&&r.push("\n```"+l.executableCode.language+`
`+l.executableCode.code+"\n```\n"),l.codeExecutionResult&&r.push("\n```\n"+l.codeExecutionResult.output+"\n```\n");return r.length>0?r.join(""):""}function Ke(n){var t,e,o,i;let r=[];if(!((e=(t=n.candidates)===null||t===void 0?void 0:t[0].content)===null||e===void 0)&&e.parts)for(let l of(i=(o=n.candidates)===null||o===void 0?void 0:o[0].content)===null||i===void 0?void 0:i.parts)l.functionCall&&r.push(l.functionCall);if(r.length>0)return r}var lt=[ae.RECITATION,ae.SAFETY,ae.LANGUAGE];function se(n){return!!n.finishReason&&lt.includes(n.finishReason)}function F(n){var t,e,o;let i="";if((!n.candidates||n.candidates.length===0)&&n.promptFeedback)i+="Response was blocked",!((t=n.promptFeedback)===null||t===void 0)&&t.blockReason&&(i+=` due to ${n.promptFeedback.blockReason}`),!((e=n.promptFeedback)===null||e===void 0)&&e.blockReasonMessage&&(i+=`: ${n.promptFeedback.blockReasonMessage}`);else if(!((o=n.candidates)===null||o===void 0)&&o[0]){let r=n.candidates[0];se(r)&&(i+=`Candidate was blocked due to ${r.finishReason}`,r.finishMessage&&(i+=`: ${r.finishMessage}`))}return i}function ee(n){return this instanceof ee?(this.v=n,this):new ee(n)}function dt(n,t,e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var o=e.apply(n,t||[]),i,r=[];return i={},l("next"),l("throw"),l("return"),i[Symbol.asyncIterator]=function(){return this},i;function l(v){o[v]&&(i[v]=function(x){return new Promise(function(O,N){r.push([v,x,O,N])>1||p(v,x)})})}function p(v,x){try{b(o[v](x))}catch(O){P(r[0][3],O)}}function b(v){v.value instanceof ee?Promise.resolve(v.value.v).then(E,I):P(r[0][2],v)}function E(v){p("next",v)}function I(v){p("throw",v)}function P(v,x){v(x),r.shift(),r.length&&p(r[0][0],r[0][1])}}var Ge=/^data\: (.*)(?:\n\n|\r\r|\r\n\r\n)/;function gt(n){let t=n.body.pipeThrough(new TextDecoderStream("utf8",{fatal:!0})),e=ut(t),[o,i]=e.tee();return{stream:mt(o),response:pt(i)}}function pt(n){return M(this,null,function*(){let t=[],e=n.getReader();for(;;){let{done:o,value:i}=yield e.read();if(o)return be(_t(t));t.push(i)}})}function mt(n){return dt(this,arguments,function*(){let e=n.getReader();for(;;){let{value:o,done:i}=yield ee(e.read());if(i)break;yield yield ee(be(o))}})}function ut(n){let t=n.getReader();return new ReadableStream({start(o){let i="";return r();function r(){return t.read().then(({value:l,done:p})=>{if(p){if(i.trim()){o.error(new S("Failed to parse stream"));return}o.close();return}i+=l;let b=i.match(Ge),E;for(;b;){try{E=JSON.parse(b[1])}catch{o.error(new S(`Error parsing JSON response: "${b[1]}"`));return}o.enqueue(E),i=i.substring(b[0].length),b=i.match(Ge)}return r()}).catch(l=>{let p=l;throw p.stack=l.stack,p.name==="AbortError"?p=new le("Request aborted when reading from the stream"):p=new S("Error reading from the stream"),p})}}})}function _t(n){let t=n[n.length-1],e={promptFeedback:t?.promptFeedback};for(let o of n){if(o.candidates){let i=0;for(let r of o.candidates)if(e.candidates||(e.candidates=[]),e.candidates[i]||(e.candidates[i]={index:i}),e.candidates[i].citationMetadata=r.citationMetadata,e.candidates[i].groundingMetadata=r.groundingMetadata,e.candidates[i].finishReason=r.finishReason,e.candidates[i].finishMessage=r.finishMessage,e.candidates[i].safetyRatings=r.safetyRatings,r.content&&r.content.parts){e.candidates[i].content||(e.candidates[i].content={role:r.content.role||"user",parts:[]});let l={};for(let p of r.content.parts)p.text&&(l.text=p.text),p.functionCall&&(l.functionCall=p.functionCall),p.executableCode&&(l.executableCode=p.executableCode),p.codeExecutionResult&&(l.codeExecutionResult=p.codeExecutionResult),Object.keys(l).length===0&&(l.text=""),e.candidates[i].content.parts.push(l)}i++}o.usageMetadata&&(e.usageMetadata=o.usageMetadata)}return e}function He(n,t,e,o){return M(this,null,function*(){let i=yield ne(t,W.STREAM_GENERATE_CONTENT,n,!0,JSON.stringify(e),o);return gt(i)})}function qe(n,t,e,o){return M(this,null,function*(){let r=yield(yield ne(t,W.GENERATE_CONTENT,n,!1,JSON.stringify(e),o)).json();return{response:be(r)}})}function Be(n){if(n!=null){if(typeof n=="string")return{role:"system",parts:[{text:n}]};if(n.text)return{role:"system",parts:[n]};if(n.parts)return n.role?n:{role:"system",parts:n.parts}}}function te(n){let t=[];if(typeof n=="string")t=[{text:n}];else for(let e of n)typeof e=="string"?t.push({text:e}):t.push(e);return ft(t)}function ft(n){let t={role:"user",parts:[]},e={role:"function",parts:[]},o=!1,i=!1;for(let r of n)"functionResponse"in r?(e.parts.push(r),i=!0):(t.parts.push(r),o=!0);if(o&&i)throw new S("Within a single message, FunctionResponse cannot be mixed with other type of part in the request for sending chat message.");if(!o&&!i)throw new S("No content is provided for sending chat message.");return o?t:e}function ht(n,t){var e;let o={model:t?.model,generationConfig:t?.generationConfig,safetySettings:t?.safetySettings,tools:t?.tools,toolConfig:t?.toolConfig,systemInstruction:t?.systemInstruction,cachedContent:(e=t?.cachedContent)===null||e===void 0?void 0:e.name,contents:[]},i=n.generateContentRequest!=null;if(n.contents){if(i)throw new V("CountTokensRequest must have one of contents or generateContentRequest, not both.");o.contents=n.contents}else if(i)o=Object.assign(Object.assign({},o),n.generateContentRequest);else{let r=te(n);o.contents=[r]}return{generateContentRequest:o}}function je(n){let t;return n.contents?t=n:t={contents:[te(n)]},n.systemInstruction&&(t.systemInstruction=Be(n.systemInstruction)),t}function Ct(n){return typeof n=="string"||Array.isArray(n)?{content:te(n)}:n}var Fe=["text","inlineData","functionCall","functionResponse","executableCode","codeExecutionResult"],vt={user:["text","inlineData"],function:["functionResponse"],model:["text","functionCall","executableCode","codeExecutionResult"],system:["text"]};function bt(n){let t=!1;for(let e of n){let{role:o,parts:i}=e;if(!t&&o!=="user")throw new S(`First content should be with role 'user', got ${o}`);if(!Ue.includes(o))throw new S(`Each item should include role field. Got ${o} but valid roles are: ${JSON.stringify(Ue)}`);if(!Array.isArray(i))throw new S("Content should have 'parts' property with an array of Parts");if(i.length===0)throw new S("Each Content should have at least one part");let r={text:0,inlineData:0,functionCall:0,functionResponse:0,fileData:0,executableCode:0,codeExecutionResult:0};for(let p of i)for(let b of Fe)b in p&&(r[b]+=1);let l=vt[o];for(let p of Fe)if(!l.includes(p)&&r[p]>0)throw new S(`Content with role '${o}' can't contain '${p}' part`);t=!0}}function $e(n){var t;if(n.candidates===void 0||n.candidates.length===0)return!1;let e=(t=n.candidates[0])===null||t===void 0?void 0:t.content;if(e===void 0||e.parts===void 0||e.parts.length===0)return!1;for(let o of e.parts)if(o===void 0||Object.keys(o).length===0||o.text!==void 0&&o.text==="")return!1;return!0}var Ye="SILENT_ERROR",ve=class{constructor(t,e,o,i={}){this.model=e,this.params=o,this._requestOptions=i,this._history=[],this._sendPromise=Promise.resolve(),this._apiKey=t,o?.history&&(bt(o.history),this._history=o.history)}getHistory(){return M(this,null,function*(){return yield this._sendPromise,this._history})}sendMessage(o){return M(this,arguments,function*(t,e={}){var i,r,l,p,b,E;yield this._sendPromise;let I=te(t),P={safetySettings:(i=this.params)===null||i===void 0?void 0:i.safetySettings,generationConfig:(r=this.params)===null||r===void 0?void 0:r.generationConfig,tools:(l=this.params)===null||l===void 0?void 0:l.tools,toolConfig:(p=this.params)===null||p===void 0?void 0:p.toolConfig,systemInstruction:(b=this.params)===null||b===void 0?void 0:b.systemInstruction,cachedContent:(E=this.params)===null||E===void 0?void 0:E.cachedContent,contents:[...this._history,I]},v=Object.assign(Object.assign({},this._requestOptions),e),x;return this._sendPromise=this._sendPromise.then(()=>qe(this._apiKey,this.model,P,v)).then(O=>{var N;if($e(O.response)){this._history.push(I);let ie=Object.assign({parts:[],role:"model"},(N=O.response.candidates)===null||N===void 0?void 0:N[0].content);this._history.push(ie)}else{let ie=F(O.response);ie&&console.warn(`sendMessage() was unsuccessful. ${ie}. Inspect response object for details.`)}x=O}).catch(O=>{throw this._sendPromise=Promise.resolve(),O}),yield this._sendPromise,x})}sendMessageStream(o){return M(this,arguments,function*(t,e={}){var i,r,l,p,b,E;yield this._sendPromise;let I=te(t),P={safetySettings:(i=this.params)===null||i===void 0?void 0:i.safetySettings,generationConfig:(r=this.params)===null||r===void 0?void 0:r.generationConfig,tools:(l=this.params)===null||l===void 0?void 0:l.tools,toolConfig:(p=this.params)===null||p===void 0?void 0:p.toolConfig,systemInstruction:(b=this.params)===null||b===void 0?void 0:b.systemInstruction,cachedContent:(E=this.params)===null||E===void 0?void 0:E.cachedContent,contents:[...this._history,I]},v=Object.assign(Object.assign({},this._requestOptions),e),x=He(this._apiKey,this.model,P,v);return this._sendPromise=this._sendPromise.then(()=>x).catch(O=>{throw new Error(Ye)}).then(O=>O.response).then(O=>{if($e(O)){this._history.push(I);let N=Object.assign({},O.candidates[0].content);N.role||(N.role="model"),this._history.push(N)}else{let N=F(O);N&&console.warn(`sendMessageStream() was unsuccessful. ${N}. Inspect response object for details.`)}}).catch(O=>{O.message!==Ye&&console.error(O)}),x})}};function Ot(n,t,e,o){return M(this,null,function*(){return(yield ne(t,W.COUNT_TOKENS,n,!1,JSON.stringify(e),o)).json()})}function xt(n,t,e,o){return M(this,null,function*(){return(yield ne(t,W.EMBED_CONTENT,n,!1,JSON.stringify(e),o)).json()})}function Mt(n,t,e,o){return M(this,null,function*(){let i=e.requests.map(l=>Object.assign(Object.assign({},l),{model:t}));return(yield ne(t,W.BATCH_EMBED_CONTENTS,n,!1,JSON.stringify({requests:i}),o)).json()})}var de=class{constructor(t,e,o={}){this.apiKey=t,this._requestOptions=o,e.model.includes("/")?this.model=e.model:this.model=`models/${e.model}`,this.generationConfig=e.generationConfig||{},this.safetySettings=e.safetySettings||[],this.tools=e.tools,this.toolConfig=e.toolConfig,this.systemInstruction=Be(e.systemInstruction),this.cachedContent=e.cachedContent}generateContent(o){return M(this,arguments,function*(t,e={}){var i;let r=je(t),l=Object.assign(Object.assign({},this._requestOptions),e);return qe(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(i=this.cachedContent)===null||i===void 0?void 0:i.name},r),l)})}generateContentStream(o){return M(this,arguments,function*(t,e={}){var i;let r=je(t),l=Object.assign(Object.assign({},this._requestOptions),e);return He(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(i=this.cachedContent)===null||i===void 0?void 0:i.name},r),l)})}startChat(t){var e;return new ve(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(e=this.cachedContent)===null||e===void 0?void 0:e.name},t),this._requestOptions)}countTokens(o){return M(this,arguments,function*(t,e={}){let i=ht(t,{model:this.model,generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:this.cachedContent}),r=Object.assign(Object.assign({},this._requestOptions),e);return Ot(this.apiKey,this.model,i,r)})}embedContent(o){return M(this,arguments,function*(t,e={}){let i=Ct(t),r=Object.assign(Object.assign({},this._requestOptions),e);return xt(this.apiKey,this.model,i,r)})}batchEmbedContents(o){return M(this,arguments,function*(t,e={}){let i=Object.assign(Object.assign({},this._requestOptions),e);return Mt(this.apiKey,this.model,t,i)})}};var ge=class{constructor(t){this.apiKey=t}getGenerativeModel(t,e){if(!t.model)throw new S("Must provide a model name. Example: genai.getGenerativeModel({ model: 'my-model-name' })");return new de(this.apiKey,t,e)}getGenerativeModelFromCachedContent(t,e,o){if(!t.name)throw new V("Cached content must contain a `name` field.");if(!t.model)throw new V("Cached content must contain a `model` field.");let i=["model","systemInstruction"];for(let l of i)if(e?.[l]&&t[l]&&e?.[l]!==t[l]){if(l==="model"){let p=e.model.startsWith("models/")?e.model.replace("models/",""):e.model,b=t.model.startsWith("models/")?t.model.replace("models/",""):t.model;if(p===b)continue}throw new V(`Different value for "${l}" specified in modelParams (${e[l]}) and cachedContent (${t[l]})`)}let r=Object.assign(Object.assign({},e),{model:t.model,tools:t.tools,toolConfig:t.toolConfig,systemInstruction:t.systemInstruction,cachedContent:t});return new de(this.apiKey,r,o)}};var pe=class n{authService=A(B);apiKey=h("");MODEL_NAME="gemini-2.0-flash";GEMINI_API_STUDIO_URL="https://aistudio.google.com/app/apikey";genAI=null;model=null;requestCount=0;lastResetTime=Date.now();MAX_REQUESTS_PER_DAY=1500;setApiKey(t){this.apiKey.set(t);let e=this.authService.currentUser()?.email,o=e?`gemini_api_key_${e.replace(/[^a-zA-Z0-9]/g,"_")}`:"gemini_api_key";localStorage.setItem(o,t),this.initializeSDK(t)}initializeSDK(t){try{this.genAI=new ge(t),this.model=this.genAI.getGenerativeModel({model:this.MODEL_NAME})}catch(e){console.error("Failed to initialize Gemini SDK:",e),this.genAI=null,this.model=null}}loadApiKey(){let t=this.authService.currentUser()?.email,e=null;if(t){let o=`gemini_api_key_${t.replace(/[^a-zA-Z0-9]/g,"_")}`,i=localStorage.getItem(o);i&&(e=i)}if(!e){let o=localStorage.getItem("gemini_api_key");o&&(e=o)}return e?(this.apiKey.set(e),this.initializeSDK(e),e):null}openGeminiApiStudio(){window.open(this.GEMINI_API_STUDIO_URL,"_blank","noopener,noreferrer")}isGoogleSignedIn(){return this.authService.isSignedIn()}getUserEmail(){return this.authService.currentUser()?.email||null}isConfigured(){return this.apiKey().length>0&&!!this.model}checkRateLimit(){let t=Date.now();return t-this.lastResetTime>1440*60*1e3&&(this.requestCount=0,this.lastResetTime=t),!(this.requestCount>=this.MAX_REQUESTS_PER_DAY)}buildPrompt(t,e,o){let i=o?`Title: ${o}

Content: ${e}`:e;switch(t){case"improve-grammar":return`Please improve the grammar, spelling, and punctuation of the following text while keeping the meaning and style intact. Return ONLY the improved text:

${i}`;case"summarize":return`Please provide a concise summary of the following text. Return ONLY the summary:

${i}`;case"expand":return`Please expand the following text with more details, examples, and explanations while maintaining the original meaning. Return ONLY the expanded text:

${i}`;case"simplify":return`Please simplify the following text to make it easier to understand, using simpler words and shorter sentences. Return ONLY the simplified text:

${i}`;case"suggest-title":return`Based on the following content, suggest a concise and descriptive title. Return ONLY the title, nothing else:

${i}`;case"suggest-tags":return`Based on the following content, suggest 3-5 relevant tags (keywords). Return ONLY a comma-separated list of tags, nothing else:

${i}`;case"improve-clarity":return`Please improve the clarity and readability of the following text, making it more organized and easier to understand. Return ONLY the improved text:

${i}`;case"extract-key-points":return`Extract the key points from the following text and present them as a bulleted list. Return ONLY the bulleted list:

${i}`;default:return`Please optimize the following text. Return ONLY the optimized text:

${i}`}}optimize(t,e,o){return M(this,null,function*(){if(!e.trim())throw new Error("Content is required for optimization");if(!this.checkRateLimit())throw new Error("Daily rate limit reached. Please try again tomorrow.");if(!this.model){let i=this.apiKey();if(!i)throw new Error("API key not configured. Please set up your Gemini API key.");if(this.initializeSDK(i),!this.model)throw new Error("Failed to initialize Gemini SDK. Please check your API key.")}try{let i=this.buildPrompt(t,e,o),p=(yield(yield this.model.generateContent(i)).response).text();if(this.requestCount++,!p)throw new Error("No response text received from AI");let b=p.trim();switch(t){case"suggest-title":return{content:e,title:b.replace(/^["']|["']$/g,"")};case"suggest-tags":let E=b.split(",").map(I=>I.trim()).filter(I=>I.length>0);return{content:e,tags:E};case"extract-key-points":return{content:b,suggestions:b.split(`
`).filter(I=>I.trim().length>0)};default:return{content:b}}}catch(i){throw console.error("Gemini API Error:",i),i.message?.includes("API key not valid")||i.status===400?new Error("Invalid API key. Please check your settings."):i.status===429?new Error("Rate limit exceeded. Please try again later."):new Error(i.message||"Failed to generate content. Please try again.")}})}getRemainingRequests(){return Math.max(0,this.MAX_REQUESTS_PER_DAY-this.requestCount)}static \u0275fac=function(e){return new(e||n)};static \u0275prov=xe({token:n,factory:n.\u0275fac,providedIn:"root"})};var yt=(n,t)=>t.type;function wt(n,t){n&1&&(C(0,"app-icon",5),a(1,"span"),d(2,"Processing..."),s()),n&2&&f("size",18)}function Pt(n,t){n&1&&(C(0,"app-icon",6),a(1,"span"),d(2,"AI Optimize"),s()),n&2&&f("size",18)}function kt(n,t){if(n&1){let e=k();a(0,"div",7),m("click",function(){u(e);let i=g();return _(i.closeDropdown())}),s()}}function Et(n,t){if(n&1){let e=k();a(0,"button",15),m("click",function(){let i=u(e).$implicit,r=g(2);return _(r.optimize(i.type))}),C(1,"app-icon",16),a(2,"div",17)(3,"span",18),d(4),s(),a(5,"span",19),d(6),s()()()}if(n&2){let e=t.$implicit,o=g(2);f("disabled",o.isProcessing()),c(),f("name",e.icon)("size",20),c(3),z(e.label),c(2),z(e.description)}}function It(n,t){if(n&1){let e=k();a(0,"div",3)(1,"div",8)(2,"h3"),d(3,"Optimize Note"),s(),a(4,"button",9),m("click",function(){u(e);let i=g();return _(i.closeDropdown())}),C(5,"app-icon",10),s()(),a(6,"div",11),m("scroll",function(){u(e);let i=g();return _(i.checkScrollPosition())}),R(7,Et,7,5,"button",12,yt),s(),a(9,"div",13)(10,"span",14),d(11),s()()()}if(n&2){let e=g();c(5),f("size",16),c(2),L(e.optimizationOptions),c(4),K(" ~",e.getRemainingRequests()," requests remaining today ")}}function St(n,t){if(n&1){let e=k();a(0,"div",28),C(1,"app-icon",29),a(2,"span"),d(3),s()(),a(4,"p",30),d(5," Great! Since you're signed in with Google, we can make setup super easy. "),s(),a(6,"div",31)(7,"button",32),m("click",function(){u(e);let i=g(2);return _(i.openGeminiStudio())}),C(8,"app-icon",33),a(9,"span"),d(10,"Open Google AI Studio"),s()(),a(11,"p",34),d(12,` This will open Google AI Studio in a new tab. You're already signed in, so just click "Create API Key" and copy it here. `),s()(),a(13,"ol",35)(14,"li"),d(15,"Click the button above to open Google AI Studio"),s(),a(16,"li"),d(17,`Click "Create API Key" (you're already signed in!)`),s(),a(18,"li"),d(19,"Copy your API key and paste it below"),s()(),a(20,"div",36)(21,"label",37),d(22,"API Key"),s(),a(23,"input",38),m("input",function(i){u(e);let r=g(2);return _(r.apiKeyInput.set(i.target.value))})("keyup.enter",function(){u(e);let i=g(2);return _(i.saveApiKey())}),s()()}if(n&2){let e=g(2);c(),f("size",20),c(2),K("Signed in as ",e.getUserEmail()),c(5),f("size",18),c(15),f("value",e.apiKeyInput())}}function Tt(n,t){if(n&1){let e=k();a(0,"p",30),d(1," To use AI optimization, you need to either sign in with Google (recommended) or set up an API key. "),s(),a(2,"div",39)(3,"div",40)(4,"h5"),d(5,"Option 1: Sign in with Google (Recommended)"),s(),a(6,"p",19),d(7," Sign in with Google and AI optimization works automatically - no setup needed! "),s(),a(8,"button",27),m("click",function(){u(e);let i=g(2);return _(i.goToLogin())}),d(9," Sign In with Google "),s()(),a(10,"div",41)(11,"span"),d(12,"OR"),s()(),a(13,"div",40)(14,"h5"),d(15,"Option 2: Use API Key"),s(),a(16,"p",19),d(17," Set up a free Google Gemini API key manually. "),s()()(),a(18,"ol",35)(19,"li"),d(20,"Visit "),a(21,"a",42),d(22,"Google AI Studio"),s()(),a(23,"li"),d(24,"Sign in with your Google account"),s(),a(25,"li"),d(26,'Click "Create API Key"'),s(),a(27,"li"),d(28,"Copy your API key and paste it below"),s()(),a(29,"div",36)(30,"label",43),d(31,"API Key"),s(),a(32,"input",44),m("input",function(i){u(e);let r=g(2);return _(r.apiKeyInput.set(i.target.value))})("keyup.enter",function(){u(e);let i=g(2);return _(i.saveApiKey())}),s()()}if(n&2){let e=g(2);c(32),f("value",e.apiKeyInput())}}function zt(n,t){if(n&1){let e=k();a(0,"div",20),m("click",function(){u(e);let i=g();return _(i.cancelApiKeyDialog())}),a(1,"div",21),m("click",function(i){return u(e),_(i.stopPropagation())}),a(2,"div",22)(3,"h3"),d(4,"Setup AI Optimization"),s(),a(5,"button",9),m("click",function(){u(e);let i=g();return _(i.cancelApiKeyDialog())}),C(6,"app-icon",10),s()(),a(7,"div",23),y(8,St,24,4)(9,Tt,33,1),a(10,"p",24)(11,"strong"),d(12,"Privacy Note:"),s(),d(13," Your API key is stored "),a(14,"strong"),d(15,"only in your browser's local storage"),s(),d(16,". It is never sent to our servers. We use the official Google Generative AI SDK to communicate directly with Google's servers. "),C(17,"br")(18,"br"),d(19," Free tier includes 15 requests/minute and 1,500 requests/day. "),s()(),a(20,"div",25)(21,"button",26),m("click",function(){u(e);let i=g();return _(i.cancelApiKeyDialog())}),d(22," Cancel "),s(),a(23,"button",27),m("click",function(){u(e);let i=g();return _(i.saveApiKey())}),d(24," Save & Continue "),s()()()()}if(n&2){let e=g();c(6),f("size",20),c(2),w(e.isGoogleSignedIn()?8:9)}}var me=class n{aiService=A(pe);authService=A(B);router=A(re);content=G.required();title=G("");optimized=H();error=H();isOpen=h(!1);isProcessing=h(!1);currentOptimization=h(null);showApiKeyDialog=h(!1);apiKeyInput=h("");canScrollTop=h(!1);canScrollBottom=h(!1);optimizationOptions=[{type:"improve-grammar",label:"Improve Grammar",icon:"edit",description:"Fix grammar, spelling, and punctuation"},{type:"summarize",label:"Summarize",icon:"compress",description:"Create a concise summary"},{type:"expand",label:"Expand",icon:"expand",description:"Add more details and examples"},{type:"simplify",label:"Simplify",icon:"simplify",description:"Make it easier to understand"},{type:"suggest-title",label:"Suggest Title",icon:"title",description:"Generate a better title"},{type:"suggest-tags",label:"Suggest Tags",icon:"tag",description:"Generate relevant tags"},{type:"improve-clarity",label:"Improve Clarity",icon:"eye",description:"Make it clearer and more organized"},{type:"extract-key-points",label:"Extract Key Points",icon:"list",description:"Get main points as bullets"}];constructor(){Y(()=>{this.authService.isSignedIn()&&this.aiService.loadApiKey()})}ngOnInit(){this.aiService.loadApiKey()}toggleDropdown(){if(!this.aiService.isConfigured()){this.showApiKeyDialog.set(!0);return}this.isOpen.update(t=>!t),this.isOpen()?(document.body.style.overflow="hidden",setTimeout(()=>this.checkScrollPosition(),100)):document.body.style.overflow=""}closeDropdown(){this.isOpen.set(!1),document.body.style.overflow=""}checkScrollPosition(){let t=document.querySelector(".options-list");if(!t)return;let e=t.scrollHeight>t.clientHeight,o=t.scrollTop<=5,i=t.scrollTop+t.clientHeight>=t.scrollHeight-5;this.canScrollTop.set(e&&!o),this.canScrollBottom.set(e&&!i),t.classList.toggle("scrollable-top",e&&!o),t.classList.toggle("scrollable-bottom",e&&!i)}optimize(t){return M(this,null,function*(){if(!this.content().trim()){this.error.emit("Please add some content to optimize");return}if(!this.aiService.isConfigured()){this.showApiKeyDialog.set(!0);return}this.isProcessing.set(!0),this.currentOptimization.set(t),this.isOpen.set(!1);try{let e=yield this.aiService.optimize(t,this.content(),this.title());this.optimized.emit(e)}catch(e){this.error.emit(e.message||"Failed to optimize. Please try again.")}finally{this.isProcessing.set(!1),this.currentOptimization.set(null)}})}saveApiKey(){let t=this.apiKeyInput().trim();if(!t){this.error.emit("Please enter a valid API key");return}this.aiService.setApiKey(t),this.showApiKeyDialog.set(!1),this.apiKeyInput.set("")}cancelApiKeyDialog(){this.showApiKeyDialog.set(!1),this.apiKeyInput.set("")}openApiKeyDialog(){this.showApiKeyDialog.set(!0)}openGeminiStudio(){this.aiService.openGeminiApiStudio()}isGoogleSignedIn(){return this.aiService.isGoogleSignedIn()}getUserEmail(){return this.aiService.getUserEmail()}goToLogin(){this.cancelApiKeyDialog(),this.router.navigate(["/login"])}getRemainingRequests(){return this.aiService.getRemainingRequests()}ngOnDestroy(){document.body.style.overflow=""}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=$({type:n,selectors:[["app-ai-optimization-dropdown"]],inputs:{content:[1,"content"],title:[1,"title"]},outputs:{optimized:"optimized",error:"error"},decls:7,vars:7,consts:[[1,"ai-optimization-dropdown"],["aria-label","AI Optimization","title","AI Optimization",1,"ai-optimize-btn",3,"click","disabled"],[1,"dropdown-overlay"],[1,"dropdown-menu"],[1,"api-key-dialog-overlay"],["name","sync-loading",3,"size"],["name","sparkles",3,"size"],[1,"dropdown-overlay",3,"click"],[1,"dropdown-header"],["aria-label","Close",1,"close-btn",3,"click"],["name","close",3,"size"],[1,"options-list",3,"scroll"],[1,"option-item",3,"disabled"],[1,"dropdown-footer"],[1,"remaining-requests"],[1,"option-item",3,"click","disabled"],[3,"name","size"],[1,"option-content"],[1,"option-label"],[1,"option-description"],[1,"api-key-dialog-overlay",3,"click"],[1,"api-key-dialog",3,"click"],[1,"dialog-header"],[1,"dialog-content"],[1,"note-text"],[1,"dialog-actions"],[1,"btn","btn-secondary",3,"click"],[1,"btn","btn-primary",3,"click"],[1,"google-signin-badge"],["name","profile",3,"size"],[1,"info-text"],[1,"quick-setup"],[1,"btn","btn-primary","quick-setup-btn",3,"click"],["name","add",3,"size"],[1,"quick-setup-note"],[1,"setup-steps"],[1,"input-group"],["for","api-key-input"],["id","api-key-input","type","password","placeholder","Enter your Gemini API key",1,"api-key-input",3,"input","keyup.enter","value"],[1,"signin-priority"],[1,"signin-option"],[1,"divider"],["href","https://makersuite.google.com/app/apikey","target","_blank","rel","noopener"],["for","api-key-input-manual"],["id","api-key-input-manual","type","password","placeholder","Enter your Gemini API key",1,"api-key-input",3,"input","keyup.enter","value"]],template:function(e,o){e&1&&(a(0,"div",0)(1,"button",1),m("click",function(){return o.toggleDropdown()}),y(2,wt,3,1)(3,Pt,3,1),s(),y(4,kt,1,0,"div",2),y(5,It,12,2,"div",3),y(6,zt,25,2,"div",4),s()),e&2&&(c(),D("processing",o.isProcessing()),f("disabled",o.isProcessing()),c(),w(o.isProcessing()?2:3),c(2),w(o.isOpen()?4:-1),c(),w(o.isOpen()?5:-1),c(),w(o.showApiKeyDialog()?6:-1))},dependencies:[q,Z],styles:['.ai-optimization-dropdown[_ngcontent-%COMP%]{position:relative;display:inline-block}.ai-optimize-btn[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;padding:.625rem 1rem;background:linear-gradient(135deg,#667eea,#764ba2);color:#fff;border:none;border-radius:8px;font-size:.875rem;font-weight:500;cursor:pointer;transition:all .2s ease;box-shadow:0 2px 8px #667eea4d}.ai-optimize-btn[_ngcontent-%COMP%]:hover:not(:disabled){transform:translateY(-1px);box-shadow:0 4px 12px #667eea66}.ai-optimize-btn[_ngcontent-%COMP%]:active:not(:disabled){transform:translateY(0)}.ai-optimize-btn.processing[_ngcontent-%COMP%]{opacity:.7;cursor:not-allowed}.ai-optimize-btn[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed}.ai-optimize-btn[_ngcontent-%COMP%]   app-icon[_ngcontent-%COMP%]{color:#fff}@media (max-width: 640px){.ai-optimize-btn[_ngcontent-%COMP%]{padding:.5rem .75rem;font-size:.8125rem;gap:.375rem}}.dropdown-menu[_ngcontent-%COMP%]{position:fixed;top:50%;left:50%;transform:translate(-50%,-50%);background:var(--bg-elevated);border:1px solid var(--border-color);border-radius:16px;box-shadow:0 20px 60px #0000004d;width:90%;max-width:420px;max-height:85vh;z-index:10000;animation:_ngcontent-%COMP%_slideUp .2s ease;overflow:hidden;display:flex;flex-direction:column}@media (min-width: 768px){.dropdown-menu[_ngcontent-%COMP%]{position:absolute;top:auto;bottom:calc(100% + .5rem);left:auto;right:0;transform:none;width:auto;min-width:320px;max-width:380px;max-height:70vh;animation:_ngcontent-%COMP%_slideDown .2s ease}}@media (max-width: 640px){.dropdown-menu[_ngcontent-%COMP%]{position:fixed;inset:auto 0 0;width:100%;max-width:100%;border-radius:20px 20px 0 0;transform:none;animation:_ngcontent-%COMP%_slideUpMobile .3s cubic-bezier(.16,1,.3,1);border-bottom:none;max-height:80vh}}.dropdown-menu[_ngcontent-%COMP%]   .dropdown-header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;padding:1rem;border-bottom:1px solid var(--border-color)}.dropdown-menu[_ngcontent-%COMP%]   .dropdown-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;font-size:1rem;font-weight:600;color:var(--text-primary)}.dropdown-menu[_ngcontent-%COMP%]   .dropdown-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]{background:none;border:none;padding:.25rem;cursor:pointer;color:var(--text-secondary);display:flex;align-items:center;justify-content:center;border-radius:4px;transition:all .2s ease}.dropdown-menu[_ngcontent-%COMP%]   .dropdown-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]:hover{background:var(--bg-hover);color:var(--text-primary)}.dropdown-menu[_ngcontent-%COMP%]   .options-list[_ngcontent-%COMP%]{flex:1;overflow-y:auto;overflow-x:hidden;padding:.5rem;min-height:0;position:relative}.dropdown-menu[_ngcontent-%COMP%]   .options-list[_ngcontent-%COMP%]::-webkit-scrollbar{width:8px}.dropdown-menu[_ngcontent-%COMP%]   .options-list[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:var(--bg-secondary);border-radius:4px;margin:.5rem 0}.dropdown-menu[_ngcontent-%COMP%]   .options-list[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:var(--border-color);border-radius:4px;transition:background .2s ease}.dropdown-menu[_ngcontent-%COMP%]   .options-list[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:var(--primary-color)}.dropdown-menu[_ngcontent-%COMP%]   .options-list[_ngcontent-%COMP%]:before{content:"";position:sticky;top:0;left:0;right:0;height:10px;background:linear-gradient(to bottom,var(--bg-elevated),transparent);pointer-events:none;z-index:1;opacity:0;transition:opacity .2s ease}.dropdown-menu[_ngcontent-%COMP%]   .options-list[_ngcontent-%COMP%]:after{content:"";position:sticky;bottom:0;left:0;right:0;height:10px;background:linear-gradient(to top,var(--bg-elevated),transparent);pointer-events:none;z-index:1;opacity:0;transition:opacity .2s ease}.dropdown-menu[_ngcontent-%COMP%]   .options-list.scrollable-top[_ngcontent-%COMP%]:before{opacity:1}.dropdown-menu[_ngcontent-%COMP%]   .options-list.scrollable-bottom[_ngcontent-%COMP%]:after{opacity:1}.dropdown-menu[_ngcontent-%COMP%]   .options-list[_ngcontent-%COMP%]   .option-item[_ngcontent-%COMP%]{width:100%;display:flex;align-items:flex-start;gap:.75rem;padding:.875rem;background:transparent;border:none;border-radius:10px;cursor:pointer;transition:all .2s ease;text-align:left;color:var(--text-primary);margin-bottom:.25rem}.dropdown-menu[_ngcontent-%COMP%]   .options-list[_ngcontent-%COMP%]   .option-item[_ngcontent-%COMP%]:hover:not(:disabled){background:var(--bg-hover);transform:translate(2px)}.dropdown-menu[_ngcontent-%COMP%]   .options-list[_ngcontent-%COMP%]   .option-item[_ngcontent-%COMP%]:active:not(:disabled){transform:translate(2px) scale(.98)}.dropdown-menu[_ngcontent-%COMP%]   .options-list[_ngcontent-%COMP%]   .option-item[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}.dropdown-menu[_ngcontent-%COMP%]   .options-list[_ngcontent-%COMP%]   .option-item[_ngcontent-%COMP%]   app-icon[_ngcontent-%COMP%]{color:var(--primary-color);flex-shrink:0;margin-top:2px}.dropdown-menu[_ngcontent-%COMP%]   .options-list[_ngcontent-%COMP%]   .option-item[_ngcontent-%COMP%]   .option-content[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column;gap:.25rem;min-width:0}.dropdown-menu[_ngcontent-%COMP%]   .options-list[_ngcontent-%COMP%]   .option-item[_ngcontent-%COMP%]   .option-content[_ngcontent-%COMP%]   .option-label[_ngcontent-%COMP%]{font-weight:600;font-size:.9375rem;color:var(--text-primary);line-height:1.3}.dropdown-menu[_ngcontent-%COMP%]   .options-list[_ngcontent-%COMP%]   .option-item[_ngcontent-%COMP%]   .option-content[_ngcontent-%COMP%]   .option-description[_ngcontent-%COMP%]{font-size:.8125rem;color:var(--text-secondary);line-height:1.4}.dropdown-menu[_ngcontent-%COMP%]   .dropdown-footer[_ngcontent-%COMP%]{padding:.75rem 1rem;border-top:1px solid var(--border-color);background:var(--bg-secondary);flex-shrink:0}.dropdown-menu[_ngcontent-%COMP%]   .dropdown-footer[_ngcontent-%COMP%]   .remaining-requests[_ngcontent-%COMP%]{font-size:.75rem;color:var(--text-tertiary);text-align:center;display:block}.dropdown-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background:#00000080;-webkit-backdrop-filter:blur(4px);backdrop-filter:blur(4px);z-index:9999;animation:_ngcontent-%COMP%_fadeIn .2s ease}@media (min-width: 768px){.dropdown-overlay[_ngcontent-%COMP%]{display:none}}.api-key-dialog-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background:#0009;-webkit-backdrop-filter:blur(4px);backdrop-filter:blur(4px);z-index:10000;display:flex;align-items:center;justify-content:center;padding:1rem;animation:_ngcontent-%COMP%_fadeIn .2s ease}.api-key-dialog[_ngcontent-%COMP%]{background:var(--bg-elevated);border-radius:16px;max-width:500px;width:100%;max-height:90vh;overflow-y:auto;box-shadow:0 20px 60px #0000004d;animation:_ngcontent-%COMP%_slideUp .2s ease}.api-key-dialog[_ngcontent-%COMP%]   .dialog-header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;padding:1.5rem;border-bottom:1px solid var(--border-color)}.api-key-dialog[_ngcontent-%COMP%]   .dialog-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;font-size:1.25rem;font-weight:600;color:var(--text-primary)}.api-key-dialog[_ngcontent-%COMP%]   .dialog-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]{background:none;border:none;padding:.5rem;cursor:pointer;color:var(--text-secondary);display:flex;align-items:center;justify-content:center;border-radius:8px;transition:all .2s ease}.api-key-dialog[_ngcontent-%COMP%]   .dialog-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]:hover{background:var(--bg-hover);color:var(--text-primary)}.api-key-dialog[_ngcontent-%COMP%]   .dialog-content[_ngcontent-%COMP%]{padding:1.5rem}.api-key-dialog[_ngcontent-%COMP%]   .dialog-content[_ngcontent-%COMP%]   .google-signin-badge[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;padding:.75rem 1rem;background:var(--bg-secondary);border:1px solid var(--border-color);border-radius:8px;margin-bottom:1rem;color:var(--text-primary);font-size:.875rem}.api-key-dialog[_ngcontent-%COMP%]   .dialog-content[_ngcontent-%COMP%]   .google-signin-badge[_ngcontent-%COMP%]   app-icon[_ngcontent-%COMP%]{color:var(--primary-color)}.api-key-dialog[_ngcontent-%COMP%]   .dialog-content[_ngcontent-%COMP%]   .info-text[_ngcontent-%COMP%]{margin:0 0 1rem;color:var(--text-primary);line-height:1.6}.api-key-dialog[_ngcontent-%COMP%]   .dialog-content[_ngcontent-%COMP%]   .quick-setup[_ngcontent-%COMP%]{margin:1.5rem 0;padding:1rem;background:var(--bg-secondary);border:1px solid var(--border-color);border-radius:8px}.api-key-dialog[_ngcontent-%COMP%]   .dialog-content[_ngcontent-%COMP%]   .quick-setup[_ngcontent-%COMP%]   .quick-setup-btn[_ngcontent-%COMP%]{width:100%;display:flex;align-items:center;justify-content:center;gap:.5rem;padding:.875rem 1.5rem;background:var(--primary-color);color:#fff;border:none;border-radius:8px;font-size:.875rem;font-weight:500;cursor:pointer;transition:all .2s ease}.api-key-dialog[_ngcontent-%COMP%]   .dialog-content[_ngcontent-%COMP%]   .quick-setup[_ngcontent-%COMP%]   .quick-setup-btn[_ngcontent-%COMP%]:hover{background:var(--primary-hover);transform:translateY(-1px);box-shadow:0 4px 12px #00000026}.api-key-dialog[_ngcontent-%COMP%]   .dialog-content[_ngcontent-%COMP%]   .quick-setup[_ngcontent-%COMP%]   .quick-setup-btn[_ngcontent-%COMP%]:active{transform:translateY(0)}.api-key-dialog[_ngcontent-%COMP%]   .dialog-content[_ngcontent-%COMP%]   .quick-setup[_ngcontent-%COMP%]   .quick-setup-btn[_ngcontent-%COMP%]   app-icon[_ngcontent-%COMP%]{color:#fff}.api-key-dialog[_ngcontent-%COMP%]   .dialog-content[_ngcontent-%COMP%]   .quick-setup[_ngcontent-%COMP%]   .quick-setup-note[_ngcontent-%COMP%]{margin:.75rem 0 0;font-size:.8125rem;color:var(--text-secondary);line-height:1.5;text-align:center}.api-key-dialog[_ngcontent-%COMP%]   .dialog-content[_ngcontent-%COMP%]   .auto-setup-success[_ngcontent-%COMP%]{text-align:center;padding:1.5rem 1rem;margin-bottom:1rem}.api-key-dialog[_ngcontent-%COMP%]   .dialog-content[_ngcontent-%COMP%]   .auto-setup-success[_ngcontent-%COMP%]   .success-icon[_ngcontent-%COMP%]{display:flex;justify-content:center;margin-bottom:1rem}.api-key-dialog[_ngcontent-%COMP%]   .dialog-content[_ngcontent-%COMP%]   .auto-setup-success[_ngcontent-%COMP%]   .success-icon[_ngcontent-%COMP%]   app-icon[_ngcontent-%COMP%]{color:var(--primary-color);background:#667eea1a;padding:1rem;border-radius:50%}.api-key-dialog[_ngcontent-%COMP%]   .dialog-content[_ngcontent-%COMP%]   .auto-setup-success[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0 0 .75rem;font-size:1.125rem;font-weight:600;color:var(--text-primary)}.api-key-dialog[_ngcontent-%COMP%]   .dialog-content[_ngcontent-%COMP%]   .auto-setup-success[_ngcontent-%COMP%]   .info-text[_ngcontent-%COMP%]{margin:0 0 1rem;color:var(--text-secondary);line-height:1.6}.api-key-dialog[_ngcontent-%COMP%]   .dialog-content[_ngcontent-%COMP%]   .auto-setup-success[_ngcontent-%COMP%]   .google-signin-badge[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:.5rem;padding:.5rem 1rem;background:var(--bg-secondary);border:1px solid var(--border-color);border-radius:8px;color:var(--text-primary);font-size:.875rem}.api-key-dialog[_ngcontent-%COMP%]   .dialog-content[_ngcontent-%COMP%]   .auto-setup-success[_ngcontent-%COMP%]   .google-signin-badge[_ngcontent-%COMP%]   app-icon[_ngcontent-%COMP%]{color:var(--primary-color)}.api-key-dialog[_ngcontent-%COMP%]   .dialog-content[_ngcontent-%COMP%]   .optional-api-key-section[_ngcontent-%COMP%]{margin-top:1.5rem;padding-top:1.5rem;border-top:1px solid var(--border-color)}.api-key-dialog[_ngcontent-%COMP%]   .dialog-content[_ngcontent-%COMP%]   .optional-api-key-section[_ngcontent-%COMP%]   .optional-section[_ngcontent-%COMP%]   summary[_ngcontent-%COMP%]{cursor:pointer;padding:.75rem;background:var(--bg-secondary);border-radius:8px;font-size:.875rem;color:var(--text-secondary);-webkit-user-select:none;user-select:none;transition:all .2s ease}.api-key-dialog[_ngcontent-%COMP%]   .dialog-content[_ngcontent-%COMP%]   .optional-api-key-section[_ngcontent-%COMP%]   .optional-section[_ngcontent-%COMP%]   summary[_ngcontent-%COMP%]:hover{background:var(--bg-hover);color:var(--text-primary)}.api-key-dialog[_ngcontent-%COMP%]   .dialog-content[_ngcontent-%COMP%]   .optional-api-key-section[_ngcontent-%COMP%]   .optional-section[_ngcontent-%COMP%]   .optional-content[_ngcontent-%COMP%]{padding:1rem 0}.api-key-dialog[_ngcontent-%COMP%]   .dialog-content[_ngcontent-%COMP%]   .optional-api-key-section[_ngcontent-%COMP%]   .optional-section[_ngcontent-%COMP%]   .optional-content[_ngcontent-%COMP%]   .info-text-small[_ngcontent-%COMP%]{margin:0 0 1rem;font-size:.8125rem;color:var(--text-secondary);line-height:1.5}.api-key-dialog[_ngcontent-%COMP%]   .dialog-content[_ngcontent-%COMP%]   .signin-priority[_ngcontent-%COMP%]{margin:1.5rem 0;display:flex;flex-direction:column;gap:1rem}.api-key-dialog[_ngcontent-%COMP%]   .dialog-content[_ngcontent-%COMP%]   .signin-priority[_ngcontent-%COMP%]   .signin-option[_ngcontent-%COMP%]{padding:1rem;background:var(--bg-secondary);border:1px solid var(--border-color);border-radius:8px}.api-key-dialog[_ngcontent-%COMP%]   .dialog-content[_ngcontent-%COMP%]   .signin-priority[_ngcontent-%COMP%]   .signin-option[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{margin:0 0 .5rem;font-size:.9375rem;font-weight:600;color:var(--text-primary)}.api-key-dialog[_ngcontent-%COMP%]   .dialog-content[_ngcontent-%COMP%]   .signin-priority[_ngcontent-%COMP%]   .signin-option[_ngcontent-%COMP%]   .option-description[_ngcontent-%COMP%]{margin:0 0 .75rem;font-size:.8125rem;color:var(--text-secondary);line-height:1.5}.api-key-dialog[_ngcontent-%COMP%]   .dialog-content[_ngcontent-%COMP%]   .signin-priority[_ngcontent-%COMP%]   .signin-option[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{width:100%}.api-key-dialog[_ngcontent-%COMP%]   .dialog-content[_ngcontent-%COMP%]   .signin-priority[_ngcontent-%COMP%]   .divider[_ngcontent-%COMP%]{display:flex;align-items:center;text-align:center;margin:.5rem 0}.api-key-dialog[_ngcontent-%COMP%]   .dialog-content[_ngcontent-%COMP%]   .signin-priority[_ngcontent-%COMP%]   .divider[_ngcontent-%COMP%]:before, .api-key-dialog[_ngcontent-%COMP%]   .dialog-content[_ngcontent-%COMP%]   .signin-priority[_ngcontent-%COMP%]   .divider[_ngcontent-%COMP%]:after{content:"";flex:1;border-bottom:1px solid var(--border-color)}.api-key-dialog[_ngcontent-%COMP%]   .dialog-content[_ngcontent-%COMP%]   .signin-priority[_ngcontent-%COMP%]   .divider[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{padding:0 1rem;font-size:.75rem;color:var(--text-tertiary);font-weight:500}.api-key-dialog[_ngcontent-%COMP%]   .dialog-content[_ngcontent-%COMP%]   .signin-suggestion[_ngcontent-%COMP%]{margin:1rem 0;padding:.75rem 1rem;background:#667eea1a;border:1px solid rgba(102,126,234,.2);border-radius:8px}.api-key-dialog[_ngcontent-%COMP%]   .dialog-content[_ngcontent-%COMP%]   .signin-suggestion[_ngcontent-%COMP%]   .suggestion-text[_ngcontent-%COMP%]{margin:0;font-size:.875rem;color:var(--text-primary);line-height:1.5}.api-key-dialog[_ngcontent-%COMP%]   .dialog-content[_ngcontent-%COMP%]   .signin-suggestion[_ngcontent-%COMP%]   .suggestion-text[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{color:var(--primary-color)}.api-key-dialog[_ngcontent-%COMP%]   .dialog-content[_ngcontent-%COMP%]   .setup-steps[_ngcontent-%COMP%]{margin:1rem 0;padding-left:1.5rem;color:var(--text-primary);line-height:1.8}.api-key-dialog[_ngcontent-%COMP%]   .dialog-content[_ngcontent-%COMP%]   .setup-steps[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin:.5rem 0}.api-key-dialog[_ngcontent-%COMP%]   .dialog-content[_ngcontent-%COMP%]   .setup-steps[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:var(--primary-color);text-decoration:none}.api-key-dialog[_ngcontent-%COMP%]   .dialog-content[_ngcontent-%COMP%]   .setup-steps[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{text-decoration:underline}.api-key-dialog[_ngcontent-%COMP%]   .dialog-content[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]{margin:1.5rem 0}.api-key-dialog[_ngcontent-%COMP%]   .dialog-content[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:.5rem;font-weight:500;color:var(--text-primary);font-size:.875rem}.api-key-dialog[_ngcontent-%COMP%]   .dialog-content[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]   .api-key-input[_ngcontent-%COMP%]{width:100%;padding:.75rem;border:1px solid var(--border-color);border-radius:8px;font-size:1rem;background:var(--bg-primary);color:var(--text-primary);font-family:monospace}.api-key-dialog[_ngcontent-%COMP%]   .dialog-content[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]   .api-key-input[_ngcontent-%COMP%]:focus{outline:none;border-color:var(--primary-color);box-shadow:0 0 0 3px var(--primary-light)}.api-key-dialog[_ngcontent-%COMP%]   .dialog-content[_ngcontent-%COMP%]   .note-text[_ngcontent-%COMP%]{margin:1rem 0 0;font-size:.875rem;color:var(--text-secondary);line-height:1.6}.api-key-dialog[_ngcontent-%COMP%]   .dialog-content[_ngcontent-%COMP%]   .note-text[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{color:var(--text-primary)}.api-key-dialog[_ngcontent-%COMP%]   .dialog-actions[_ngcontent-%COMP%]{display:flex;gap:.75rem;padding:1.5rem;border-top:1px solid var(--border-color);justify-content:flex-end}@media (max-width: 640px){.api-key-dialog[_ngcontent-%COMP%]   .dialog-actions[_ngcontent-%COMP%]{flex-direction:column-reverse}}.api-key-dialog[_ngcontent-%COMP%]   .dialog-actions[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{padding:.75rem 1.5rem;border-radius:8px;font-size:.875rem;font-weight:500;cursor:pointer;transition:all .2s ease;border:none}.api-key-dialog[_ngcontent-%COMP%]   .dialog-actions[_ngcontent-%COMP%]   .btn.btn-primary[_ngcontent-%COMP%]{background:var(--primary-color);color:#fff}.api-key-dialog[_ngcontent-%COMP%]   .dialog-actions[_ngcontent-%COMP%]   .btn.btn-primary[_ngcontent-%COMP%]:hover{background:var(--primary-hover)}.api-key-dialog[_ngcontent-%COMP%]   .dialog-actions[_ngcontent-%COMP%]   .btn.btn-secondary[_ngcontent-%COMP%]{background:var(--bg-secondary);color:var(--text-primary);border:1px solid var(--border-color)}.api-key-dialog[_ngcontent-%COMP%]   .dialog-actions[_ngcontent-%COMP%]   .btn.btn-secondary[_ngcontent-%COMP%]:hover{background:var(--bg-hover)}@keyframes _ngcontent-%COMP%_slideDown{0%{opacity:0;transform:translateY(-10px)}to{opacity:1;transform:translateY(0)}}@keyframes _ngcontent-%COMP%_slideUp{0%{opacity:0;transform:translate(-50%,-45%)}to{opacity:1;transform:translate(-50%,-50%)}}@keyframes _ngcontent-%COMP%_slideUp{0%{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0}to{opacity:1}}@keyframes _ngcontent-%COMP%_slideUpMobile{0%{transform:translateY(100%)}to{transform:translateY(0)}}']})};function Nt(n,t){if(n&1&&(a(0,"span",26),d(1),s()),n&2){let e=t.$implicit;c(),z(e)}}function At(n,t){n&1&&(a(0,"span",27),d(1,"No tags"),s())}function Dt(n,t){if(n&1&&(a(0,"div",16),R(1,Nt,2,1,"span",26,X),y(3,At,2,0,"span",27),s()),n&2){let e=g();c(),L(e.formattedOriginalTags()),c(2),w(e.formattedOriginalTags().length===0?3:-1)}}function Rt(n,t){if(n&1&&(a(0,"div",17),d(1),s()),n&2){let e=g();c(),z(e.originalContent()||"(Empty)")}}function Lt(n,t){if(n&1&&(a(0,"span",28),d(1),s()),n&2){let e=t.$implicit;c(),z(e)}}function Vt(n,t){if(n&1&&(a(0,"div",16),R(1,Lt,2,1,"span",28,X),s()),n&2){let e=g();c(),L(e.formattedOptimizedTags())}}function Ut(n,t){if(n&1&&(a(0,"div",17),d(1),s()),n&2){let e=g();c(),z(e.optimizedContent())}}var ue=class n{originalContent=G.required();optimizedContent=G.required();type=G.required();optimizationType=G(null);confirm=H();cancel=H();activeTab=h("suggested");formattedOriginalTags=J(()=>this.type()!=="tags"?[]:this.originalContent().split(",").map(t=>t.trim()).filter(t=>t));formattedOptimizedTags=J(()=>this.type()!=="tags"?[]:this.optimizedContent().split(",").map(t=>t.trim()).filter(t=>t));getTitle(){switch(this.type()){case"title":return"Review Title Suggestion";case"tags":return"Review Tag Suggestions";default:return"Review Content Optimization"}}getOptimizationLabel(){let t=this.optimizationType();if(!t)return"AI Suggestion";switch(t){case"improve-grammar":return"Grammar Improvement";case"summarize":return"Summary";case"expand":return"Expanded Content";case"simplify":return"Simplified Content";case"improve-clarity":return"Clarity Improvement";case"extract-key-points":return"Key Points";default:return"AI Suggestion"}}ngOnInit(){document.body.style.overflow="hidden"}ngOnDestroy(){document.body.style.overflow=""}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=$({type:n,selectors:[["app-ai-review-modal"]],inputs:{originalContent:[1,"originalContent"],optimizedContent:[1,"optimizedContent"],type:[1,"type"],optimizationType:[1,"optimizationType"]},outputs:{confirm:"confirm",cancel:"cancel"},decls:40,vars:16,consts:[[1,"modal-overlay",3,"click"],[1,"modal-container",3,"click"],[1,"modal-header"],[1,"modal-title"],["name","sparkles",1,"ai-icon",3,"size"],[1,"close-btn",3,"click"],["name","close",3,"size"],[1,"modal-content"],[1,"mobile-tabs"],[1,"tab-btn",3,"click"],[1,"badge-dot"],[1,"comparison-view"],[1,"comparison-column","original"],[1,"column-header"],[1,"label"],[1,"content-box"],[1,"tags-list"],[1,"text-content"],[1,"divider"],["name","arrow-right",3,"size"],[1,"comparison-column","suggested"],[1,"badge"],[1,"modal-footer"],[1,"btn","btn-secondary",3,"click"],[1,"btn","btn-primary",3,"click"],["name","save",3,"size"],[1,"tag"],[1,"empty-text"],[1,"tag","new"]],template:function(e,o){e&1&&(a(0,"div",0),m("click",function(){return o.cancel.emit()}),a(1,"div",1),m("click",function(r){return r.stopPropagation()}),a(2,"header",2)(3,"h2",3),C(4,"app-icon",4),d(5),s(),a(6,"button",5),m("click",function(){return o.cancel.emit()}),C(7,"app-icon",6),s()(),a(8,"div",7)(9,"div",8)(10,"button",9),m("click",function(){return o.activeTab.set("original")}),d(11," Original "),s(),a(12,"button",9),m("click",function(){return o.activeTab.set("suggested")}),d(13," Suggested "),C(14,"span",10),s()(),a(15,"div",11)(16,"div",12)(17,"div",13)(18,"span",14),d(19,"Original"),s()(),a(20,"div",15),y(21,Dt,4,1,"div",16)(22,Rt,2,1,"div",17),s()(),a(23,"div",18),C(24,"app-icon",19),s(),a(25,"div",20)(26,"div",13)(27,"span",14),d(28),s(),a(29,"span",21),d(30,"AI"),s()(),a(31,"div",15),y(32,Vt,3,0,"div",16)(33,Ut,2,1,"div",17),s()()()(),a(34,"footer",22)(35,"button",23),m("click",function(){return o.cancel.emit()}),d(36,"Discard"),s(),a(37,"button",24),m("click",function(){return o.confirm.emit()}),C(38,"app-icon",25),d(39," Apply Changes "),s()()()()),e&2&&(c(4),f("size",24),c(),K(" ",o.getTitle()," "),c(2),f("size",20),c(3),D("active",o.activeTab()==="original"),c(2),D("active",o.activeTab()==="suggested"),c(4),D("hidden-mobile",o.activeTab()!=="original"),c(5),w(o.type()==="tags"?21:22),c(3),f("size",24),c(),D("hidden-mobile",o.activeTab()!=="suggested"),c(3),z(o.getOptimizationLabel()),c(4),w(o.type()==="tags"?32:33),c(6),f("size",18))},dependencies:[q,Z],styles:[".modal-overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background-color:#0009;-webkit-backdrop-filter:blur(4px);backdrop-filter:blur(4px);z-index:1000;display:flex;align-items:center;justify-content:center;padding:1rem;animation:_ngcontent-%COMP%_fadeIn .2s ease-out}@media (max-width: 768px){.modal-overlay[_ngcontent-%COMP%]{padding:0;align-items:flex-end}}.modal-container[_ngcontent-%COMP%]{background-color:var(--bg-card);border-radius:16px;box-shadow:0 10px 40px #0003;width:100%;max-width:900px;max-height:90vh;display:flex;flex-direction:column;animation:_ngcontent-%COMP%_slideUp .3s cubic-bezier(.16,1,.3,1);border:1px solid var(--border-color)}@media (max-width: 768px){.modal-container[_ngcontent-%COMP%]{width:100%;height:100%;max-height:100%;max-width:100%;border-radius:0;border:none}}.modal-header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;padding:1.25rem 1.5rem;border-bottom:1px solid var(--border-color)}.modal-header[_ngcontent-%COMP%]   .modal-title[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.75rem;font-size:1.25rem;font-weight:600;color:var(--text-primary);margin:0}.modal-header[_ngcontent-%COMP%]   .modal-title[_ngcontent-%COMP%]   .ai-icon[_ngcontent-%COMP%]{color:var(--primary-color)}.modal-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]{background:none;border:none;color:var(--text-secondary);cursor:pointer;padding:.5rem;border-radius:50%;display:flex;align-items:center;justify-content:center;transition:all .2s}.modal-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]:hover{background-color:var(--bg-hover);color:var(--text-primary)}.modal-content[_ngcontent-%COMP%]{flex:1;overflow-y:auto;padding:1.5rem}@media (max-width: 768px){.modal-content[_ngcontent-%COMP%]{padding:1rem;display:flex;flex-direction:column}}.mobile-tabs[_ngcontent-%COMP%]{display:none;background-color:var(--bg-input);padding:.25rem;border-radius:12px;margin-bottom:1rem;border:1px solid var(--border-color)}@media (max-width: 768px){.mobile-tabs[_ngcontent-%COMP%]{display:flex}}.mobile-tabs[_ngcontent-%COMP%]   .tab-btn[_ngcontent-%COMP%]{flex:1;border:none;background:none;padding:.6rem;border-radius:8px;font-weight:600;font-size:.9rem;color:var(--text-secondary);cursor:pointer;transition:all .2s;position:relative;display:flex;align-items:center;justify-content:center;gap:.5rem}.mobile-tabs[_ngcontent-%COMP%]   .tab-btn.active[_ngcontent-%COMP%]{background-color:var(--bg-card);color:var(--text-primary);box-shadow:0 2px 8px #0000001a}.mobile-tabs[_ngcontent-%COMP%]   .tab-btn[_ngcontent-%COMP%]   .badge-dot[_ngcontent-%COMP%]{width:6px;height:6px;background-color:var(--primary-color);border-radius:50%}.comparison-view[_ngcontent-%COMP%]{display:flex;gap:1.5rem;align-items:stretch}@media (max-width: 768px){.comparison-view[_ngcontent-%COMP%]{flex-direction:column;gap:0;flex:1}}.comparison-column[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column;gap:.75rem;min-width:0}.comparison-column.suggested[_ngcontent-%COMP%]   .content-box[_ngcontent-%COMP%]{border-color:var(--primary-color);background-color:color-mix(in srgb,var(--primary-color) 5%,var(--bg-card))}.comparison-column.suggested[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{color:var(--primary-color)}@media (max-width: 768px){.comparison-column.hidden-mobile[_ngcontent-%COMP%]{display:none}}.column-header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between}.column-header[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{font-weight:600;font-size:.9rem;color:var(--text-secondary);text-transform:uppercase;letter-spacing:.5px}.column-header[_ngcontent-%COMP%]   .badge[_ngcontent-%COMP%]{background:linear-gradient(135deg,var(--primary-color),var(--secondary-color));color:#fff;font-size:.7rem;font-weight:700;padding:.2rem .5rem;border-radius:12px}.content-box[_ngcontent-%COMP%]{flex:1;background-color:var(--bg-input);border:1px solid var(--border-color);border-radius:12px;padding:1.25rem;min-height:200px;max-height:500px;overflow-y:auto;font-size:1rem;line-height:1.6;white-space:pre-wrap;color:var(--text-primary)}.content-box[_ngcontent-%COMP%]   .text-content[_ngcontent-%COMP%]{word-break:break-word}.content-box[_ngcontent-%COMP%]   .empty-text[_ngcontent-%COMP%]{color:var(--text-tertiary);font-style:italic}.divider[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;color:var(--text-tertiary);padding:.5rem 0}@media (max-width: 768px){.divider[_ngcontent-%COMP%]{display:none}}.tags-list[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:.5rem}.tags-list[_ngcontent-%COMP%]   .tag[_ngcontent-%COMP%]{background-color:var(--bg-hover);color:var(--text-primary);padding:.35rem .75rem;border-radius:16px;font-size:.9rem;border:1px solid var(--border-color)}.tags-list[_ngcontent-%COMP%]   .tag.new[_ngcontent-%COMP%]{background-color:color-mix(in srgb,var(--primary-color) 15%,transparent);border-color:color-mix(in srgb,var(--primary-color) 30%,transparent);color:var(--primary-color)}.modal-footer[_ngcontent-%COMP%]{padding:1.25rem 1.5rem;border-top:1px solid var(--border-color);display:flex;justify-content:flex-end;gap:1rem;background-color:var(--bg-card);border-radius:0 0 16px 16px}@media (max-width: 768px){.modal-footer[_ngcontent-%COMP%]{border-radius:0;padding:1rem;background-color:var(--bg-card);box-shadow:0 -4px 12px #0000000d}}.btn[_ngcontent-%COMP%]{padding:.6rem 1.2rem;border-radius:10px;font-weight:600;font-size:.95rem;cursor:pointer;transition:all .2s;display:flex;align-items:center;gap:.5rem;border:none}.btn.btn-secondary[_ngcontent-%COMP%]{background-color:var(--bg-hover);color:var(--text-primary)}.btn.btn-secondary[_ngcontent-%COMP%]:hover{background-color:var(--border-color)}.btn.btn-primary[_ngcontent-%COMP%]{background:linear-gradient(135deg,var(--primary-color),var(--secondary-color));color:#fff;box-shadow:0 4px 12px rgba(var(--primary-rgb),.3)}.btn.btn-primary[_ngcontent-%COMP%]:hover{transform:translateY(-1px);box-shadow:0 6px 16px rgba(var(--primary-rgb),.4)}.btn.btn-primary[_ngcontent-%COMP%]:active{transform:translateY(0)}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0}to{opacity:1}}@keyframes _ngcontent-%COMP%_slideUp{0%{opacity:0;transform:translateY(20px) scale(.98)}to{opacity:1;transform:translateY(0) scale(1)}}"]})};var Kt=(n,t)=>t.id;function Gt(n,t){if(n&1){let e=k();a(0,"button",44),m("click",function(){u(e);let i=g();return _(i.deleteNote())}),C(1,"app-icon",45),s()}n&2&&(c(),f("size",20))}function jt(n,t){n&1&&C(0,"app-icon",9),n&2&&f("size",20)}function Ft(n,t){n&1&&C(0,"app-icon",10),n&2&&f("size",20)}function $t(n,t){n&1&&(a(0,"option",16),d(1,"Loading categories..."),s())}function Yt(n,t){if(n&1&&(a(0,"option",46),d(1),s()),n&2){let e=t.$implicit;f("value",e.id),c(),z(e.name)}}function Ht(n,t){if(n&1&&R(0,Yt,2,2,"option",46,Kt),n&2){let e=g();L(e.categories())}}function qt(n,t){if(n&1&&C(0,"div",23),n&2){let e=g();f("innerHTML",e.renderedMarkdown(),Me)}}function Bt(n,t){if(n&1){let e=k();a(0,"textarea",47),m("input",function(i){u(e);let r=g();return _(r.content.set(i.target.value))}),s()}if(n&2){let e=g();f("value",e.content())}}function Zt(n,t){if(n&1){let e=k();a(0,"span",29),d(1),a(2,"button",48),m("click",function(){let i=u(e).$implicit,r=g();return _(r.removeTag(i))}),d(3,"\xD7"),s()()}if(n&2){let e=t.$implicit;c(),K(" ",e," ")}}function Wt(n,t){n&1&&d(0," Uploading... ")}function Xt(n,t){n&1&&d(0," Loading... ")}function Jt(n,t){if(n&1&&(a(0,"div",51),C(1,"div",53),a(2,"span",54),y(3,Wt,1,0)(4,Xt,1,0),s()()),n&2){let e=g().$index,o=g();c(3),w(o.imageUploading()[e]===!0?3:4)}}function Qt(n,t){if(n&1){let e=k();a(0,"div",49)(1,"img",50),m("load",function(i){u(e);let r=g();return _(r.onImageLoad(i))})("error",function(i){u(e);let r=g();return _(r.onImageError(i))})("click",function(){let i=u(e).$index,r=g();return _(r.openImagePreview(i))}),s(),y(2,Jt,5,1,"div",51),a(3,"button",52),m("click",function(i){let r=u(e).$index;return g().removeImage(r),_(i.stopPropagation())}),d(4,"\xD7"),s()()}if(n&2){let e=t.$implicit,o=t.$index,i=g();D("uploading",i.imageUploading()[o]===!0),c(),D("loaded",i.imageLoaded()[o]===!0&&i.imageUploading()[o]!==!0)("loading",i.imageLoaded()[o]!==!0||i.imageUploading()[o]===!0),f("src",e,oe),c(),w(i.imageUploading()[o]===!0||i.imageLoaded()[o]!==!0&&i.imageUploading()[o]!==!0?2:-1)}}function en(n,t){if(n&1&&(a(0,"p",57),d(1),s()),n&2){let e=g().$implicit;c(),z(e.description)}}function tn(n,t){if(n&1){let e=k();a(0,"div",39)(1,"div",55)(2,"a",56),d(3),s(),y(4,en,2,1,"p",57),a(5,"span",58),d(6),s()(),a(7,"button",59),m("click",function(){let i=u(e).$index,r=g();return _(r.removeLink(i))}),d(8,"\xD7"),s()()}if(n&2){let e=t.$implicit;c(2),f("href",e.url,oe),c(),K(" ",e.title," "),c(),w(e.description?4:-1),c(2),z(e.url)}}function nn(n,t){if(n&1){let e=k();a(0,"div",40)(1,"input",60),m("input",function(i){u(e);let r=g();return _(r.linkUrl.set(i.target.value))}),s(),a(2,"input",61),m("input",function(i){u(e);let r=g();return _(r.linkTitle.set(i.target.value))}),s(),a(3,"input",62),m("input",function(i){u(e);let r=g();return _(r.linkDescription.set(i.target.value))}),s(),a(4,"div",63)(5,"button",64),m("click",function(){u(e);let i=g();return _(i.addLink())}),d(6,"Add"),s(),a(7,"button",65),m("click",function(){u(e);let i=g();return _(i.showLinkForm.set(!1))}),d(8,"Cancel"),s()()()}if(n&2){let e=g();c(),f("value",e.linkUrl()),c(),f("value",e.linkTitle()),c(),f("value",e.linkDescription())}}function on(n,t){if(n&1){let e=k();a(0,"button",65),m("click",function(){u(e);let i=g();return _(i.showLinkForm.set(!0))}),C(1,"app-icon",66),a(2,"span"),d(3,"Add Link"),s()()}n&2&&(c(),f("size",18))}function rn(n,t){if(n&1){let e=k();a(0,"button",80),m("click",function(i){return u(e),g(2).resetImageZoom(),_(i.stopPropagation())}),C(1,"app-icon",81),s()}n&2&&(c(),f("size",18))}function an(n,t){if(n&1){let e=k();a(0,"button",82),m("click",function(i){return u(e),g(2).previousImage(),_(i.stopPropagation())}),C(1,"app-icon",4),s(),a(2,"button",83),m("click",function(i){return u(e),g(2).nextImage(),_(i.stopPropagation())}),C(3,"app-icon",84),s()}if(n&2){let e=g(2);f("disabled",e.previewImageIndex()===0),c(),f("size",24),c(),f("disabled",e.previewImageIndex()===e.images().length-1),c(),f("size",24)}}function sn(n,t){if(n&1&&(a(0,"div",79),d(1),s()),n&2){let e=g(2);c(),ye(" ",e.previewImageIndex()+1," / ",e.images().length," ")}}function cn(n,t){if(n&1){let e=k();a(0,"div",67),m("click",function(){u(e);let i=g();return _(i.closeImagePreview())}),a(1,"div",68),m("click",function(i){return u(e),_(i.stopPropagation())}),a(2,"button",69),m("click",function(){u(e);let i=g();return _(i.closeImagePreview())}),C(3,"app-icon",70),s(),a(4,"div",71)(5,"button",72),m("click",function(i){return u(e),g().zoomOut(),_(i.stopPropagation())}),a(6,"span",73),d(7,"\u2212"),s()(),a(8,"span",74),d(9),s(),a(10,"button",75),m("click",function(i){return u(e),g().zoomIn(),_(i.stopPropagation())}),a(11,"span",73),d(12,"+"),s()(),y(13,rn,2,1,"button",76),s(),y(14,an,4,4),a(15,"div",77),m("wheel",function(i){u(e);let r=g();return _(r.onImageWheel(i))})("mousedown",function(i){u(e);let r=g();return _(r.onImageMouseDown(i))})("mousemove",function(i){u(e);let r=g();return _(r.onImageMouseMove(i))})("mouseup",function(){u(e);let i=g();return _(i.onImageMouseUp())})("mouseleave",function(){u(e);let i=g();return _(i.onImageMouseUp())})("touchstart",function(i){u(e);let r=g();return _(r.onImageTouchStart(i))})("touchmove",function(i){u(e);let r=g();return _(r.onImageTouchMove(i))})("touchend",function(i){u(e);let r=g();return _(r.onImageTouchEnd(i))})("touchcancel",function(i){u(e);let r=g();return _(r.onImageTouchEnd(i))}),C(16,"img",78),s(),y(17,sn,2,2,"div",79),s()()}if(n&2){let e=g();c(3),f("size",24),c(2),f("disabled",e.imageZoom()<=1),c(4),K("",e.Math.round(e.imageZoom()*100),"%"),c(),f("disabled",e.imageZoom()>=5),c(3),w(e.imageZoom()>1?13:-1),c(),w(e.images().length>1?14:-1),c(),fe("cursor",e.imageZoom()>1?e.isDragging()?"grabbing":"grab":"default"),c(),fe("transform","scale("+e.imageZoom()+") translate("+e.imagePosition().x+"px, "+e.imagePosition().y+"px)")("transition",e.isDragging()?"none":"transform 0.2s ease"),f("src",e.images()[e.previewImageIndex()],oe),c(),w(e.images().length>1?17:-1)}}function ln(n,t){if(n&1){let e=k();a(0,"app-ai-review-modal",85),m("confirm",function(){u(e);let i=g();return _(i.applyOptimization())})("cancel",function(){u(e);let i=g();return _(i.closeAiReview())}),s()}if(n&2){let e=g();f("originalContent",e.reviewOriginalContent())("optimizedContent",e.reviewOptimizedContent())("type",e.reviewType())}}var We=class n{route=A(we);router=A(re);store=A(ke);authService=A(B);notesService=A(Pe);title=h("");content=h("");categoryId=h("");tags=h([]);images=h([]);links=h([]);tagInput=h("");linkUrl=h("");linkTitle=h("");linkDescription=h("");showLinkForm=h(!1);isSaving=h(!1);showMarkdownPreview=h(!1);renderedMarkdown=h("");imageLoaded=h({});imageUploading=h({});previewImageIndex=h(null);keyDownHandler=this.handleKeyDown.bind(this);imageZoom=h(1);imagePosition=h({x:0,y:0});isDragging=h(!1);dragStart=h(null);touchStartDistance=h(null);touchStartZoom=h(1);showAiReview=h(!1);pendingOptimizationResult=h(null);pendingOptimizationType=h(null);reviewOriginalContent=h("");reviewOptimizedContent=h("");reviewType=h("content");noteId=h(null);isEditMode=J(()=>this.noteId()!==null);categories=this.store.selectSignal(Re);allNotes=this.store.selectSignal(De);constructor(){Y(()=>{let t=this.noteId(),e=this.allNotes();t&&e.length>0&&this.loadNote(t)}),Y(()=>{let t=this.categories(),e=this.categoryId();if(!this.isEditMode()&&t.length>0&&!e){let o=t[0];o&&this.categoryId.set(o.id)}}),Y(()=>{let t=this.content();t?(he.setOptions({breaks:!0,gfm:!0}),this.renderedMarkdown.set(he.parse(t))):this.renderedMarkdown.set("")})}ngOnInit(){let t=this.authService.currentUser()?.email||null;this.notesService.loadFromStorage(t),this.store.dispatch(Q.loadNotes()),this.store.dispatch(Ee.loadCategories()),document.addEventListener("keydown",this.keyDownHandler),this.route.paramMap.subscribe(e=>{let o=e.get("id");if(o&&o!=="new")this.noteId.set(o),this.allNotes().length>0&&this.loadNote(o);else{this.noteId.set(null),this.title.set(""),this.content.set(""),this.tags.set([]),this.images.set([]),this.links.set([]);let i=this.categories();i.length>0&&this.categoryId.set(i[0].id)}})}loadNote(t){let o=this.allNotes().find(i=>i.id===t);if(o){this.title.set(o.title),this.content.set(o.content),this.categoryId.set(o.categoryId),this.tags.set(o.tags||[]);let i=o.images||[];this.images.set(i),this.imageUploading.set({});let r={};i.forEach((l,p)=>{l.startsWith("data:")?r[p]=!0:r[p]=!1}),this.imageLoaded.set(r),i.length>0&&setTimeout(()=>{let l=this.images(),p=T({},this.imageLoaded());l.forEach((b,E)=>{b.startsWith("data:")&&(p[E]=!0)}),this.imageLoaded.set(p)},100),this.links.set(o.links||[])}else console.warn(`Note with id ${t} not found`)}onImageUpload(t){let e=t.target;if(e.files&&e.files.length>0){let o=e.files[0];if(o.type.startsWith("image/")){let r=o.size/1048576;if(r>10&&!confirm(`Image is ${r.toFixed(2)}MB. Large images may affect performance. Continue with 100% quality?`)){e.value="";return}let p=this.images().length,b="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCIgZmlsbD0iI2YzZjRmNiIvPjx0ZXh0IHg9IjUwJSIgeT0iNTAlIiBmb250LWZhbWlseT0iQXJpYWwiIGZvbnQtc2l6ZT0iMTQiIGZpbGw9IiM5Y2EzYWYiIHRleHQtYW5jaG9yPSJtaWRkbGUiIGR5PSIuM2VtIj5VcGxvYWRpbmcuLi48L3RleHQ+PC9zdmc+";this.images.update(P=>[...P,b]),this.imageUploading.update(P=>U(T({},P),{[p]:!0})),this.imageLoaded.update(P=>U(T({},P),{[p]:!1}));let E=o.type==="image/png"||o.type==="image/webp"||o.type==="image/gif"||o.type==="image/bmp",I=new FileReader;I.onload=P=>{let v=P.target?.result;if(!v||!v.startsWith("data:image/")){console.error("Invalid image data"),this.images.update(x=>x.filter((O,N)=>N!==p)),this.imageUploading.update(x=>{let O=T({},x);return delete O[p],O}),alert("Failed to process image. Please try again.");return}this.images.update(x=>{let O=[...x];return O[p]=v,O}),this.imageUploading.update(x=>{let O=T({},x);return delete O[p],O}),setTimeout(()=>{this.imageLoaded.update(x=>U(T({},x),{[p]:!0}))},100),console.log("Image uploaded at 100% quality:",{type:o.type,size:`${r.toFixed(2)}MB`,lossless:E,base64Length:`${(v.length/1024).toFixed(2)}KB`})},I.onerror=()=>{console.error("Error reading image file"),this.images.update(P=>P.filter((v,x)=>x!==p)),this.imageUploading.update(P=>{let v=T({},P);return delete v[p],v}),alert("Failed to read image file. Please try again.")},I.readAsDataURL(o)}else alert("Please select a valid image file."),e.value=""}e.value=""}removeImage(t){this.images.update(i=>i.filter((r,l)=>l!==t));let e=T({},this.imageLoaded());delete e[t],this.imageLoaded.set(e);let o=T({},this.imageUploading());delete o[t],this.imageUploading.set(o),this.previewImageIndex()===t&&this.previewImageIndex.set(null)}openImagePreview(t){this.previewImageIndex.set(t),this.imageZoom.set(1),this.imagePosition.set({x:0,y:0})}closeImagePreview(){this.previewImageIndex.set(null),this.imageZoom.set(1),this.imagePosition.set({x:0,y:0})}nextImage(){let t=this.previewImageIndex();t!==null&&t<this.images().length-1&&(this.previewImageIndex.set(t+1),this.imageZoom.set(1),this.imagePosition.set({x:0,y:0}))}previousImage(){let t=this.previewImageIndex();t!==null&&t>0&&(this.previewImageIndex.set(t-1),this.imageZoom.set(1),this.imagePosition.set({x:0,y:0}))}onImageWheel(t){if(this.previewImageIndex()===null)return;t.preventDefault();let e=t.deltaY>0?-.1:.1,o=Math.max(1,Math.min(5,this.imageZoom()+e));this.imageZoom.set(o),o===1&&this.imagePosition.set({x:0,y:0})}onImageMouseDown(t){this.imageZoom()<=1||(this.isDragging.set(!0),this.dragStart.set({x:t.clientX-this.imagePosition().x,y:t.clientY-this.imagePosition().y}))}onImageMouseMove(t){if(!this.isDragging()||!this.dragStart())return;let e=t.clientX-this.dragStart().x,o=t.clientY-this.dragStart().y;this.imagePosition.set({x:e,y:o})}onImageMouseUp(){this.isDragging.set(!1),this.dragStart.set(null)}resetImageZoom(){this.imageZoom.set(1),this.imagePosition.set({x:0,y:0})}zoomIn(){let t=Math.min(5,this.imageZoom()+.5);this.imageZoom.set(t)}zoomOut(){let t=Math.max(1,this.imageZoom()-.5);this.imageZoom.set(t),t===1&&this.imagePosition.set({x:0,y:0})}getTouchDistance(t,e){let o=e.clientX-t.clientX,i=e.clientY-t.clientY;return Math.sqrt(o*o+i*i)}onImageTouchStart(t){if(t.touches.length===2){let e=this.getTouchDistance(t.touches[0],t.touches[1]);this.touchStartDistance.set(e),this.touchStartZoom.set(this.imageZoom()),t.preventDefault()}else if(t.touches.length===1&&this.imageZoom()>1){let e=t.touches[0];this.isDragging.set(!0),this.dragStart.set({x:e.clientX-this.imagePosition().x,y:e.clientY-this.imagePosition().y})}}onImageTouchMove(t){if(t.touches.length===2&&this.touchStartDistance()!==null){let o=this.getTouchDistance(t.touches[0],t.touches[1])/this.touchStartDistance(),i=Math.max(1,Math.min(5,this.touchStartZoom()*o));this.imageZoom.set(i),t.preventDefault()}else if(t.touches.length===1&&this.isDragging()&&this.dragStart()){let e=t.touches[0],o=e.clientX-this.dragStart().x,i=e.clientY-this.dragStart().y;this.imagePosition.set({x:o,y:i}),t.preventDefault()}}onImageTouchEnd(t){t.touches.length<2&&this.touchStartDistance.set(null),t.touches.length===0&&(this.isDragging.set(!1),this.dragStart.set(null))}onImageLoad(t){let e=t.target,o=this.images(),i=-1;for(let r=0;r<o.length;r++){let l=o[r];if(l.startsWith("data:")){if(e.src===l||e.src.includes(l.substring(0,50))){i=r;break}}else if(e.src===l||e.src.endsWith(l)){i=r;break}}i!==-1&&this.imageLoaded.update(r=>U(T({},r),{[i]:!0}))}onImageError(t){let e=t.target,o=this.images(),i=-1;for(let r=0;r<o.length;r++){let l=o[r];if(e.src===l||e.src.includes(l.substring(0,50))){i=r;break}}i!==-1&&(e.style.opacity="0",e.style.display="none",this.imageLoaded.update(r=>{let l=T({},r);return delete l[i],l}))}addTag(){let t=this.tagInput().trim();t&&!this.tags().includes(t)&&(this.tags.update(e=>[...e,t]),this.tagInput.set(""))}removeTag(t){this.tags.update(e=>e.filter(o=>o!==t))}addLink(){let t=this.linkUrl().trim(),e=this.linkTitle().trim()||t;if(t){let o={url:t,title:e,description:this.linkDescription().trim()||void 0};this.links.update(i=>[...i,o]),this.linkUrl.set(""),this.linkTitle.set(""),this.linkDescription.set(""),this.showLinkForm.set(!1)}}removeLink(t){this.links.update(e=>e.filter((o,i)=>i!==t))}saveNote(){if(!this.title().trim()&&!this.content().trim())return;if(!this.categoryId()||this.categoryId().trim()===""){let e=this.categories()[0];if(e)this.categoryId.set(e.id);else{console.error("No category available. Please create a category first.");return}}this.isSaving.set(!0);let t={title:this.title().trim()||"Untitled Note",content:this.content().trim(),categoryId:this.categoryId(),tags:this.tags().length>0?this.tags():void 0,images:this.images().length>0?this.images():void 0,links:this.links().length>0?this.links():void 0};if(this.isEditMode()){let e=this.noteId();if(!e){console.error("Note ID is missing"),this.isSaving.set(!1);return}this.store.dispatch(Q.updateNote({id:e,updates:t}))}else this.store.dispatch(Q.createNote({note:t}));setTimeout(()=>{this.isSaving.set(!1),this.router.navigate(["/"])},300)}deleteNote(){this.noteId()&&confirm("Are you sure you want to delete this note?")&&(this.store.dispatch(Q.deleteNote({id:this.noteId()})),this.router.navigate(["/"]))}cancel(){this.router.navigate(["/"])}handleKeyDown(t){if(this.previewImageIndex()!==null)switch(t.key){case"Escape":this.closeImagePreview();break;case"ArrowRight":t.preventDefault(),this.imageZoom()>1?this.imagePosition.update(e=>U(T({},e),{x:e.x-50})):this.nextImage();break;case"ArrowLeft":t.preventDefault(),this.imageZoom()>1?this.imagePosition.update(e=>U(T({},e),{x:e.x+50})):this.previousImage();break;case"ArrowUp":t.preventDefault(),this.imageZoom()>1&&this.imagePosition.update(e=>U(T({},e),{y:e.y+50}));break;case"ArrowDown":t.preventDefault(),this.imageZoom()>1&&this.imagePosition.update(e=>U(T({},e),{y:e.y-50}));break;case"+":case"=":t.preventDefault(),this.zoomIn();break;case"-":case"_":t.preventDefault(),this.zoomOut();break;case"0":t.preventDefault(),this.resetImageZoom();break}}Math=Math;toggleMarkdownPreview(){this.showMarkdownPreview.update(t=>!t)}onAiOptimized(t){this.pendingOptimizationResult.set(t),t.title?(this.reviewType.set("title"),this.reviewOriginalContent.set(this.title()),this.reviewOptimizedContent.set(t.title),this.showAiReview.set(!0)):t.tags?(this.reviewType.set("tags"),this.reviewOriginalContent.set(this.tags().join(", ")),this.reviewOptimizedContent.set(t.tags.join(", ")),this.showAiReview.set(!0)):t.content&&(this.reviewType.set("content"),this.reviewOriginalContent.set(this.content()),this.reviewOptimizedContent.set(t.content),this.showAiReview.set(!0))}applyOptimization(){let t=this.pendingOptimizationResult();if(t){if(t.content&&t.content!==this.content()&&this.content.set(t.content),t.title&&t.title!==this.title()&&this.title.set(t.title),t.tags&&t.tags.length>0){let e=this.tags(),o=t.tags.filter(i=>!e.includes(i));o.length>0&&this.tags.update(i=>[...i,...o])}this.closeAiReview()}}closeAiReview(){this.showAiReview.set(!1),this.pendingOptimizationResult.set(null)}onAiError(t){alert(`AI Optimization Error: ${t}`)}ngOnDestroy(){document.removeEventListener("keydown",this.keyDownHandler)}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=$({type:n,selectors:[["app-note-editor"]],decls:66,vars:21,consts:[[1,"note-editor"],[1,"editor-container"],[1,"editor-header"],["aria-label","Back",1,"icon-btn","back-btn",3,"click"],["name","back",3,"size"],[1,"editor-title"],[1,"header-actions"],["aria-label","Delete",1,"icon-btn","danger-btn"],["aria-label","Save",1,"icon-btn","save-btn",3,"click","disabled"],["name","sync-loading",3,"size"],["name","save",3,"size"],[1,"editor-content",3,"submit"],[1,"title-input-wrapper"],["type","text","name","note-title","id","note-title","placeholder","Note Title","autocomplete","off","data-form-type","other","data-lpignore","true","data-1p-ignore","true","data-bwignore","true","aria-label","Note title",1,"note-title-input",3,"input","value"],[1,"form-group"],["name","note-category","id","note-category","autocomplete","off","data-form-type","other","data-lpignore","true","data-1p-ignore","true","data-bwignore","true","aria-label","Note category",1,"form-select",3,"change","value","disabled"],["value",""],[1,"content-input-wrapper"],[1,"content-header"],[1,"content-actions"],[3,"optimized","error","content","title"],["type","button","aria-label","Toggle markdown preview",1,"preview-toggle-btn",3,"click"],["name","eye",3,"size"],[1,"markdown-preview",3,"innerHTML"],["name","note-content","id","note-content","placeholder","Start writing... (Markdown supported)","rows","8","autocomplete","off","data-form-type","other","data-lpignore","true","data-1p-ignore","true","data-bwignore","true","role","textbox","aria-label","Note content",1,"note-content-input",3,"value"],[1,"form-section"],[1,"tags-section-header"],[1,"tags-container"],[1,"tags-list"],[1,"tag"],[1,"tag-input-group"],["type","text","name","tag-input","id","tag-input","placeholder","Add tag","autocomplete","off","data-form-type","other","data-lpignore","true","data-1p-ignore","true","data-bwignore","true","aria-label","Add tag",1,"tag-input",3,"input","keyup.enter","value"],[1,"btn","btn-small",3,"click"],[1,"images-container"],[1,"image-preview",3,"uploading"],[1,"image-upload-btn"],["type","file","accept","image/*",2,"display","none",3,"change"],["name","image",3,"size"],[1,"links-container"],[1,"link-item"],[1,"link-form"],["type","button",1,"btn","btn-secondary"],[1,"image-preview-modal"],[3,"originalContent","optimizedContent","type"],["aria-label","Delete",1,"icon-btn","danger-btn",3,"click"],["name","delete",3,"size"],[3,"value"],["name","note-content","id","note-content","placeholder","Start writing... (Markdown supported)","rows","8","autocomplete","off","data-form-type","other","data-lpignore","true","data-1p-ignore","true","data-bwignore","true","role","textbox","aria-label","Note content",1,"note-content-input",3,"input","value"],[1,"tag-remove",3,"click"],[1,"image-preview"],["alt","Note image","loading","eager",2,"cursor","pointer",3,"load","error","click","src"],[1,"image-loading"],["aria-label","Remove image",1,"image-remove",3,"click"],[1,"loading-spinner"],[1,"loading-text"],[1,"link-content"],["target","_blank",1,"link-title",3,"href"],[1,"link-description"],[1,"link-url"],[1,"link-remove",3,"click"],["type","url","name","link-url","id","link-url","placeholder","URL","autocomplete","off","data-form-type","other","data-lpignore","true","data-1p-ignore","true","data-bwignore","true","aria-label","Link URL",1,"form-input",3,"input","value"],["type","text","name","link-title","id","link-title","placeholder","Title (optional)","autocomplete","off","data-form-type","other","data-lpignore","true","data-1p-ignore","true","data-bwignore","true","aria-label","Link title",1,"form-input",3,"input","value"],["type","text","name","link-description","id","link-description","placeholder","Description (optional)","autocomplete","off","data-form-type","other","data-lpignore","true","data-1p-ignore","true","data-bwignore","true","aria-label","Link description",1,"form-input",3,"input","value"],[1,"link-form-actions"],["type","button",1,"btn","btn-primary",3,"click"],["type","button",1,"btn","btn-secondary",3,"click"],["name","link",3,"size"],[1,"image-preview-modal",3,"click"],[1,"modal-content",3,"click"],["aria-label","Close preview",1,"modal-close",3,"click"],["name","close",3,"size"],[1,"zoom-controls"],["aria-label","Zoom out",1,"zoom-btn",3,"click","disabled"],[2,"font-size","18px","color","white","font-weight","bold"],[1,"zoom-level"],["aria-label","Zoom in",1,"zoom-btn",3,"click","disabled"],["aria-label","Reset zoom",1,"zoom-btn","reset-btn"],[1,"image-container",3,"wheel","mousedown","mousemove","mouseup","mouseleave","touchstart","touchmove","touchend","touchcancel"],["alt","Preview image","loading","eager","draggable","false","decoding","async","fetchpriority","high",1,"preview-image",3,"src"],[1,"image-counter"],["aria-label","Reset zoom",1,"zoom-btn","reset-btn",3,"click"],["name","sync",3,"size"],["aria-label","Previous image",1,"modal-nav","modal-nav-prev",3,"click","disabled"],["aria-label","Next image",1,"modal-nav","modal-nav-next",3,"click","disabled"],["name","back",2,"transform","rotate(180deg)",3,"size"],[3,"confirm","cancel","originalContent","optimizedContent","type"]],template:function(e,o){e&1&&(a(0,"div",0)(1,"div",1)(2,"header",2)(3,"button",3),m("click",function(){return o.cancel()}),C(4,"app-icon",4),s(),a(5,"h2",5),d(6),s(),a(7,"div",6),C(8,"app-theme-toggle"),y(9,Gt,2,1,"button",7),a(10,"button",8),m("click",function(){return o.saveNote()}),y(11,jt,1,1,"app-icon",9)(12,Ft,1,1,"app-icon",10),s()()(),a(13,"form",11),m("submit",function(r){return r.preventDefault()}),a(14,"div",12)(15,"input",13),m("input",function(r){return o.title.set(r.target.value)}),s()(),a(16,"div",14)(17,"select",15),m("change",function(r){return o.categoryId.set(r.target.value)}),y(18,$t,2,0,"option",16)(19,Ht,2,0),s()(),a(20,"div",17)(21,"div",18)(22,"label"),d(23,"Content"),s(),a(24,"div",19)(25,"app-ai-optimization-dropdown",20),m("optimized",function(r){return o.onAiOptimized(r)})("error",function(r){return o.onAiError(r)}),s(),a(26,"button",21),m("click",function(){return o.toggleMarkdownPreview()}),C(27,"app-icon",22),a(28,"span"),d(29),s()()()(),y(30,qt,1,1,"div",23)(31,Bt,1,1,"textarea",24),s(),a(32,"div",25)(33,"div",26)(34,"label"),d(35,"Tags"),s()(),a(36,"div",27)(37,"div",28),R(38,Zt,4,1,"span",29,X),s(),a(40,"div",30)(41,"input",31),m("input",function(r){return o.tagInput.set(r.target.value)})("keyup.enter",function(r){return o.addTag(),r.preventDefault()}),s(),a(42,"button",32),m("click",function(){return o.addTag()}),d(43,"Add"),s()()()(),a(44,"div",25)(45,"label"),d(46,"Images"),s(),a(47,"div",33),R(48,Qt,5,8,"div",34,_e),a(50,"label",35)(51,"input",36),m("change",function(r){return o.onImageUpload(r)}),s(),C(52,"app-icon",37),a(53,"span"),d(54,"Add"),s()()()(),a(55,"div",25)(56,"label"),d(57,"Links"),s(),a(58,"div",38),R(59,tn,9,4,"div",39,_e),y(61,nn,9,3,"div",40)(62,on,4,1,"button",41),s()()()(),y(63,cn,18,14,"div",42),C(64,"app-bottom-nav"),y(65,ln,1,3,"app-ai-review-modal",43),s()),e&2&&(c(4),f("size",20),c(2),z(o.isEditMode()?"Edit Note":"New Note"),c(3),w(o.isEditMode()?9:-1),c(),f("disabled",o.isSaving()),c(),w(o.isSaving()?11:12),c(4),f("value",o.title()),c(2),f("value",o.categoryId())("disabled",o.categories().length===0),c(),w(o.categories().length===0?18:19),c(7),f("content",o.content())("title",o.title()),c(),D("active",o.showMarkdownPreview()),c(),f("size",18),c(2),z(o.showMarkdownPreview()?"Edit":"Preview"),c(),w(o.showMarkdownPreview()?30:31),c(8),L(o.tags()),c(3),f("value",o.tagInput()),c(7),L(o.images()),c(4),f("size",20),c(7),L(o.links()),c(2),w(o.showLinkForm()?61:62),c(2),w(o.previewImageIndex()!==null?63:-1),c(2),w(o.showAiReview()?65:-1))},dependencies:[q,Ae,Te,ze,Ne,Ie,Se,Le,Ve,Z,me,ue],styles:['.note-editor[_ngcontent-%COMP%]{min-height:100vh;background:var(--bg-primary);padding-bottom:env(safe-area-inset-bottom);transition:background-color .3s ease}.editor-container[_ngcontent-%COMP%]{max-width:100%;margin:0 auto;background:var(--bg-elevated);min-height:100vh;border:none;box-shadow:none}@media (min-width: 768px){.editor-container[_ngcontent-%COMP%]{max-width:800px;border-radius:var(--radius-lg);margin:2rem auto;box-shadow:var(--shadow-lg);min-height:calc(100vh - 4rem)}}@media (min-width: 1024px){.editor-container[_ngcontent-%COMP%]{max-width:900px}}.editor-header[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem;padding:1rem;border-bottom:1px solid var(--border-color);background:var(--bg-elevated);position:sticky;top:0;z-index:10;backdrop-filter:blur(20px);-webkit-backdrop-filter:blur(20px);box-shadow:var(--shadow-sm);transition:background-color .3s ease,border-color .3s ease}.editor-header[_ngcontent-%COMP%]   .back-btn[_ngcontent-%COMP%]{background:var(--bg-secondary);border:1px solid var(--border-color);border-radius:12px;width:44px;height:44px;min-width:44px;min-height:44px;display:flex;align-items:center;justify-content:center;cursor:pointer;color:var(--text-primary);transition:all .2s cubic-bezier(.4,0,.2,1);flex-shrink:0;touch-action:manipulation;-webkit-tap-highlight-color:transparent}.editor-header[_ngcontent-%COMP%]   .back-btn[_ngcontent-%COMP%]   app-icon[_ngcontent-%COMP%]{color:var(--text-primary);transition:transform .2s ease}.editor-header[_ngcontent-%COMP%]   .back-btn[_ngcontent-%COMP%]:active{transform:scale(.92);background:var(--bg-hover)}.editor-header[_ngcontent-%COMP%]   .back-btn[_ngcontent-%COMP%]:active   app-icon[_ngcontent-%COMP%]{transform:translate(-2px)}@media (max-width: 640px){.editor-header[_ngcontent-%COMP%]   .back-btn[_ngcontent-%COMP%]{width:48px;height:48px;min-width:48px;min-height:48px}}.editor-header[_ngcontent-%COMP%]   .editor-title[_ngcontent-%COMP%]{flex:1;margin:0;font-size:1.125rem;font-weight:600;color:var(--text-primary)}.editor-header[_ngcontent-%COMP%]   .header-actions[_ngcontent-%COMP%]{display:flex;gap:.5rem;align-items:center}.editor-header[_ngcontent-%COMP%]   .icon-btn[_ngcontent-%COMP%]{background:var(--bg-secondary);border:1px solid var(--border-color);border-radius:12px;width:44px;height:44px;min-width:44px;min-height:44px;display:flex;align-items:center;justify-content:center;cursor:pointer;transition:all .2s cubic-bezier(.4,0,.2,1);padding:0;touch-action:manipulation;-webkit-tap-highlight-color:transparent}.editor-header[_ngcontent-%COMP%]   .icon-btn[_ngcontent-%COMP%]   app-icon[_ngcontent-%COMP%]{color:var(--text-secondary);transition:color .2s ease}.editor-header[_ngcontent-%COMP%]   .icon-btn[_ngcontent-%COMP%]:active:not(:disabled){transform:scale(.92);background:var(--bg-hover)}.editor-header[_ngcontent-%COMP%]   .icon-btn.save-btn[_ngcontent-%COMP%]{background:var(--primary-color);color:var(--text-inverse);border-color:var(--primary-color);box-shadow:var(--shadow-sm)}.editor-header[_ngcontent-%COMP%]   .icon-btn.save-btn[_ngcontent-%COMP%]   app-icon[_ngcontent-%COMP%]{color:var(--text-inverse)}.editor-header[_ngcontent-%COMP%]   .icon-btn.save-btn[_ngcontent-%COMP%]:active:not(:disabled){background:var(--primary-hover);transform:scale(.92);box-shadow:var(--shadow-md)}.editor-header[_ngcontent-%COMP%]   .icon-btn.danger-btn[_ngcontent-%COMP%]{background:var(--error-color);color:var(--text-inverse);border-color:var(--error-color);box-shadow:var(--shadow-sm)}.editor-header[_ngcontent-%COMP%]   .icon-btn.danger-btn[_ngcontent-%COMP%]   app-icon[_ngcontent-%COMP%]{color:var(--text-inverse)}.editor-header[_ngcontent-%COMP%]   .icon-btn.danger-btn[_ngcontent-%COMP%]:active:not(:disabled){background:#dc2626;transform:scale(.92);box-shadow:var(--shadow-md)}.editor-header[_ngcontent-%COMP%]   .icon-btn[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed;transform:none}@media (max-width: 640px){.editor-header[_ngcontent-%COMP%]   .icon-btn[_ngcontent-%COMP%]{width:48px;height:48px;min-width:48px;min-height:48px}}.editor-content[_ngcontent-%COMP%]{padding:1rem;padding-bottom:calc(1rem + env(safe-area-inset-bottom))}@media (max-width: 640px){.editor-content[_ngcontent-%COMP%]{padding:.75rem;padding-bottom:calc(.75rem + env(safe-area-inset-bottom) + 80px)}}@media (min-width: 768px){.editor-content[_ngcontent-%COMP%]{padding:2rem;max-width:100%}}.title-input-wrapper[_ngcontent-%COMP%]{position:relative;display:flex;align-items:center;gap:.5rem;margin-bottom:1rem}.title-input-wrapper[_ngcontent-%COMP%]   .note-title-input[_ngcontent-%COMP%]{flex:1;border:none;outline:none;font-size:1.5rem;font-weight:600;color:var(--text-primary);padding:.5rem 0;background:transparent}@media (max-width: 640px){.title-input-wrapper[_ngcontent-%COMP%]   .note-title-input[_ngcontent-%COMP%]{font-size:1.25rem;font-size:20px;padding:.375rem 0}}.note-title-input[_ngcontent-%COMP%]{width:100%;border:none;outline:none;font-size:1.5rem;font-weight:600;color:var(--text-primary);margin-bottom:1rem;padding:.5rem 0;background:transparent}@media (max-width: 640px){.note-title-input[_ngcontent-%COMP%]{font-size:1.25rem;font-size:20px;padding:.375rem 0}}.note-title-input[_ngcontent-%COMP%]::placeholder{color:var(--text-tertiary)}.form-group[_ngcontent-%COMP%]{margin-bottom:1rem}.form-select[_ngcontent-%COMP%]{width:100%;padding:.75rem;border:1px solid var(--border-color);border-radius:var(--radius-sm);font-size:1rem;background:var(--bg-primary);color:var(--text-primary);cursor:pointer}@media (max-width: 640px){.form-select[_ngcontent-%COMP%]{font-size:16px;padding:.625rem}}.form-select[_ngcontent-%COMP%]:focus{outline:none;border-color:var(--primary-color);box-shadow:0 0 0 3px var(--primary-light)}.content-input-wrapper[_ngcontent-%COMP%]{position:relative;margin-bottom:1.5rem}.content-input-wrapper[_ngcontent-%COMP%]   .content-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:.5rem}.content-input-wrapper[_ngcontent-%COMP%]   .content-header[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:.875rem;font-weight:500;color:var(--text-secondary)}.content-input-wrapper[_ngcontent-%COMP%]   .content-header[_ngcontent-%COMP%]   .content-actions[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem}.content-input-wrapper[_ngcontent-%COMP%]   .content-header[_ngcontent-%COMP%]   .preview-toggle-btn[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;padding:.5rem .75rem;background:var(--bg-secondary);border:1px solid var(--border-color);border-radius:8px;color:var(--text-primary);font-size:.875rem;cursor:pointer;transition:all .2s}.content-input-wrapper[_ngcontent-%COMP%]   .content-header[_ngcontent-%COMP%]   .preview-toggle-btn[_ngcontent-%COMP%]:hover{background:var(--bg-hover);border-color:var(--primary-color)}.content-input-wrapper[_ngcontent-%COMP%]   .content-header[_ngcontent-%COMP%]   .preview-toggle-btn.active[_ngcontent-%COMP%]{background:var(--primary-color);border-color:var(--primary-color);color:#fff}.content-input-wrapper[_ngcontent-%COMP%]   .markdown-preview[_ngcontent-%COMP%]{min-height:200px;padding:1rem;background:var(--bg-primary);border:1px solid var(--border-color);border-radius:8px;color:var(--text-primary);line-height:1.7;font-size:1rem}.content-input-wrapper[_ngcontent-%COMP%]   .markdown-preview[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:deep(h1){font-size:2rem;font-weight:700;margin:1.5rem 0 1rem;color:var(--text-primary)}.content-input-wrapper[_ngcontent-%COMP%]   .markdown-preview[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:deep(h2){font-size:1.5rem;font-weight:600;margin:1.25rem 0 .75rem;color:var(--text-primary)}.content-input-wrapper[_ngcontent-%COMP%]   .markdown-preview[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:deep(h3){font-size:1.25rem;font-weight:600;margin:1rem 0 .5rem;color:var(--text-primary)}.content-input-wrapper[_ngcontent-%COMP%]   .markdown-preview[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:deep(p){margin:.75rem 0}.content-input-wrapper[_ngcontent-%COMP%]   .markdown-preview[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:deep(ul), .content-input-wrapper[_ngcontent-%COMP%]   .markdown-preview[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:deep(ol){margin:.75rem 0;padding-left:1.5rem}.content-input-wrapper[_ngcontent-%COMP%]   .markdown-preview[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:deep(li){margin:.5rem 0}.content-input-wrapper[_ngcontent-%COMP%]   .markdown-preview[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:deep(code){background:var(--bg-secondary);padding:.2rem .4rem;border-radius:4px;font-family:Courier New,monospace;font-size:.9em}.content-input-wrapper[_ngcontent-%COMP%]   .markdown-preview[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:deep(pre){background:var(--bg-secondary);padding:1rem;border-radius:8px;overflow-x:auto;margin:1rem 0}.content-input-wrapper[_ngcontent-%COMP%]   .markdown-preview[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:deep(pre code){background:none;padding:0}.content-input-wrapper[_ngcontent-%COMP%]   .markdown-preview[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:deep(blockquote){border-left:4px solid var(--primary-color);padding-left:1rem;margin:1rem 0;color:var(--text-secondary);font-style:italic}.content-input-wrapper[_ngcontent-%COMP%]   .markdown-preview[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:deep(a){color:var(--primary-color);text-decoration:underline}.content-input-wrapper[_ngcontent-%COMP%]   .markdown-preview[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:deep(strong){font-weight:600}.content-input-wrapper[_ngcontent-%COMP%]   .markdown-preview[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:deep(em){font-style:italic}.content-input-wrapper[_ngcontent-%COMP%]   .note-content-input[_ngcontent-%COMP%]{width:100%;border:1px solid var(--border-color);border-radius:var(--radius-sm);padding:1rem;font-size:1rem;line-height:1.6;color:var(--text-primary);resize:vertical;min-height:200px;font-family:inherit;background:var(--bg-primary)}@media (max-width: 640px){.content-input-wrapper[_ngcontent-%COMP%]   .note-content-input[_ngcontent-%COMP%]{min-height:150px}}.note-content-input[_ngcontent-%COMP%]{width:100%;border:1px solid var(--border-color);border-radius:var(--radius-sm);padding:1rem;font-size:1rem;line-height:1.6;color:var(--text-primary);resize:vertical;min-height:200px;margin-bottom:1.5rem;font-family:inherit;background:var(--bg-primary)}@media (max-width: 640px){.note-content-input[_ngcontent-%COMP%]{min-height:150px;padding:.75rem;font-size:16px}}.note-content-input[_ngcontent-%COMP%]:focus{outline:none;border-color:var(--primary-color);box-shadow:0 0 0 3px var(--primary-light)}.note-content-input[_ngcontent-%COMP%]::placeholder{color:var(--text-tertiary)}.form-section[_ngcontent-%COMP%]{margin-bottom:1.5rem}.form-section[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:.75rem;font-weight:500;color:var(--text-primary);font-size:.875rem}.form-section[_ngcontent-%COMP%]   .tags-section-header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;margin-bottom:.75rem}.form-section[_ngcontent-%COMP%]   .tags-section-header[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{margin-bottom:0}.tags-container[_ngcontent-%COMP%]   .tags-list[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:.5rem;margin-bottom:.75rem}@media (max-width: 640px){.tags-container[_ngcontent-%COMP%]   .tags-list[_ngcontent-%COMP%]{gap:.375rem}}.tags-container[_ngcontent-%COMP%]   .tag[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:.5rem;background:var(--primary-color);color:var(--text-inverse);padding:.5rem .75rem;border-radius:16px;font-size:.875rem;font-weight:500}@media (max-width: 640px){.tags-container[_ngcontent-%COMP%]   .tag[_ngcontent-%COMP%]{padding:.375rem .625rem;font-size:.8125rem}}.tags-container[_ngcontent-%COMP%]   .tag[_ngcontent-%COMP%]   .tag-remove[_ngcontent-%COMP%]{background:none;border:none;color:var(--text-inverse);cursor:pointer;font-size:1.125rem;line-height:1;padding:0;width:18px;height:18px;display:flex;align-items:center;justify-content:center;border-radius:50%}.tags-container[_ngcontent-%COMP%]   .tag[_ngcontent-%COMP%]   .tag-remove[_ngcontent-%COMP%]:active{background:#fff3}.tags-container[_ngcontent-%COMP%]   .tag-input-group[_ngcontent-%COMP%]{display:flex;gap:.5rem}@media (max-width: 640px){.tags-container[_ngcontent-%COMP%]   .tag-input-group[_ngcontent-%COMP%]{flex-direction:column;gap:.5rem}}.tags-container[_ngcontent-%COMP%]   .tag-input-group[_ngcontent-%COMP%]   .tag-input[_ngcontent-%COMP%]{flex:1;padding:.75rem;border:1px solid var(--border-color);border-radius:var(--radius-sm);font-size:1rem;background:var(--bg-primary);color:var(--text-primary)}@media (max-width: 640px){.tags-container[_ngcontent-%COMP%]   .tag-input-group[_ngcontent-%COMP%]   .tag-input[_ngcontent-%COMP%]{font-size:16px;padding:.625rem}}.tags-container[_ngcontent-%COMP%]   .tag-input-group[_ngcontent-%COMP%]   .tag-input[_ngcontent-%COMP%]:focus{outline:none;border-color:var(--primary-color);box-shadow:0 0 0 3px var(--primary-light)}.images-container[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:.75rem}@media (max-width: 640px){.images-container[_ngcontent-%COMP%]{gap:.5rem}}.images-container[_ngcontent-%COMP%]   .image-preview[_ngcontent-%COMP%]{position:relative;width:100px;height:100px;min-width:100px;min-height:100px;border-radius:var(--radius-sm);overflow:hidden;border:2px solid var(--border-color);background:var(--bg-secondary);flex-shrink:0}@media (max-width: 640px){.images-container[_ngcontent-%COMP%]   .image-preview[_ngcontent-%COMP%]{width:88px;height:88px;min-width:88px;min-height:88px}}.images-container[_ngcontent-%COMP%]   .image-preview[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover;transition:opacity .2s ease;display:block}.images-container[_ngcontent-%COMP%]   .image-preview[_ngcontent-%COMP%]   img[src^="data:"][_ngcontent-%COMP%]{opacity:1!important;visibility:visible!important}.images-container[_ngcontent-%COMP%]   .image-preview[_ngcontent-%COMP%]   img.loaded[_ngcontent-%COMP%]{opacity:1;visibility:visible}.images-container[_ngcontent-%COMP%]   .image-preview[_ngcontent-%COMP%]   img.loading[_ngcontent-%COMP%]{opacity:0;visibility:hidden}.images-container[_ngcontent-%COMP%]   .image-preview[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]:not(.loaded):not(.loading){opacity:1;visibility:visible}.images-container[_ngcontent-%COMP%]   .image-preview[_ngcontent-%COMP%]   .image-loading[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%;display:flex;flex-direction:column;align-items:center;justify-content:center;background:#00000080;-webkit-backdrop-filter:blur(4px);backdrop-filter:blur(4px);z-index:1}.images-container[_ngcontent-%COMP%]   .image-preview[_ngcontent-%COMP%]   .image-loading[_ngcontent-%COMP%]   .loading-spinner[_ngcontent-%COMP%]{width:32px;height:32px;border:3px solid rgba(255,255,255,.3);border-top-color:#fff;border-radius:50%;animation:_ngcontent-%COMP%_spin .8s linear infinite;margin-bottom:.5rem}.images-container[_ngcontent-%COMP%]   .image-preview[_ngcontent-%COMP%]   .image-loading[_ngcontent-%COMP%]   .loading-text[_ngcontent-%COMP%]{color:#fff;font-size:.875rem;font-weight:500;text-shadow:0 1px 2px rgba(0,0,0,.3)}.images-container[_ngcontent-%COMP%]   .image-preview.uploading[_ngcontent-%COMP%]{opacity:.8}.images-container[_ngcontent-%COMP%]   .image-preview.uploading[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{filter:blur(2px)}.images-container[_ngcontent-%COMP%]   .image-preview[_ngcontent-%COMP%]   .image-remove[_ngcontent-%COMP%]{position:absolute;top:.5rem;right:.5rem;background:#000000b3;color:#fff;border:none;border-radius:50%;width:24px;height:24px;cursor:pointer;font-size:1rem;display:flex;align-items:center;justify-content:center;z-index:2}.images-container[_ngcontent-%COMP%]   .image-preview[_ngcontent-%COMP%]   .image-remove[_ngcontent-%COMP%]:active{background:#000000e6}@keyframes _ngcontent-%COMP%_spin{to{transform:rotate(360deg)}}.images-container[_ngcontent-%COMP%]   .image-upload-btn[_ngcontent-%COMP%]{width:100px;height:100px;min-width:100px;min-height:100px;border:2px dashed var(--border-color);border-radius:var(--radius-sm);display:flex;flex-direction:column;align-items:center;justify-content:center;gap:.375rem;cursor:pointer;background:var(--bg-secondary);transition:all .2s cubic-bezier(.4,0,.2,1);touch-action:manipulation;-webkit-tap-highlight-color:transparent}@media (max-width: 640px){.images-container[_ngcontent-%COMP%]   .image-upload-btn[_ngcontent-%COMP%]{width:88px;height:88px;min-width:88px;min-height:88px}}.images-container[_ngcontent-%COMP%]   .image-upload-btn[_ngcontent-%COMP%]   app-icon[_ngcontent-%COMP%]{color:var(--text-secondary);transition:all .2s ease}.images-container[_ngcontent-%COMP%]   .image-upload-btn[_ngcontent-%COMP%]:active{border-color:var(--primary-color);background:var(--bg-hover);transform:scale(.95)}.images-container[_ngcontent-%COMP%]   .image-upload-btn[_ngcontent-%COMP%]:active   app-icon[_ngcontent-%COMP%]{color:var(--primary-color);transform:scale(1.1)}.images-container[_ngcontent-%COMP%]   .image-upload-btn[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:var(--text-secondary);font-size:.75rem;font-weight:500;transition:color .2s ease}.images-container[_ngcontent-%COMP%]   .image-upload-btn[_ngcontent-%COMP%]:active   span[_ngcontent-%COMP%]{color:var(--primary-color)}.links-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.75rem}@media (max-width: 640px){.links-container[_ngcontent-%COMP%]{gap:.5rem}}.links-container[_ngcontent-%COMP%]   .link-item[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:flex-start;padding:1rem;background:var(--bg-secondary);border-radius:var(--radius-sm);border:1px solid var(--border-color)}@media (max-width: 640px){.links-container[_ngcontent-%COMP%]   .link-item[_ngcontent-%COMP%]{padding:.75rem}}.links-container[_ngcontent-%COMP%]   .link-item[_ngcontent-%COMP%]   .link-content[_ngcontent-%COMP%]{flex:1;min-width:0}.links-container[_ngcontent-%COMP%]   .link-item[_ngcontent-%COMP%]   .link-content[_ngcontent-%COMP%]   .link-title[_ngcontent-%COMP%]{display:block;font-weight:600;color:var(--primary-color);text-decoration:none;margin-bottom:.25rem;font-size:.875rem;word-break:break-word}.links-container[_ngcontent-%COMP%]   .link-item[_ngcontent-%COMP%]   .link-content[_ngcontent-%COMP%]   .link-description[_ngcontent-%COMP%]{margin:.25rem 0;color:var(--text-secondary);font-size:.75rem;word-break:break-word}.links-container[_ngcontent-%COMP%]   .link-item[_ngcontent-%COMP%]   .link-content[_ngcontent-%COMP%]   .link-url[_ngcontent-%COMP%]{display:block;color:var(--text-tertiary);font-size:.7rem;word-break:break-all}.links-container[_ngcontent-%COMP%]   .link-item[_ngcontent-%COMP%]   .link-remove[_ngcontent-%COMP%]{background:none;border:none;color:var(--text-secondary);cursor:pointer;font-size:1.25rem;padding:.25rem;flex-shrink:0}.links-container[_ngcontent-%COMP%]   .link-item[_ngcontent-%COMP%]   .link-remove[_ngcontent-%COMP%]:active{color:var(--text-primary)}.links-container[_ngcontent-%COMP%]   .link-form[_ngcontent-%COMP%]{padding:1rem;background:var(--bg-secondary);border-radius:var(--radius-sm);border:1px solid var(--border-color);display:flex;flex-direction:column;gap:.75rem}@media (max-width: 640px){.links-container[_ngcontent-%COMP%]   .link-form[_ngcontent-%COMP%]{padding:.75rem;gap:.5rem}}.links-container[_ngcontent-%COMP%]   .link-form[_ngcontent-%COMP%]   .form-input[_ngcontent-%COMP%]{padding:.75rem;border:1px solid var(--border-color);border-radius:var(--radius-sm);font-size:1rem;background:var(--bg-primary);color:var(--text-primary)}@media (max-width: 640px){.links-container[_ngcontent-%COMP%]   .link-form[_ngcontent-%COMP%]   .form-input[_ngcontent-%COMP%]{font-size:16px;padding:.625rem}}.links-container[_ngcontent-%COMP%]   .link-form[_ngcontent-%COMP%]   .form-input[_ngcontent-%COMP%]:focus{outline:none;border-color:var(--primary-color);box-shadow:0 0 0 3px var(--primary-light)}.links-container[_ngcontent-%COMP%]   .link-form[_ngcontent-%COMP%]   .link-form-actions[_ngcontent-%COMP%]{display:flex;gap:.5rem}@media (max-width: 640px){.links-container[_ngcontent-%COMP%]   .link-form[_ngcontent-%COMP%]   .link-form-actions[_ngcontent-%COMP%]{flex-direction:column}}.btn[_ngcontent-%COMP%]   app-icon[_ngcontent-%COMP%]{color:inherit}@media (max-width: 640px){.btn[_ngcontent-%COMP%]{min-height:48px;font-size:1rem}}.image-preview-modal[_ngcontent-%COMP%]{position:fixed;inset:0;background:#000000fa;z-index:10000;display:flex;align-items:center;justify-content:center;padding:1rem;animation:_ngcontent-%COMP%_fadeIn .2s ease;backdrop-filter:blur(10px);-webkit-backdrop-filter:blur(10px);overflow:hidden}.image-preview-modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]{position:relative;max-width:100%;max-height:100%;display:flex;align-items:center;justify-content:center;width:100%;height:100%;overflow:hidden}.image-preview-modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .image-container[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;align-items:center;justify-content:center;overflow:hidden;touch-action:none;-webkit-user-select:none;user-select:none}.image-preview-modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .preview-image[_ngcontent-%COMP%]{max-width:none;max-height:none;width:auto;height:auto;min-width:100px;min-height:100px;object-fit:contain;border-radius:var(--radius-sm);box-shadow:0 20px 60px #00000080;transform-origin:center center;will-change:transform;image-rendering:auto;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;-webkit-backface-visibility:hidden;backface-visibility:hidden;-webkit-transform:translateZ(0);transform:translateZ(0)}@media (max-width: 640px){.image-preview-modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .preview-image[_ngcontent-%COMP%]{touch-action:pan-x pan-y pinch-zoom;-webkit-user-select:none;user-select:none}}.image-preview-modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .zoom-controls[_ngcontent-%COMP%]{position:absolute;top:1rem;left:50%;transform:translate(-50%);display:flex;align-items:center;gap:.5rem;background:#000000b3;padding:.5rem 1rem;border-radius:24px;backdrop-filter:blur(10px);-webkit-backdrop-filter:blur(10px);z-index:10002}@media (max-width: 640px){.image-preview-modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .zoom-controls[_ngcontent-%COMP%]{top:.5rem;padding:.375rem .75rem;gap:.375rem}}.image-preview-modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .zoom-controls[_ngcontent-%COMP%]   .zoom-level[_ngcontent-%COMP%]{color:#fff;font-size:.875rem;font-weight:600;min-width:50px;text-align:center}@media (max-width: 640px){.image-preview-modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .zoom-controls[_ngcontent-%COMP%]   .zoom-level[_ngcontent-%COMP%]{font-size:.75rem;min-width:40px}}.image-preview-modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .zoom-controls[_ngcontent-%COMP%]   .zoom-btn[_ngcontent-%COMP%]{background:#fff3;border:none;border-radius:50%;width:36px;height:36px;display:flex;align-items:center;justify-content:center;cursor:pointer;transition:all .2s ease;touch-action:manipulation;-webkit-tap-highlight-color:transparent}@media (max-width: 640px){.image-preview-modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .zoom-controls[_ngcontent-%COMP%]   .zoom-btn[_ngcontent-%COMP%]{width:32px;height:32px}}.image-preview-modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .zoom-controls[_ngcontent-%COMP%]   .zoom-btn[_ngcontent-%COMP%]   app-icon[_ngcontent-%COMP%]{color:#fff}.image-preview-modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .zoom-controls[_ngcontent-%COMP%]   .zoom-btn[_ngcontent-%COMP%]:hover:not(:disabled){background:#ffffff4d;transform:scale(1.1)}.image-preview-modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .zoom-controls[_ngcontent-%COMP%]   .zoom-btn[_ngcontent-%COMP%]:active:not(:disabled){transform:scale(.95)}.image-preview-modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .zoom-controls[_ngcontent-%COMP%]   .zoom-btn[_ngcontent-%COMP%]:disabled{opacity:.3;cursor:not-allowed}.image-preview-modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .zoom-controls[_ngcontent-%COMP%]   .zoom-btn.reset-btn[_ngcontent-%COMP%]{margin-left:.25rem;background:#ffffff26}.image-preview-modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .modal-close[_ngcontent-%COMP%]{position:absolute;top:1rem;right:1rem;background:#fff3;border:none;border-radius:50%;width:44px;height:44px;display:flex;align-items:center;justify-content:center;cursor:pointer;z-index:10001;transition:all .2s ease;backdrop-filter:blur(10px);-webkit-backdrop-filter:blur(10px)}.image-preview-modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .modal-close[_ngcontent-%COMP%]   app-icon[_ngcontent-%COMP%]{color:#fff}.image-preview-modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .modal-close[_ngcontent-%COMP%]:hover{background:#ffffff4d;transform:scale(1.1)}.image-preview-modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .modal-close[_ngcontent-%COMP%]:active{transform:scale(.95)}@media (max-width: 640px){.image-preview-modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .modal-close[_ngcontent-%COMP%]{top:.5rem;right:.5rem;width:40px;height:40px}}.image-preview-modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .modal-nav[_ngcontent-%COMP%]{position:absolute;top:50%;transform:translateY(-50%);background:#fff3;border:none;border-radius:50%;width:48px;height:48px;display:flex;align-items:center;justify-content:center;cursor:pointer;z-index:10001;transition:all .2s ease;backdrop-filter:blur(10px);-webkit-backdrop-filter:blur(10px)}.image-preview-modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .modal-nav[_ngcontent-%COMP%]   app-icon[_ngcontent-%COMP%]{color:#fff}.image-preview-modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .modal-nav[_ngcontent-%COMP%]:hover:not(:disabled){background:#ffffff4d;transform:translateY(-50%) scale(1.1)}.image-preview-modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .modal-nav[_ngcontent-%COMP%]:active:not(:disabled){transform:translateY(-50%) scale(.95)}.image-preview-modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .modal-nav[_ngcontent-%COMP%]:disabled{opacity:.3;cursor:not-allowed}.image-preview-modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .modal-nav.modal-nav-prev[_ngcontent-%COMP%]{left:1rem}@media (max-width: 640px){.image-preview-modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .modal-nav.modal-nav-prev[_ngcontent-%COMP%]{left:.5rem;width:40px;height:40px}}.image-preview-modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .modal-nav.modal-nav-next[_ngcontent-%COMP%]{right:1rem}@media (max-width: 640px){.image-preview-modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .modal-nav.modal-nav-next[_ngcontent-%COMP%]{right:.5rem;width:40px;height:40px}}.image-preview-modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .image-counter[_ngcontent-%COMP%]{position:absolute;bottom:1rem;left:50%;transform:translate(-50%);background:#000000b3;color:#fff;padding:.5rem 1rem;border-radius:20px;font-size:.875rem;font-weight:500;backdrop-filter:blur(10px);-webkit-backdrop-filter:blur(10px)}@media (max-width: 640px){.image-preview-modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .image-counter[_ngcontent-%COMP%]{bottom:.5rem;padding:.375rem .75rem;font-size:.75rem}}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0}to{opacity:1}}']})};export{We as NoteEditor};
