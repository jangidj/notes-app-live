import{a as T,b as N,c as D,f as A}from"./chunk-FXCUDPYU.js";import{c as I}from"./chunk-5GGOMSGT.js";import{Fa as u,Gb as C,Ha as d,Ja as c,Ka as h,La as w,Na as m,O as P,Oa as V,R as s,S as g,Z as _,_a as S,ba as p,eb as F,ha as k,qa as b,ra as x,ta as M,ua as f,va as v,wa as y,xa as r,ya as n,za as O,zb as E}from"./chunk-QVP6TR5P.js";var z=(a,i)=>i.id;function j(a,i){if(a&1){let e=u();r(0,"button",22),d("click",function(){let t=s(e).$implicit,l=c(2);return g(l.categoryColor.set(t))}),n()}if(a&2){let e=i.$implicit,o=c(2);h("background-color",e),w("active",o.categoryColor()===e)}}function B(a,i){if(a&1){let e=u();r(0,"form",11),d("submit",function(t){return s(e),g(t.preventDefault())}),r(1,"h3"),m(2,"Add New Category"),n(),r(3,"div",12)(4,"label",13),m(5,"Name"),n(),r(6,"input",14),d("input",function(t){s(e);let l=c();return g(l.categoryName.set(t.target.value))}),n()(),r(7,"div",12)(8,"label",15),m(9,"Color"),n(),r(10,"div",16),f(11,j,1,4,"button",17,M),n(),r(13,"input",18),d("input",function(t){s(e);let l=c();return g(l.categoryColor.set(t.target.value))}),n()(),r(14,"div",19)(15,"button",20),d("click",function(){s(e);let t=c();return g(t.createCategory())}),m(16,"Create"),n(),r(17,"button",21),d("click",function(){s(e);let t=c();return g(t.cancelAdd())}),m(18,"Cancel"),n()()()}if(a&2){let e=c();p(6),y("value",e.categoryName()),p(5),v(e.colorPalette),p(2),y("value",e.categoryColor())}}function G(a,i){if(a&1){let e=u();r(0,"button",23),d("click",function(){s(e);let t=c();return g(t.openAddForm())}),m(1," + Add Category "),n()}}function Y(a,i){if(a&1){let e=u();r(0,"button",22),d("click",function(){let t=s(e).$implicit,l=c(3);return g(l.editColor.set(t))}),n()}if(a&2){let e=i.$implicit,o=c(3);h("background-color",e),w("active",o.editColor()===e)}}function q(a,i){if(a&1){let e=u();r(0,"form",25),d("submit",function(t){return s(e),g(t.preventDefault())}),r(1,"input",26),d("input",function(t){s(e);let l=c(2);return g(l.editName.set(t.target.value))}),n(),r(2,"div",16),f(3,Y,1,4,"button",17,M),n(),r(5,"input",27),d("input",function(t){s(e);let l=c(2);return g(l.editColor.set(t.target.value))}),n(),r(6,"div",28)(7,"button",29),d("click",function(){s(e);let t=c().$implicit,l=c();return g(l.updateCategory(t.id))}),m(8," Save "),n(),r(9,"button",30),d("click",function(){s(e);let t=c(2);return g(t.cancelEdit())}),m(10," Cancel "),n()()()}if(a&2){let e=c(2);p(),y("value",e.editName()),p(2),v(e.colorPalette),p(2),y("value",e.editColor())}}function H(a,i){if(a&1){let e=u();r(0,"div",31),O(1,"div",32),r(2,"span",33),m(3),n()(),r(4,"div",28)(5,"button",34),d("click",function(){s(e);let t=c().$implicit,l=c();return g(l.startEdit(t))}),m(6,"\u270F\uFE0F"),n(),r(7,"button",35),d("click",function(){s(e);let t=c().$implicit,l=c();return g(l.deleteCategory(t.id))}),m(8,"\u{1F5D1}\uFE0F"),n()()}if(a&2){let e=c().$implicit;p(),h("background-color",e.color),p(2),V(e.name)}}function J(a,i){if(a&1&&(r(0,"div",10),b(1,q,11,2,"form",24)(2,H,9,3),n()),a&2){let e=i.$implicit,o=c();p(),x(o.editingCategoryId()===e.id?1:2)}}var $=class a{store=P(E);close=S();categories=this.store.selectSignal(I);showAddForm=_(!1);categoryName=_("");categoryColor=_("#667eea");editingCategoryId=_(null);editName=_("");editColor=_("");colorPalette=["#667eea","#764ba2","#f093fb","#4facfe","#43e97b","#fa709a","#fee140","#30cfd0","#a8edea","#fed6e3","#ff9a9e","#fecfef","#ffecd2","#fcb69f","#ff8a80","#ff80ab"];ngOnInit(){this.store.dispatch(C.loadCategories())}openAddForm(){this.showAddForm.set(!0),this.categoryName.set(""),this.categoryColor.set("#667eea")}cancelAdd(){this.showAddForm.set(!1)}createCategory(){let i=this.categoryName().trim();i&&(this.store.dispatch(C.createCategory({category:{name:i,color:this.categoryColor()}})),this.showAddForm.set(!1),this.categoryName.set(""))}startEdit(i){this.editingCategoryId.set(i.id),this.editName.set(i.name),this.editColor.set(i.color)}cancelEdit(){this.editingCategoryId.set(null)}updateCategory(i){let e=this.editName().trim();e&&(this.store.dispatch(C.updateCategory({id:i,updates:{name:e,color:this.editColor()}})),this.editingCategoryId.set(null))}deleteCategory(i){confirm("Are you sure you want to delete this category? Notes in this category will not be deleted.")&&this.store.dispatch(C.deleteCategory({id:i}))}onClose(){this.close.emit()}static \u0275fac=function(e){return new(e||a)};static \u0275cmp=k({type:a,selectors:[["app-category-manager"]],outputs:{close:"close"},decls:17,vars:2,consts:[[1,"category-manager-overlay",3,"click"],[1,"category-manager",3,"click"],[1,"manager-header"],[1,"close-btn",3,"click"],[1,"manager-content"],[1,"add-category-form"],[1,"categories-list"],[1,"list-header"],[1,"btn","btn-primary"],[1,"categories-grid"],[1,"category-item"],[1,"add-category-form",3,"submit"],[1,"form-group"],["for","category-name"],["type","text","name","category-name","id","category-name","placeholder","Category name","autocomplete","off","data-form-type","other","data-lpignore","true","data-1p-ignore","true","data-bwignore","true","aria-label","Category name",1,"form-input",3,"input","value"],["for","category-color"],[1,"color-picker"],["type","button",1,"color-option",3,"active","background-color"],["type","color","name","category-color","id","category-color",1,"color-input",3,"input","value"],[1,"form-actions"],["type","submit",1,"btn","btn-primary",3,"click"],["type","button",1,"btn","btn-secondary",3,"click"],["type","button",1,"color-option",3,"click"],[1,"btn","btn-primary",3,"click"],[1,"edit-form"],[1,"edit-form",3,"submit"],["type","text","name","edit-category-name","id","edit-category-name","autocomplete","off","data-form-type","other",1,"form-input",3,"input","value"],["type","color","name","edit-category-color","id","edit-category-color",1,"color-input",3,"input","value"],[1,"item-actions"],["type","submit",1,"btn","btn-small","btn-primary",3,"click"],["type","button",1,"btn","btn-small","btn-secondary",3,"click"],[1,"category-display"],[1,"category-color-indicator"],[1,"category-name"],[1,"btn-icon",3,"click"],[1,"btn-icon","btn-danger",3,"click"]],template:function(e,o){e&1&&(r(0,"div",0),d("click",function(){return o.onClose()}),r(1,"div",1),d("click",function(l){return l.stopPropagation()}),r(2,"header",2)(3,"h2"),m(4,"Manage Categories"),n(),r(5,"button",3),d("click",function(){return o.onClose()}),m(6,"\xD7"),n()(),r(7,"div",4),b(8,B,19,2,"form",5),r(9,"div",6)(10,"div",7)(11,"h3"),m(12,"Categories"),n(),b(13,G,2,0,"button",8),n(),r(14,"div",9),f(15,J,3,1,"div",10,z),n()()()()()),e&2&&(p(8),x(o.showAddForm()?8:-1),p(5),x(o.showAddForm()?-1:13),p(2),v(o.categories()))},dependencies:[F,A,D,T,N],styles:[".category-manager-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background:#00000080;-webkit-backdrop-filter:blur(4px);backdrop-filter:blur(4px);display:flex;align-items:center;justify-content:center;z-index:1000;padding:clamp(.5rem,2vw,2rem);overflow-y:auto}@media (max-width: 639px){.category-manager-overlay[_ngcontent-%COMP%]{padding:2rem .5rem .5rem;align-items:flex-start}}@media (min-width: 640px) and (max-width: 1023px){.category-manager-overlay[_ngcontent-%COMP%]{padding:1rem}}@media (min-width: 1024px){.category-manager-overlay[_ngcontent-%COMP%]{padding:2rem}}.category-manager[_ngcontent-%COMP%]{background:var(--bg-elevated);border-radius:clamp(8px,2vw,12px);max-width:600px;width:100%;max-height:90vh;display:flex;flex-direction:column;box-shadow:var(--shadow-xl);border:1px solid var(--border-color);transition:all .3s ease}@media (max-width: 639px){.category-manager[_ngcontent-%COMP%]{max-height:95vh;border-radius:12px 12px 0 0;margin-top:auto}}.manager-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:1.5rem;border-bottom:1px solid var(--border-color);background:var(--bg-secondary)}.manager-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;font-size:1.5rem;color:var(--text-primary)}.manager-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]{background:var(--bg-secondary);border:1px solid var(--border-color);font-size:2rem;color:var(--text-secondary);cursor:pointer;padding:0;width:32px;height:32px;display:flex;align-items:center;justify-content:center;border-radius:50%;transition:all .2s ease}.manager-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]:hover{background:var(--bg-hover);color:var(--text-primary);border-color:var(--border-hover)}.manager-content[_ngcontent-%COMP%]{padding:1.5rem;overflow-y:auto;flex:1}.add-category-form[_ngcontent-%COMP%]{padding:1.5rem;background:var(--bg-secondary);border-radius:8px;margin-bottom:1.5rem;border:1px solid var(--border-color)}.add-category-form[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 1rem;font-size:1.25rem;color:var(--text-primary)}.form-group[_ngcontent-%COMP%]{margin-bottom:1.5rem}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:.5rem;font-weight:500;color:var(--text-primary)}.form-group[_ngcontent-%COMP%]   .form-input[_ngcontent-%COMP%]{width:100%;padding:.75rem;border:1px solid var(--border-color);border-radius:8px;font-size:1rem;background:var(--bg-primary);color:var(--text-primary);transition:all .2s ease}.form-group[_ngcontent-%COMP%]   .form-input[_ngcontent-%COMP%]:focus{outline:none;border-color:var(--primary-color);box-shadow:0 0 0 3px var(--primary-light)}.color-picker[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:.5rem;margin-bottom:.75rem}.color-option[_ngcontent-%COMP%]{width:32px;height:32px;border:2px solid transparent;border-radius:50%;cursor:pointer;transition:all .2s ease}.color-option.active[_ngcontent-%COMP%]{border-color:var(--text-primary);transform:scale(1.1);box-shadow:var(--shadow-md)}.color-option[_ngcontent-%COMP%]:hover{transform:scale(1.1)}.color-input[_ngcontent-%COMP%]{width:100%;height:40px;border:1px solid var(--border-color);border-radius:8px;cursor:pointer;background:var(--bg-primary)}.form-actions[_ngcontent-%COMP%]{display:flex;gap:.75rem}.list-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:1rem}.list-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;font-size:1.25rem;color:var(--text-primary)}.categories-grid[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:clamp(.5rem,2vw,.75rem)}@media (max-width: 640px){.categories-grid[_ngcontent-%COMP%]{gap:.5rem}}.category-item[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:1rem;background:var(--bg-secondary);border-radius:8px;border:1px solid var(--border-color);transition:all .2s ease}.category-item[_ngcontent-%COMP%]:hover{border-color:var(--border-hover)}.category-item[_ngcontent-%COMP%]   .category-display[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.75rem;flex:1}.category-item[_ngcontent-%COMP%]   .category-display[_ngcontent-%COMP%]   .category-color-indicator[_ngcontent-%COMP%]{width:24px;height:24px;border-radius:50%;border:2px solid var(--bg-elevated);box-shadow:0 0 0 1px var(--border-color)}.category-item[_ngcontent-%COMP%]   .category-display[_ngcontent-%COMP%]   .category-name[_ngcontent-%COMP%]{font-weight:500;color:var(--text-primary)}.category-item[_ngcontent-%COMP%]   .edit-form[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column;gap:.75rem}.category-item[_ngcontent-%COMP%]   .edit-form[_ngcontent-%COMP%]   .color-picker[_ngcontent-%COMP%]{margin-bottom:0}.category-item[_ngcontent-%COMP%]   .item-actions[_ngcontent-%COMP%]{display:flex;gap:.5rem;margin-left:1rem}.btn[_ngcontent-%COMP%]{padding:.75rem 1.5rem;border:none;border-radius:8px;font-size:1rem;font-weight:500;cursor:pointer;transition:all .2s ease}.btn.btn-primary[_ngcontent-%COMP%]{background:var(--primary-color);color:var(--text-inverse)}.btn.btn-primary[_ngcontent-%COMP%]:hover:not(:disabled){background:var(--primary-hover);transform:translateY(-1px);box-shadow:var(--shadow-md)}.btn.btn-secondary[_ngcontent-%COMP%]{background:var(--bg-secondary);color:var(--text-primary);border:1px solid var(--border-color)}.btn.btn-secondary[_ngcontent-%COMP%]:hover:not(:disabled){background:var(--bg-hover);border-color:var(--border-hover)}.btn.btn-small[_ngcontent-%COMP%]{padding:.5rem 1rem;font-size:.875rem}.btn-icon[_ngcontent-%COMP%]{background:var(--bg-secondary);border:1px solid var(--border-color);font-size:1.25rem;cursor:pointer;padding:.5rem;border-radius:4px;transition:all .2s ease;color:var(--text-secondary)}.btn-icon[_ngcontent-%COMP%]:hover{background:var(--bg-hover);color:var(--text-primary);border-color:var(--border-hover)}.btn-icon.btn-danger[_ngcontent-%COMP%]:hover{background:var(--error-color);color:var(--text-inverse);border-color:var(--error-color)}"]})};export{$ as a};
