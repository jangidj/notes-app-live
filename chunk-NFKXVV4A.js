import{a as B}from"./chunk-U46O7AR6.js";import{a as F,b as z,c as A,f as D}from"./chunk-KNDRXFII.js";import{a as j,c as $}from"./chunk-MEUCEX3B.js";import{$a as N,Aa as u,Bb as T,Ga as b,Ia as g,Ib as y,Ka as c,La as M,Ma as k,O as P,Oa as p,Pa as E,Qa as w,R as s,S as m,Z as x,Za as S,ca as l,gb as I,ia as V,ra as C,sa as f,ua as O,va as h,wa as v,xa as _,ya as t,za as i}from"./chunk-JSIDNEE5.js";var G=(a,r)=>r.id;function q(a,r){if(a&1){let e=b();t(0,"button",24),g("click",function(){let n=s(e).$implicit,d=c(2);return m(d.categoryColor.set(n))}),i()}if(a&2){let e=r.$implicit,o=c(2);M("background-color",e),k("active",o.categoryColor()===e)}}function H(a,r){if(a&1){let e=b();t(0,"form",11),g("submit",function(n){return s(e),m(n.preventDefault())}),t(1,"h3"),p(2,"Add New Category"),i(),t(3,"div",12)(4,"label",13),p(5,"Name"),i(),t(6,"div",14)(7,"input",15),g("input",function(n){s(e);let d=c();return m(d.categoryName.set(n.target.value))}),i(),t(8,"span",16),p(9),i()()(),t(10,"div",12)(11,"label",17),p(12,"Color"),i(),t(13,"div",18),h(14,q,1,4,"button",19,O),i(),t(16,"input",20),g("input",function(n){s(e);let d=c();return m(d.categoryColor.set(n.target.value))}),i()(),t(17,"div",21)(18,"button",22),g("click",function(){s(e);let n=c();return m(n.createCategory())}),p(19,"Create"),i(),t(20,"button",23),g("click",function(){s(e);let n=c();return m(n.cancelAdd())}),p(21,"Cancel"),i()()()}if(a&2){let e=c();l(7),_("value",e.categoryName()),l(),_("title","Auto-generated icon: "+e.newCategoryIcon()),l(),w(" ",e.newCategoryIcon()," "),l(5),v(e.colorPalette),l(2),_("value",e.categoryColor())}}function J(a,r){if(a&1){let e=b();t(0,"button",25),g("click",function(){s(e);let n=c();return m(n.openAddForm())}),u(1,"app-icon",26),t(2,"span"),p(3,"Add Category"),i()()}a&2&&(l(),_("size",18))}function K(a,r){if(a&1){let e=b();t(0,"button",24),g("click",function(){let n=s(e).$implicit,d=c(3);return m(d.editColor.set(n))}),i()}if(a&2){let e=r.$implicit,o=c(3);M("background-color",e),k("active",o.editColor()===e)}}function L(a,r){if(a&1){let e=b();t(0,"form",28),g("submit",function(n){return s(e),m(n.preventDefault())}),t(1,"div",14)(2,"input",29),g("input",function(n){s(e);let d=c(2);return m(d.editName.set(n.target.value))}),i(),t(3,"span",16),p(4),i()(),t(5,"div",18),h(6,K,1,4,"button",19,O),i(),t(8,"input",30),g("input",function(n){s(e);let d=c(2);return m(d.editColor.set(n.target.value))}),i(),t(9,"div",31)(10,"button",32),g("click",function(){s(e);let n=c().$implicit,d=c();return m(d.updateCategory(n.id))}),p(11," Save "),i(),t(12,"button",33),g("click",function(){s(e);let n=c(2);return m(n.cancelEdit())}),p(13," Cancel "),i()()()}if(a&2){let e=c(2);l(2),_("value",e.editName()),l(),_("title","Auto-generated icon: "+e.editCategoryIcon()),l(),w(" ",e.editCategoryIcon()," "),l(2),v(e.colorPalette),l(2),_("value",e.editColor())}}function Q(a,r){if(a&1){let e=b();t(0,"div",34),u(1,"div",35),t(2,"span",36),p(3),i(),t(4,"span",37),p(5),i()(),t(6,"div",31)(7,"button",38),g("click",function(){s(e);let n=c().$implicit,d=c();return m(d.startEdit(n))}),u(8,"app-icon",39),i(),t(9,"button",40),g("click",function(){s(e);let n=c().$implicit,d=c();return m(d.deleteCategory(n.id))}),u(10,"app-icon",41),i()()}if(a&2){let e=c().$implicit,o=c();l(),M("background-color",e.color),l(),_("title",e.icon||"No icon"),l(),w(" ",e.icon||o.iconService.getIcon(e.name)," "),l(2),E(e.name),l(3),_("size",18),l(2),_("size",18)}}function R(a,r){if(a&1&&(t(0,"div",10),C(1,L,14,4,"form",27)(2,Q,11,7),i()),a&2){let e=r.$implicit,o=c();l(),f(o.editingCategoryId()===e.id?1:2)}}var Y=class a{store=P(T);iconService=P(B);close=N();categories=this.store.selectSignal($);showAddForm=x(!1);categoryName=x("");categoryColor=x("#667eea");editingCategoryId=x(null);editName=x("");editColor=x("");newCategoryIcon=S(()=>{let r=this.categoryName();return r?this.iconService.getIcon(r):"\u{1F3F7}\uFE0F"});editCategoryIcon=S(()=>{let r=this.editName();return r?this.iconService.getIcon(r):"\u{1F3F7}\uFE0F"});colorPalette=["#667eea","#764ba2","#f093fb","#4facfe","#43e97b","#fa709a","#fee140","#30cfd0","#a8edea","#fed6e3","#ff9a9e","#fecfef","#ffecd2","#fcb69f","#ff8a80","#ff80ab"];ngOnInit(){this.store.dispatch(y.loadCategories())}openAddForm(){this.showAddForm.set(!0),this.categoryName.set(""),this.categoryColor.set("#667eea")}cancelAdd(){this.showAddForm.set(!1)}createCategory(){let r=this.categoryName().trim();if(r){let e=this.iconService.getIcon(r);this.store.dispatch(y.createCategory({category:{name:r,color:this.categoryColor(),icon:e}})),this.showAddForm.set(!1),this.categoryName.set("")}}startEdit(r){this.editingCategoryId.set(r.id),this.editName.set(r.name),this.editColor.set(r.color)}cancelEdit(){this.editingCategoryId.set(null)}updateCategory(r){let e=this.editName().trim();if(e){let o=this.iconService.getIcon(e);this.store.dispatch(y.updateCategory({id:r,updates:{name:e,color:this.editColor(),icon:o}})),this.editingCategoryId.set(null)}}deleteCategory(r){confirm("Are you sure you want to delete this category? Notes in this category will not be deleted.")&&this.store.dispatch(y.deleteCategory({id:r}))}onClose(){this.close.emit()}static \u0275fac=function(e){return new(e||a)};static \u0275cmp=V({type:a,selectors:[["app-category-manager"]],outputs:{close:"close"},decls:17,vars:2,consts:[[1,"category-manager-overlay",3,"click"],[1,"category-manager",3,"click"],[1,"manager-header"],[1,"close-btn",3,"click"],[1,"manager-content"],[1,"add-category-form"],[1,"categories-list"],[1,"list-header"],[1,"btn","btn-primary","add-category-btn"],[1,"categories-grid"],[1,"category-item"],[1,"add-category-form",3,"submit"],[1,"form-group"],["for","category-name"],[1,"input-with-icon-preview"],["type","text","name","category-name","id","category-name","placeholder","Category name","autocomplete","off","data-form-type","other","data-lpignore","true","data-1p-ignore","true","data-bwignore","true","aria-label","Category name",1,"form-input",3,"input","value"],[1,"icon-preview",3,"title"],["for","category-color"],[1,"color-picker"],["type","button",1,"color-option",3,"active","background-color"],["type","color","name","category-color","id","category-color",1,"color-input",3,"input","value"],[1,"form-actions"],["type","submit",1,"btn","btn-primary",3,"click"],["type","button",1,"btn","btn-secondary",3,"click"],["type","button",1,"color-option",3,"click"],[1,"btn","btn-primary","add-category-btn",3,"click"],["name","add",3,"size"],[1,"edit-form"],[1,"edit-form",3,"submit"],["type","text","name","edit-category-name","id","edit-category-name","autocomplete","off","data-form-type","other",1,"form-input",3,"input","value"],["type","color","name","edit-category-color","id","edit-category-color",1,"color-input",3,"input","value"],[1,"item-actions"],["type","submit",1,"btn","btn-small","btn-primary",3,"click"],["type","button",1,"btn","btn-small","btn-secondary",3,"click"],[1,"category-display"],[1,"category-color-indicator"],[1,"category-icon",3,"title"],[1,"category-name"],["aria-label","Edit category","title","Edit category",1,"btn-icon","btn-edit",3,"click"],["name","edit",3,"size"],["aria-label","Delete category","title","Delete category",1,"btn-icon","btn-danger",3,"click"],["name","delete",3,"size"]],template:function(e,o){e&1&&(t(0,"div",0),g("click",function(){return o.onClose()}),t(1,"div",1),g("click",function(d){return d.stopPropagation()}),t(2,"header",2)(3,"h2"),p(4,"Manage Categories"),i(),t(5,"button",3),g("click",function(){return o.onClose()}),p(6,"\xD7"),i()(),t(7,"div",4),C(8,H,22,4,"form",5),t(9,"div",6)(10,"div",7)(11,"h3"),p(12,"Categories"),i(),C(13,J,4,1,"button",8),i(),t(14,"div",9),h(15,R,3,1,"div",10,G),i()()()()()),e&2&&(l(8),f(o.showAddForm()?8:-1),l(5),f(o.showAddForm()?-1:13),l(2),v(o.categories()))},dependencies:[I,D,A,F,z,j],styles:[".category-manager-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background:#00000080;-webkit-backdrop-filter:blur(4px);backdrop-filter:blur(4px);display:flex;align-items:center;justify-content:center;z-index:1000;padding:clamp(.5rem,2vw,2rem);overflow-y:auto}@media (max-width: 639px){.category-manager-overlay[_ngcontent-%COMP%]{padding:2rem .5rem .5rem;align-items:flex-start}}@media (min-width: 640px) and (max-width: 1023px){.category-manager-overlay[_ngcontent-%COMP%]{padding:1rem}}@media (min-width: 1024px){.category-manager-overlay[_ngcontent-%COMP%]{padding:2rem}}.category-manager[_ngcontent-%COMP%]{background:var(--bg-elevated);border-radius:clamp(8px,2vw,12px);max-width:600px;width:100%;max-height:90vh;display:flex;flex-direction:column;box-shadow:var(--shadow-xl);border:1px solid var(--border-color);transition:all .3s ease}@media (max-width: 639px){.category-manager[_ngcontent-%COMP%]{max-height:95vh;border-radius:12px 12px 0 0;margin-top:auto}}.manager-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:1.5rem;border-bottom:1px solid var(--border-color);background:var(--bg-secondary)}.manager-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;font-size:1.5rem;color:var(--text-primary)}.manager-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]{background:var(--bg-secondary);border:1.5px solid var(--border-color);font-size:1.5rem;line-height:1;color:var(--text-secondary);cursor:pointer;padding:0;width:40px;height:40px;min-width:40px;min-height:40px;display:flex;align-items:center;justify-content:center;border-radius:50%;transition:all .15s cubic-bezier(.4,0,.2,1);touch-action:manipulation;-webkit-tap-highlight-color:transparent}@media (max-width: 640px){.manager-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]{width:44px;height:44px;min-width:44px;min-height:44px}}.manager-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]:hover{background:var(--bg-hover);color:var(--text-primary);border-color:var(--border-hover);transform:scale(1.05)}.manager-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]:active{transform:scale(.92);transition-duration:.1s}.manager-content[_ngcontent-%COMP%]{padding:1.5rem;overflow-y:auto;flex:1}.add-category-form[_ngcontent-%COMP%]{padding:1.5rem;background:var(--bg-secondary);border-radius:8px;margin-bottom:1.5rem;border:1px solid var(--border-color)}.add-category-form[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 1rem;font-size:1.25rem;color:var(--text-primary)}.form-group[_ngcontent-%COMP%]{margin-bottom:1.5rem}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:.5rem;font-weight:500;color:var(--text-primary)}.form-group[_ngcontent-%COMP%]   .input-with-icon-preview[_ngcontent-%COMP%]{position:relative;display:flex;align-items:center;gap:.5rem}.form-group[_ngcontent-%COMP%]   .input-with-icon-preview[_ngcontent-%COMP%]   .form-input[_ngcontent-%COMP%]{flex:1}.form-group[_ngcontent-%COMP%]   .input-with-icon-preview[_ngcontent-%COMP%]   .icon-preview[_ngcontent-%COMP%]{font-size:1.5rem;line-height:1;display:inline-flex;align-items:center;justify-content:center;width:40px;height:40px;background:var(--bg-elevated);border-radius:8px;border:1px solid var(--border-color);flex-shrink:0;cursor:help;transition:all .2s ease}.form-group[_ngcontent-%COMP%]   .input-with-icon-preview[_ngcontent-%COMP%]   .icon-preview[_ngcontent-%COMP%]:hover{background:var(--bg-secondary);transform:scale(1.05)}.form-group[_ngcontent-%COMP%]   .form-input[_ngcontent-%COMP%]{width:100%;padding:.75rem;border:1px solid var(--border-color);border-radius:8px;font-size:1rem;background:var(--bg-primary);color:var(--text-primary);transition:all .2s ease}.form-group[_ngcontent-%COMP%]   .form-input[_ngcontent-%COMP%]:focus{outline:none;border-color:var(--primary-color);box-shadow:0 0 0 3px var(--primary-light)}.color-picker[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:.5rem;margin-bottom:.75rem}.color-option[_ngcontent-%COMP%]{width:32px;height:32px;border:2px solid transparent;border-radius:50%;cursor:pointer;transition:all .2s ease}.color-option.active[_ngcontent-%COMP%]{border-color:var(--text-primary);transform:scale(1.1);box-shadow:var(--shadow-md)}.color-option[_ngcontent-%COMP%]:hover{transform:scale(1.1)}.color-input[_ngcontent-%COMP%]{width:100%;height:40px;border:1px solid var(--border-color);border-radius:8px;cursor:pointer;background:var(--bg-primary)}.form-actions[_ngcontent-%COMP%]{display:flex;gap:.75rem}.list-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:1rem;gap:1rem}.list-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;font-size:1.25rem;color:var(--text-primary);flex:1}@media (max-width: 640px){.list-header[_ngcontent-%COMP%]{flex-direction:column;align-items:stretch;gap:.75rem}.list-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.125rem}}.categories-grid[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:clamp(.5rem,2vw,.75rem)}@media (max-width: 640px){.categories-grid[_ngcontent-%COMP%]{gap:.5rem}}.category-item[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:1rem;background:var(--bg-elevated);border-radius:12px;border:1.5px solid var(--border-color);transition:all .2s cubic-bezier(.4,0,.2,1);box-shadow:0 1px 3px #0000000d}@media (max-width: 640px){.category-item[_ngcontent-%COMP%]{padding:1rem .875rem;border-radius:14px;border-width:1px;box-shadow:0 2px 6px #00000014}}.category-item[_ngcontent-%COMP%]:hover{border-color:var(--border-hover);box-shadow:0 2px 6px #0000001a;transform:translateY(-1px)}@media (max-width: 640px){.category-item[_ngcontent-%COMP%]:hover{transform:none}}.category-item[_ngcontent-%COMP%]:active{transform:scale(.98);transition-duration:.1s}.category-item[_ngcontent-%COMP%]   .category-display[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.75rem;flex:1}.category-item[_ngcontent-%COMP%]   .category-display[_ngcontent-%COMP%]   .category-color-indicator[_ngcontent-%COMP%]{width:24px;height:24px;border-radius:50%;border:2px solid var(--bg-elevated);box-shadow:0 0 0 1px var(--border-color);flex-shrink:0}.category-item[_ngcontent-%COMP%]   .category-display[_ngcontent-%COMP%]   .category-icon[_ngcontent-%COMP%]{font-size:1.25rem;line-height:1;display:inline-flex;align-items:center;justify-content:center;width:28px;height:28px;flex-shrink:0}.category-item[_ngcontent-%COMP%]   .category-display[_ngcontent-%COMP%]   .category-name[_ngcontent-%COMP%]{font-weight:500;color:var(--text-primary)}.category-item[_ngcontent-%COMP%]   .edit-form[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column;gap:.75rem}.category-item[_ngcontent-%COMP%]   .edit-form[_ngcontent-%COMP%]   .color-picker[_ngcontent-%COMP%]{margin-bottom:0}.category-item[_ngcontent-%COMP%]   .item-actions[_ngcontent-%COMP%]{display:flex;gap:.5rem;margin-left:1rem;flex-shrink:0}@media (max-width: 640px){.category-item[_ngcontent-%COMP%]   .item-actions[_ngcontent-%COMP%]{gap:.375rem;margin-left:.75rem}}.btn[_ngcontent-%COMP%]{display:inline-flex;align-items:center;justify-content:center;gap:.5rem;padding:.875rem 1.5rem;min-height:48px;border:none;border-radius:14px;font-size:1rem;font-weight:600;cursor:pointer;transition:all .15s cubic-bezier(.4,0,.2,1);touch-action:manipulation;-webkit-tap-highlight-color:transparent;letter-spacing:-.01em;-webkit-font-smoothing:antialiased}.btn[_ngcontent-%COMP%]   app-icon[_ngcontent-%COMP%]{color:inherit;flex-shrink:0}@media (max-width: 640px){.btn[_ngcontent-%COMP%]{width:100%;padding:1rem 1.5rem;min-height:50px;font-size:1rem}}.btn.btn-primary[_ngcontent-%COMP%]{background:var(--primary-color);color:var(--text-inverse);box-shadow:0 2px 8px #007aff40,0 1px 3px #0000001a}@media (max-width: 640px){.btn.btn-primary[_ngcontent-%COMP%]{box-shadow:0 4px 12px #007aff4d,0 2px 4px #0000001a}}.btn.btn-primary[_ngcontent-%COMP%]:hover:not(:disabled){background:var(--primary-hover);box-shadow:0 4px 12px #007aff59,0 2px 6px #00000026}.btn.btn-primary[_ngcontent-%COMP%]:active:not(:disabled){background:var(--primary-dark);transform:scale(.97);box-shadow:0 1px 4px #007aff33,0 1px 2px #0000001a;transition-duration:.1s}.btn.btn-secondary[_ngcontent-%COMP%]{background:var(--bg-elevated);color:var(--text-primary);border:1.5px solid var(--border-color);box-shadow:0 1px 3px #0000000d}@media (max-width: 640px){.btn.btn-secondary[_ngcontent-%COMP%]{border-width:1px;box-shadow:0 2px 6px #00000014}}.btn.btn-secondary[_ngcontent-%COMP%]:hover:not(:disabled){background:var(--bg-hover);border-color:var(--border-hover);box-shadow:0 2px 6px #0000001a}.btn.btn-secondary[_ngcontent-%COMP%]:active:not(:disabled){background:var(--bg-secondary);transform:scale(.97);box-shadow:0 1px 2px #0000000d;transition-duration:.1s}.btn.btn-small[_ngcontent-%COMP%]{padding:.625rem 1.25rem;min-height:40px;font-size:.875rem;border-radius:12px}@media (max-width: 640px){.btn.btn-small[_ngcontent-%COMP%]{padding:.75rem 1rem;min-height:44px;font-size:.9375rem}}.btn.add-category-btn[_ngcontent-%COMP%]{white-space:nowrap}@media (max-width: 640px){.btn.add-category-btn[_ngcontent-%COMP%]{width:100%}}.btn[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed;transform:none!important}.btn-icon[_ngcontent-%COMP%]{background:var(--bg-elevated);border:1.5px solid var(--border-color);cursor:pointer;padding:.625rem;min-width:44px;min-height:44px;border-radius:12px;transition:all .15s cubic-bezier(.4,0,.2,1);display:flex;align-items:center;justify-content:center;touch-action:manipulation;-webkit-tap-highlight-color:transparent;color:var(--text-secondary)}.btn-icon[_ngcontent-%COMP%]   app-icon[_ngcontent-%COMP%]{color:inherit}@media (max-width: 640px){.btn-icon[_ngcontent-%COMP%]{min-width:48px;min-height:48px;padding:.75rem;border-radius:14px}}.btn-icon[_ngcontent-%COMP%]:hover:not(:disabled){background:var(--bg-hover);color:var(--text-primary);border-color:var(--border-hover);transform:translateY(-1px);box-shadow:0 2px 6px #0000001a}.btn-icon[_ngcontent-%COMP%]:active:not(:disabled){transform:scale(.92);transition-duration:.1s}.btn-icon.btn-edit[_ngcontent-%COMP%]:hover:not(:disabled){background:var(--primary-light);color:var(--primary-color);border-color:var(--primary-color)}.btn-icon.btn-edit[_ngcontent-%COMP%]:active:not(:disabled){background:var(--primary-light)}.btn-icon.btn-danger[_ngcontent-%COMP%]:hover:not(:disabled){background:var(--error-color);color:var(--text-inverse);border-color:var(--error-color);box-shadow:0 2px 8px #ff3b304d}.btn-icon.btn-danger[_ngcontent-%COMP%]:active:not(:disabled){background:#dc2626;transform:scale(.92)}.btn-icon[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed;transform:none!important}"]})};export{Y as a};
