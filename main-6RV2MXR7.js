import{a as Tt}from"./chunk-JSO7IHTG.js";import{a as E,b as I}from"./chunk-GBK73SLR.js";import{a as fe}from"./chunk-DELSAL4N.js";import{a as St,b as Et,f as Oe,g as ce,h as vt,i as Ct,j as It,k as bt,l as wt,m as Ne,n as ue,o as At,p as de,s as Ot,t as N,u as Nt}from"./chunk-XCZL2FWP.js";import{$a as ae,A as et,C as tt,D as nt,E as rt,F as O,G as oe,H as ot,I as H,J as st,L as R,N as U,O as C,P as l,Q as Y,R as it,W as at,Wa as pt,Y as se,Z as ct,_ as we,a as d,aa as ut,b as p,c as re,d as _,e as Q,ea as ie,fb as gt,g as Ve,h as We,hb as ht,i as He,ia as dt,ib as yt,j as Ke,k as w,l as Qe,lb as mt,m as A,mb as J,n as Ie,na as ft,o as Z,oa as Ae,p as G,q as D,r as W,s as Ze,t as Ye,u as P,v as Je,w as Xe,y as qe,z as be,za as lt}from"./chunk-QQGFIXA2.js";var le=()=>{let e=l(J),t=l(yt);return e.isSignedIn()?!0:(t.navigate(["/login"]),!1)},xt=[{path:"login",loadComponent:()=>import("./chunk-WRCBDLYR.js").then(e=>e.Login)},{path:"",loadComponent:()=>import("./chunk-C5QEYJOJ.js").then(e=>e.Dashboard),canActivate:[le]},{path:"note/:id",loadComponent:()=>import("./chunk-XJR5QB55.js").then(e=>e.NoteEditor),canActivate:[le]},{path:"categories",loadComponent:()=>import("./chunk-EVYHTMVV.js").then(e=>e.CategoriesPage),canActivate:[le]},{path:"profile",loadComponent:()=>import("./chunk-4UIL3F36.js").then(e=>e.Profile),canActivate:[le]},{path:"**",redirectTo:""}];var Te="Service workers are disabled or not supported by this browser",X=class{serviceWorker;worker;registration;events;constructor(t,o){if(this.serviceWorker=t,!t)this.worker=this.events=this.registration=new _(n=>n.error(new H(5601,!1)));else{let n=null,r=new Q;this.worker=new _(f=>(n!==null&&f.next(n),r.subscribe(u=>f.next(u))));let i=()=>{let{controller:f}=t;f!==null&&(n=f,r.next(n))};t.addEventListener("controllerchange",i),i(),this.registration=this.worker.pipe(O(()=>t.getRegistration().then(f=>{if(!f)throw new H(5601,!1);return f})));let s=new Q;this.events=s.asObservable();let a=f=>{let{data:u}=f;u?.type&&s.next(u)};t.addEventListener("message",a),o?.get(Ae,null,{optional:!0})?.onDestroy(()=>{t.removeEventListener("controllerchange",i),t.removeEventListener("message",a)})}}postMessage(t,o){return new Promise(n=>{this.worker.pipe(P(1)).subscribe(r=>{r.postMessage(d({action:t},o)),n()})})}postMessageWithOperation(t,o,n){let r=this.waitForOperationCompleted(n),i=this.postMessage(t,o);return Promise.all([i,r]).then(([,s])=>s)}generateNonce(){return Math.round(Math.random()*1e7)}eventsOfType(t){let o;return typeof t=="string"?o=n=>n.type===t:o=n=>t.includes(n.type),this.events.pipe(D(o))}nextEventOfType(t){return this.eventsOfType(t).pipe(P(1))}waitForOperationCompleted(t){return new Promise((o,n)=>{this.eventsOfType("OPERATION_COMPLETED").pipe(D(r=>r.nonce===t),P(1),A(r=>{if(r.result!==void 0)return r.result;throw new Error(r.error)})).subscribe({next:o,error:n})})}get isEnabled(){return!!this.serviceWorker}},Cn=(()=>{class e{sw;messages;notificationClicks;notificationCloses;pushSubscriptionChanges;subscription;get isEnabled(){return this.sw.isEnabled}pushManager=null;subscriptionChanges=new Q;constructor(o){if(this.sw=o,!o.isEnabled){this.messages=G,this.notificationClicks=G,this.notificationCloses=G,this.pushSubscriptionChanges=G,this.subscription=G;return}this.messages=this.sw.eventsOfType("PUSH").pipe(A(r=>r.data)),this.notificationClicks=this.sw.eventsOfType("NOTIFICATION_CLICK").pipe(A(r=>r.data)),this.notificationCloses=this.sw.eventsOfType("NOTIFICATION_CLOSE").pipe(A(r=>r.data)),this.pushSubscriptionChanges=this.sw.eventsOfType("PUSH_SUBSCRIPTION_CHANGE").pipe(A(r=>r.data)),this.pushManager=this.sw.registration.pipe(A(r=>r.pushManager));let n=this.pushManager.pipe(O(r=>r.getSubscription()));this.subscription=new _(r=>{let i=n.subscribe(r),s=this.subscriptionChanges.subscribe(r);return()=>{i.unsubscribe(),s.unsubscribe()}})}requestSubscription(o){if(!this.sw.isEnabled||this.pushManager===null)return Promise.reject(new Error(Te));let n={userVisibleOnly:!0},r=this.decodeBase64(o.serverPublicKey.replace(/_/g,"/").replace(/-/g,"+")),i=new Uint8Array(new ArrayBuffer(r.length));for(let s=0;s<r.length;s++)i[s]=r.charCodeAt(s);return n.applicationServerKey=i,new Promise((s,a)=>{this.pushManager.pipe(O(g=>g.subscribe(n)),P(1)).subscribe({next:g=>{this.subscriptionChanges.next(g),s(g)},error:a})})}unsubscribe(){if(!this.sw.isEnabled)return Promise.reject(new Error(Te));let o=n=>{if(n===null)throw new H(5602,!1);return n.unsubscribe().then(r=>{if(!r)throw new H(5603,!1);this.subscriptionChanges.next(null)})};return new Promise((n,r)=>{this.subscription.pipe(P(1),O(o)).subscribe({next:n,error:r})})}decodeBase64(o){return atob(o)}static \u0275fac=function(n){return new(n||e)(C(X))};static \u0275prov=R({token:e,factory:e.\u0275fac})}return e})(),In=(()=>{class e{sw;versionUpdates;unrecoverable;get isEnabled(){return this.sw.isEnabled}ongoingCheckForUpdate=null;constructor(o){if(this.sw=o,!o.isEnabled){this.versionUpdates=G,this.unrecoverable=G;return}this.versionUpdates=this.sw.eventsOfType(["VERSION_DETECTED","VERSION_INSTALLATION_FAILED","VERSION_READY","NO_NEW_VERSION_DETECTED"]),this.unrecoverable=this.sw.eventsOfType("UNRECOVERABLE_STATE")}checkForUpdate(){if(!this.sw.isEnabled)return Promise.reject(new Error(Te));if(this.ongoingCheckForUpdate)return this.ongoingCheckForUpdate;let o=this.sw.generateNonce();return this.ongoingCheckForUpdate=this.sw.postMessageWithOperation("CHECK_FOR_UPDATES",{nonce:o},o).finally(()=>{this.ongoingCheckForUpdate=null}),this.ongoingCheckForUpdate}activateUpdate(){if(!this.sw.isEnabled)return Promise.reject(new H(5601,!1));let o=this.sw.generateNonce();return this.sw.postMessageWithOperation("ACTIVATE_UPDATE",{nonce:o},o)}static \u0275fac=function(n){return new(n||e)(C(X))};static \u0275prov=R({token:e,factory:e.\u0275fac})}return e})();var Ft=new U("");function bn(){let e=l(ee);if(!("serviceWorker"in navigator&&e.enabled!==!1))return;let t=l(Ft),o=l(ie),n=l(Ae);o.runOutsideAngular(()=>{let r=navigator.serviceWorker,i=()=>r.controller?.postMessage({action:"INITIALIZE"});r.addEventListener("controllerchange",i),n.onDestroy(()=>{r.removeEventListener("controllerchange",i)})}),o.runOutsideAngular(()=>{let r,{registrationStrategy:i}=e;if(typeof i=="function")r=new Promise(s=>i().subscribe(()=>s()));else{let[s,...a]=(i||"registerWhenStable:30000").split(":");switch(s){case"registerImmediately":r=Promise.resolve();break;case"registerWithDelay":r=Dt(+a[0]||0);break;case"registerWhenStable":r=Promise.race([n.whenStable(),Dt(+a[0])]);break;default:throw new H(5600,!1)}}r.then(()=>{n.destroyed||navigator.serviceWorker.register(t,{scope:e.scope,updateViaCache:e.updateViaCache,type:e.type}).catch(s=>console.error(st(5604,!1)))})})}function Dt(e){return new Promise(t=>setTimeout(t,e))}function wn(e,t){return new X(e.enabled!==!1?navigator.serviceWorker:void 0,t)}var ee=class{enabled;updateViaCache;type;scope;registrationStrategy};function jt(e,t={}){return Y([Cn,In,{provide:Ft,useValue:e},{provide:ee,useValue:t},{provide:X,useFactory:wn,deps:[ee,at]},ft(bn)])}var On={dispatch:!0,functional:!1,useEffectsErrorHandler:!0},ge="__@ngrx/effects_create__";function L(e,t={}){let o=t.functional?e:e(),n=d(d({},On),t);return Object.defineProperty(o,ge,{value:n}),o}function Nn(e){return Object.getOwnPropertyNames(e).filter(n=>e[n]&&e[n].hasOwnProperty(ge)?e[n][ge].hasOwnProperty("dispatch"):!1).map(n=>{let r=e[n][ge];return d({propertyName:n},r)})}function Tn(e){return Nn(e)}function kt(e){return Object.getPrototypeOf(e)}function xn(e){return!!e.constructor&&e.constructor.name!=="Object"&&e.constructor.name!=="Function"}function Pt(e){return typeof e=="function"}function Dn(e){return e.filter(Pt)}function Rn(e,t,o){let n=kt(e),i=!!n&&n.constructor.name!=="Object"?n.constructor.name:null,s=Tn(e).map(({propertyName:a,dispatch:g,useEffectsErrorHandler:f})=>{let u=typeof e[a]=="function"?e[a]():e[a],c=f?o(u,t):u;return g===!1?c.pipe(Je()):c.pipe(et()).pipe(A(T=>({effect:e[a],notification:T,propertyName:a,sourceName:i,sourceInstance:e})))});return Z(...s)}var Mn=10;function _t(e,t,o=Mn){return e.pipe(W(n=>(t&&t.handleError(n),o<=1?e:_t(e,t,o-1))))}var $=(()=>{let t=class t extends _{constructor(n){super(),n&&(this.source=n)}lift(n){let r=new t;return r.source=this,r.operator=n,r}};t.\u0275fac=function(r){return new(r||t)(C(ue))},t.\u0275prov=R({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();function B(...e){return D(t=>e.some(o=>typeof o=="string"?o===t.type:o.type===t.type))}var Fn=new U("@ngrx/effects Effects Error Handler",{providedIn:"root",factory:()=>_t}),jn="@ngrx/effects/init",kn=Et(jn);function Pn(e,t){if(e.notification.kind==="N"){let o=e.notification.value;!_n(o)&&t.handleError(new Error(`Effect ${Un(e)} dispatched an invalid action: ${Ln(o)}`))}}function _n(e){return typeof e!="function"&&e&&e.type&&typeof e.type=="string"}function Un({propertyName:e,sourceInstance:t,sourceName:o}){let n=typeof t[e]=="function";return!!o?`"${o}.${String(e)}${n?"()":""}"`:`"${String(e)}()"`}function Ln(e){try{return JSON.stringify(e)}catch{return e}}var $n="ngrxOnIdentifyEffects";function Bn(e){return xe(e,$n)}var zn="ngrxOnRunEffects";function Gn(e){return xe(e,zn)}var Vn="ngrxOnInitEffects";function Wn(e){return xe(e,Vn)}function xe(e,t){return e&&t in e&&typeof e[t]=="function"}var Ut=(()=>{let t=class t extends Q{constructor(n,r){super(),this.errorHandler=n,this.effectsErrorHandler=r}addEffects(n){this.next(n)}toActions(){return this.pipe(be(n=>xn(n)?kt(n):n),Ie(n=>n.pipe(be(Hn))),Ie(n=>{let r=n.pipe(qe(s=>Kn(this.errorHandler,this.effectsErrorHandler)(s)),A(s=>(Pn(s,this.errorHandler),s.notification)),D(s=>s.kind==="N"&&s.value!=null),Xe()),i=n.pipe(P(1),D(Wn),A(s=>s.ngrxOnInitEffects()));return Z(r,i)}))}};t.\u0275fac=function(r){return new(r||t)(C(se),C(Fn))},t.\u0275prov=R({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();function Hn(e){return Bn(e)?e.ngrxOnIdentifyEffects():""}function Kn(e,t){return o=>{let n=Rn(o,e,t);return Gn(o)?o.ngrxOnRunEffects(n):n}}var Qn=(()=>{let t=class t{get isStarted(){return!!this.effectsSubscription}constructor(n,r){this.effectSources=n,this.store=r,this.effectsSubscription=null}start(){this.effectsSubscription||(this.effectsSubscription=this.effectSources.toActions().subscribe(this.store))}ngOnDestroy(){this.effectsSubscription&&(this.effectsSubscription.unsubscribe(),this.effectsSubscription=null)}};t.\u0275fac=function(r){return new(r||t)(C(Ut),C(de))},t.\u0275prov=R({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();function Lt(...e){let t=e.flat(),o=Dn(t);return Y([o,it(()=>{l(Ct),l(It,{optional:!0});let n=l(Qn),r=l(Ut),i=!n.isStarted;i&&n.start();for(let s of t){let a=Pt(s)?l(s):s;r.addEffects(a)}i&&l(de).dispatch(kn())})])}var ne="PERFORM_ACTION",Zn="REFRESH",Wt="RESET",Ht="ROLLBACK",Kt="COMMIT",Qt="SWEEP",Zt="TOGGLE_ACTION",Yn="SET_ACTIONS_ACTIVE",Yt="JUMP_TO_STATE",Jt="JUMP_TO_ACTION",ze="IMPORT_STATE",Xt="LOCK_CHANGES",qt="PAUSE_RECORDING",q=class{constructor(t,o){if(this.action=t,this.timestamp=o,this.type=ne,typeof t.type>"u")throw new Error('Actions may not have an undefined "type" property. Have you misspelled a constant?')}},De=class{constructor(){this.type=Zn}},Re=class{constructor(t){this.timestamp=t,this.type=Wt}},Me=class{constructor(t){this.timestamp=t,this.type=Ht}},Fe=class{constructor(t){this.timestamp=t,this.type=Kt}},je=class{constructor(){this.type=Qt}},ke=class{constructor(t){this.id=t,this.type=Zt}};var Pe=class{constructor(t){this.index=t,this.type=Yt}},_e=class{constructor(t){this.actionId=t,this.type=Jt}},Ue=class{constructor(t){this.nextLiftedState=t,this.type=ze}},Le=class{constructor(t){this.status=t,this.type=Xt}},$e=class{constructor(t){this.status=t,this.type=qt}};var Se=new U("@ngrx/store-devtools Options"),$t=new U("@ngrx/store-devtools Initial Config");function en(){return null}var Jn="NgRx Store DevTools";function Xn(e){let t={maxAge:!1,monitor:en,actionSanitizer:void 0,stateSanitizer:void 0,name:Jn,serialize:!1,logOnly:!1,autoPause:!1,trace:!1,traceLimit:75,features:{pause:!0,lock:!0,persist:!0,export:!0,import:"custom",jump:!0,skip:!0,reorder:!0,dispatch:!0,test:!0},connectInZone:!1},o=typeof e=="function"?e():e,n=o.logOnly?{pause:!0,export:!0,test:!0}:!1,r=o.features||n||t.features;r.import===!0&&(r.import="custom");let i=Object.assign({},t,{features:r},o);if(i.maxAge&&i.maxAge<2)throw new Error(`Devtools 'maxAge' cannot be less than 2, got ${i.maxAge}`);return i}function Bt(e,t){return e.filter(o=>t.indexOf(o)<0)}function tn(e){let{computedStates:t,currentStateIndex:o}=e;if(o>=t.length){let{state:r}=t[t.length-1];return r}let{state:n}=t[o];return n}function te(e){return new q(e,+Date.now())}function qn(e,t){return Object.keys(t).reduce((o,n)=>{let r=Number(n);return o[r]=nn(e,t[r],r),o},{})}function nn(e,t,o){return p(d({},t),{action:e(t.action,o)})}function er(e,t){return t.map((o,n)=>({state:rn(e,o.state,n),error:o.error}))}function rn(e,t,o){return e(t,o)}function on(e){return e.predicate||e.actionsSafelist||e.actionsBlocklist}function tr(e,t,o,n){let r=[],i={},s=[];return e.stagedActionIds.forEach((a,g)=>{let f=e.actionsById[a];f&&(g&&Ge(e.computedStates[g],f,t,o,n)||(i[a]=f,r.push(a),s.push(e.computedStates[g])))}),p(d({},e),{stagedActionIds:r,actionsById:i,computedStates:s})}function Ge(e,t,o,n,r){let i=o&&!o(e,t.action),s=n&&!t.action.type.match(n.map(g=>zt(g)).join("|")),a=r&&t.action.type.match(r.map(g=>zt(g)).join("|"));return i||s||a}function zt(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function sn(e){return{ngZone:e?l(ie):null,connectInZone:e}}var Ee=(()=>{let t=class t extends ce{};t.\u0275fac=(()=>{let n;return function(i){return(n||(n=ut(t)))(i||t)}})(),t.\u0275prov=R({token:t,factory:t.\u0275fac});let e=t;return e})(),he={START:"START",DISPATCH:"DISPATCH",STOP:"STOP",ACTION:"ACTION"},Be=new U("@ngrx/store-devtools Redux Devtools Extension"),an=(()=>{let t=class t{constructor(n,r,i){this.config=r,this.dispatcher=i,this.zoneConfig=sn(this.config.connectInZone),this.devtoolsExtension=n,this.createActionStreams()}notify(n,r){if(this.devtoolsExtension)if(n.type===ne){if(r.isLocked||r.isPaused)return;let i=tn(r);if(on(this.config)&&Ge(i,n,this.config.predicate,this.config.actionsSafelist,this.config.actionsBlocklist))return;let s=this.config.stateSanitizer?rn(this.config.stateSanitizer,i,r.currentStateIndex):i,a=this.config.actionSanitizer?nn(this.config.actionSanitizer,n,r.nextActionId):n;this.sendToReduxDevtools(()=>this.extensionConnection.send(a,s))}else{let i=p(d({},r),{stagedActionIds:r.stagedActionIds,actionsById:this.config.actionSanitizer?qn(this.config.actionSanitizer,r.actionsById):r.actionsById,computedStates:this.config.stateSanitizer?er(this.config.stateSanitizer,r.computedStates):r.computedStates});this.sendToReduxDevtools(()=>this.devtoolsExtension.send(null,i,this.getExtensionConfig(this.config)))}}createChangesObservable(){return this.devtoolsExtension?new _(n=>{let r=this.zoneConfig.connectInZone?this.zoneConfig.ngZone.runOutsideAngular(()=>this.devtoolsExtension.connect(this.getExtensionConfig(this.config))):this.devtoolsExtension.connect(this.getExtensionConfig(this.config));return this.extensionConnection=r,r.init(),r.subscribe(i=>n.next(i)),r.unsubscribe}):He}createActionStreams(){let n=this.createChangesObservable().pipe(nt()),r=n.pipe(D(u=>u.type===he.START)),i=n.pipe(D(u=>u.type===he.STOP)),s=n.pipe(D(u=>u.type===he.DISPATCH),A(u=>this.unwrapAction(u.payload)),Ze(u=>u.type===ze?this.dispatcher.pipe(D(c=>c.type===Ne),Qe(1e3),Ye(1e3),A(()=>u),W(()=>w(u)),P(1)):w(u))),g=n.pipe(D(u=>u.type===he.ACTION),A(u=>this.unwrapAction(u.payload))).pipe(oe(i)),f=s.pipe(oe(i));this.start$=r.pipe(oe(i)),this.actions$=this.start$.pipe(O(()=>g)),this.liftedActions$=this.start$.pipe(O(()=>f))}unwrapAction(n){return typeof n=="string"?(0,eval)(`(${n})`):n}getExtensionConfig(n){let r={name:n.name,features:n.features,serialize:n.serialize,autoPause:n.autoPause??!1,trace:n.trace??!1,traceLimit:n.traceLimit??75};return n.maxAge!==!1&&(r.maxAge=n.maxAge),r}sendToReduxDevtools(n){try{n()}catch(r){console.warn("@ngrx/store-devtools: something went wrong inside the redux devtools",r)}}};t.\u0275fac=function(r){return new(r||t)(C(Be),C(Se),C(Ee))},t.\u0275prov=R({token:t,factory:t.\u0275fac});let e=t;return e})(),me={type:Oe},nr="@ngrx/store-devtools/recompute",rr={type:nr};function cn(e,t,o,n,r){if(n)return{state:o,error:"Interrupted by an error up the chain"};let i=o,s;try{i=e(o,t)}catch(a){s=a.toString(),r.handleError(a)}return{state:i,error:s}}function ye(e,t,o,n,r,i,s,a,g){if(t>=e.length&&e.length===i.length)return e;let f=e.slice(0,t),u=i.length-(g?1:0);for(let c=t;c<u;c++){let y=i[c],T=r[y].action,m=f[c-1],h=m?m.state:n,j=m?m.error:void 0,k=s.indexOf(y)>-1?m:cn(o,T,h,j,a);f.push(k)}return g&&f.push(e[e.length-1]),f}function or(e,t){return{monitorState:t(void 0,{}),nextActionId:1,actionsById:{0:te(me)},stagedActionIds:[0],skippedActionIds:[],committedState:e,currentStateIndex:0,computedStates:[],isLocked:!1,isPaused:!1}}function sr(e,t,o,n,r={}){return i=>(s,a)=>{let{monitorState:g,actionsById:f,nextActionId:u,stagedActionIds:c,skippedActionIds:y,committedState:T,currentStateIndex:m,computedStates:h,isLocked:j,isPaused:x}=s||t;s||(f=Object.create(f));function k(b){let v=b,z=c.slice(1,v+1);for(let M=0;M<z.length;M++)if(h[M+1].error){v=M,z=c.slice(1,v+1);break}else delete f[z[M]];y=y.filter(M=>z.indexOf(M)===-1),c=[0,...c.slice(v+1)],T=h[v].state,h=h.slice(v),m=m>v?m-v:0}function K(){f={0:te(me)},u=1,c=[0],y=[],T=h[m].state,m=0,h=[]}let S=0;switch(a.type){case Xt:{j=a.status,S=1/0;break}case qt:{x=a.status,x?(c=[...c,u],f[u]=new q({type:"@ngrx/devtools/pause"},+Date.now()),u++,S=c.length-1,h=h.concat(h[h.length-1]),m===c.length-2&&m++,S=1/0):K();break}case Wt:{f={0:te(me)},u=1,c=[0],y=[],T=e,m=0,h=[];break}case Kt:{K();break}case Ht:{f={0:te(me)},u=1,c=[0],y=[],m=0,h=[];break}case Zt:{let{id:b}=a;y.indexOf(b)===-1?y=[b,...y]:y=y.filter(z=>z!==b),S=c.indexOf(b);break}case Yn:{let{start:b,end:v,active:z}=a,M=[];for(let Ce=b;Ce<v;Ce++)M.push(Ce);z?y=Bt(y,M):y=[...y,...M],S=c.indexOf(b);break}case Yt:{m=a.index,S=1/0;break}case Jt:{let b=c.indexOf(a.actionId);b!==-1&&(m=b),S=1/0;break}case Qt:{c=Bt(c,y),y=[],m=Math.min(m,c.length-1);break}case ne:{if(j)return s||t;if(x||s&&Ge(s.computedStates[m],a,r.predicate,r.actionsSafelist,r.actionsBlocklist)){let v=h[h.length-1];h=[...h.slice(0,-1),cn(i,a.action,v.state,v.error,o)],S=1/0;break}r.maxAge&&c.length===r.maxAge&&k(1),m===c.length-1&&m++;let b=u++;f[b]=a,c=[...c,b],S=c.length-1;break}case ze:{({monitorState:g,actionsById:f,nextActionId:u,stagedActionIds:c,skippedActionIds:y,committedState:T,currentStateIndex:m,computedStates:h,isLocked:j,isPaused:x}=a.nextLiftedState);break}case Oe:{S=0,r.maxAge&&c.length>r.maxAge&&(h=ye(h,S,i,T,f,c,y,o,x),k(c.length-r.maxAge),S=1/0);break}case Ne:{if(h.filter(v=>v.error).length>0)S=0,r.maxAge&&c.length>r.maxAge&&(h=ye(h,S,i,T,f,c,y,o,x),k(c.length-r.maxAge),S=1/0);else{if(!x&&!j){m===c.length-1&&m++;let v=u++;f[v]=new q(a,+Date.now()),c=[...c,v],S=c.length-1,h=ye(h,S,i,T,f,c,y,o,x)}h=h.map(v=>p(d({},v),{state:i(v.state,rr)})),m=c.length-1,r.maxAge&&c.length>r.maxAge&&k(c.length-r.maxAge),S=1/0}break}default:{S=1/0;break}}return h=ye(h,S,i,T,f,c,y,o,x),g=n(g,a),{monitorState:g,actionsById:f,nextActionId:u,stagedActionIds:c,skippedActionIds:y,committedState:T,currentStateIndex:m,computedStates:h,isLocked:j,isPaused:x}}}var Gt=(()=>{let t=class t{constructor(n,r,i,s,a,g,f,u){let c=or(f,u.monitor),y=sr(f,c,g,u.monitor,u),T=Z(Z(r.asObservable().pipe(rt(1)),s.actions$).pipe(A(te)),n,s.liftedActions$).pipe(Ke(We)),m=i.pipe(A(y)),h=sn(u.connectInZone),j=new Ve(1);this.liftedStateSubscription=T.pipe(ot(m),Vt(h),tt(({state:K},[S,b])=>{let v=b(K,S);return S.type!==ne&&on(u)&&(v=tr(v,u.predicate,u.actionsSafelist,u.actionsBlocklist)),s.notify(S,v),{state:v,action:S}},{state:c,action:null})).subscribe(({state:K,action:S})=>{if(j.next(K),S.type===ne){let b=S.action;a.next(b)}}),this.extensionStartSubscription=s.start$.pipe(Vt(h)).subscribe(()=>{this.refresh()});let x=j.asObservable(),k=x.pipe(A(tn));Object.defineProperty(k,"state",{value:St(k,{manualCleanup:!0,requireSync:!0})}),this.dispatcher=n,this.liftedState=x,this.state=k}ngOnDestroy(){this.liftedStateSubscription.unsubscribe(),this.extensionStartSubscription.unsubscribe()}dispatch(n){this.dispatcher.next(n)}next(n){this.dispatcher.next(n)}error(n){}complete(){}performAction(n){this.dispatch(new q(n,+Date.now()))}refresh(){this.dispatch(new De)}reset(){this.dispatch(new Re(+Date.now()))}rollback(){this.dispatch(new Me(+Date.now()))}commit(){this.dispatch(new Fe(+Date.now()))}sweep(){this.dispatch(new je)}toggleAction(n){this.dispatch(new ke(n))}jumpToAction(n){this.dispatch(new _e(n))}jumpToState(n){this.dispatch(new Pe(n))}importState(n){this.dispatch(new Ue(n))}lockChanges(n){this.dispatch(new Le(n))}pauseRecording(n){this.dispatch(new $e(n))}};t.\u0275fac=function(r){return new(r||t)(C(Ee),C(ce),C(bt),C(an),C(ue),C(se),C(vt),C(Se))},t.\u0275prov=R({token:t,factory:t.\u0275fac});let e=t;return e})();function Vt({ngZone:e,connectInZone:t}){return o=>t?new _(n=>o.subscribe({next:r=>e.run(()=>n.next(r)),error:r=>e.run(()=>n.error(r)),complete:()=>e.run(()=>n.complete())})):o}var ir=new U("@ngrx/store-devtools Is Devtools Extension or Monitor Present");function ar(e,t){return!!e||t.monitor!==en}function cr(){let e="__REDUX_DEVTOOLS_EXTENSION__";return typeof window=="object"&&typeof window[e]<"u"?window[e]:null}function ur(e){return e.state}function un(e={}){return Y([an,Ee,Gt,{provide:$t,useValue:e},{provide:ir,deps:[Be,Se],useFactory:ar},{provide:Be,useFactory:cr},{provide:Se,deps:[$t],useFactory:Xn},{provide:At,deps:[Gt],useFactory:ur},{provide:wt,useExisting:Ee}])}var dr={notes:[],categories:[],filteredNotes:[],searchQuery:"",selectedCategoryId:null,loading:!1,error:null,lastSyncedAt:null,isSyncing:!1,hasUnsyncedChanges:!1};function V(e,t,o){let n=[...e];if(o&&(n=n.filter(r=>r.categoryId===o)),t.trim()){let r=t.toLowerCase();n=n.filter(i=>i.title.toLowerCase().includes(r)||i.content.toLowerCase().includes(r)||i.tags?.some(s=>s.toLowerCase().includes(r)))}return n}var dn=Nt(dr,N(E.loadNotes,e=>p(d({},e),{loading:!0,error:null})),N(E.loadNotesSuccess,(e,{notes:t})=>p(d({},e),{notes:t,filteredNotes:V(t,e.searchQuery,e.selectedCategoryId),loading:!1})),N(E.loadNotesFailure,(e,{error:t})=>p(d({},e),{error:t,loading:!1})),N(E.createNoteSuccess,(e,{note:t})=>{let o=[...e.notes,p(d({},t),{needsSync:!0})];return p(d({},e),{notes:o,filteredNotes:V(o,e.searchQuery,e.selectedCategoryId),hasUnsyncedChanges:!0})}),N(E.updateNoteSuccess,(e,{note:t})=>{let o=e.notes.map(n=>n.id===t.id?p(d({},t),{needsSync:!0}):n);return p(d({},e),{notes:o,filteredNotes:V(o,e.searchQuery,e.selectedCategoryId),hasUnsyncedChanges:!0})}),N(E.deleteNoteSuccess,(e,{id:t})=>{let o=e.notes.filter(n=>n.id!==t);return p(d({},e),{notes:o,filteredNotes:V(o,e.searchQuery,e.selectedCategoryId),hasUnsyncedChanges:!0})}),N(E.searchNotes,(e,{query:t})=>p(d({},e),{searchQuery:t,filteredNotes:V(e.notes,t,e.selectedCategoryId)})),N(E.filterByCategory,(e,{categoryId:t})=>p(d({},e),{selectedCategoryId:t,filteredNotes:V(e.notes,e.searchQuery,t)})),N(I.loadCategoriesSuccess,(e,{categories:t})=>p(d({},e),{categories:t})),N(I.createCategorySuccess,(e,{category:t})=>p(d({},e),{categories:[...e.categories,p(d({},t),{needsSync:!0})],hasUnsyncedChanges:!0})),N(I.updateCategorySuccess,(e,{category:t})=>{let o=e.categories.map(r=>r.id===t.id?p(d({},t),{needsSync:!0}):r),n=e.notes.map(r=>r.categoryId===t.id?p(d({},r),{categoryName:t.name}):r);return p(d({},e),{categories:o,notes:n,filteredNotes:V(n,e.searchQuery,e.selectedCategoryId),hasUnsyncedChanges:!0})}),N(I.deleteCategorySuccess,(e,{id:t})=>p(d({},e),{categories:e.categories.filter(o=>o.id!==t),hasUnsyncedChanges:!0})),N(E.startSync,e=>p(d({},e),{isSyncing:!0})),N(E.syncSuccess,(e,{notes:t,categories:o})=>{let n=new Date,r=t.map(s=>p(d({},s),{lastSyncedAt:n,needsSync:!1})),i=o.map(s=>p(d({},s),{lastSyncedAt:n,needsSync:!1}));return p(d({},e),{notes:r,categories:i,filteredNotes:V(r,e.searchQuery,e.selectedCategoryId),lastSyncedAt:n,isSyncing:!1,hasUnsyncedChanges:!1})}),N(E.syncFailure,e=>p(d({},e),{isSyncing:!1})));var F=class e{notesSignal=we([]);categoriesSignal=we([]);notes=this.notesSignal.asReadonly();categories=this.categoriesSignal.asReadonly();NOTES_KEY="notes_app_notes";CATEGORIES_KEY="notes_app_categories";constructor(){this.loadFromStorage(),this.initializeDefaultCategories()}loadFromStorage(){let t=localStorage.getItem(this.NOTES_KEY),o=localStorage.getItem(this.CATEGORIES_KEY);if(t){let n=JSON.parse(t).map(r=>p(d({},r),{createdAt:new Date(r.createdAt),updatedAt:new Date(r.updatedAt),lastSyncedAt:r.lastSyncedAt?new Date(r.lastSyncedAt):void 0,needsSync:r.needsSync??!1}));this.notesSignal.set(n)}if(o){let n=JSON.parse(o).map(r=>p(d({},r),{createdAt:new Date(r.createdAt),lastSyncedAt:r.lastSyncedAt?new Date(r.lastSyncedAt):void 0,needsSync:r.needsSync??!1}));this.categoriesSignal.set(n)}}saveToStorage(){localStorage.setItem(this.NOTES_KEY,JSON.stringify(this.notesSignal())),localStorage.setItem(this.CATEGORIES_KEY,JSON.stringify(this.categoriesSignal()))}initializeDefaultCategories(){if(this.categoriesSignal().length===0){let t=[{id:"1",name:"Personal",color:"#4CAF50",createdAt:new Date},{id:"2",name:"Work",color:"#2196F3",createdAt:new Date},{id:"3",name:"Ideas",color:"#FF9800",createdAt:new Date},{id:"4",name:"Shopping",color:"#9C27B0",createdAt:new Date}];this.categoriesSignal.set(t),this.saveToStorage()}}getNoteById(t){return this.notesSignal().find(o=>o.id===t)}getNotesByCategory(t){return this.notesSignal().filter(o=>o.categoryId===t)}searchNotes(t){let o=t.toLowerCase();return this.notesSignal().filter(n=>n.title.toLowerCase().includes(o)||n.content.toLowerCase().includes(o)||n.tags?.some(r=>r.toLowerCase().includes(o)))}createNote(t){let o=p(d({},t),{id:this.generateId(),createdAt:new Date,updatedAt:new Date,needsSync:!0});return this.notesSignal.update(n=>[...n,o]),this.saveToStorage(),o}updateNote(t,o){let n=this.getNoteById(t);if(!n)return null;let r=p(d(d({},n),o),{id:t,updatedAt:new Date,needsSync:!0});return this.notesSignal.update(i=>i.map(s=>s.id===t?r:s)),this.saveToStorage(),r}deleteNote(t){return this.notesSignal().some(n=>n.id===t)?(this.notesSignal.update(n=>n.filter(r=>r.id!==t)),this.saveToStorage(),!0):!1}getCategoryById(t){return this.categoriesSignal().find(o=>o.id===t)}createCategory(t){let o=p(d({},t),{id:this.generateId(),createdAt:new Date,needsSync:!0});return this.categoriesSignal.update(n=>[...n,o]),this.saveToStorage(),o}updateCategory(t,o){let n=this.getCategoryById(t);if(!n)return null;let r=p(d(d({},n),o),{id:t,needsSync:!0});return this.categoriesSignal.update(i=>i.map(s=>s.id===t?r:s)),this.notesSignal.update(i=>i.map(s=>s.categoryId===t?p(d({},s),{categoryName:r.name,needsSync:!0}):s)),this.saveToStorage(),r}deleteCategory(t){return this.notesSignal().some(r=>r.categoryId===t)?!1:this.categoriesSignal().some(r=>r.id===t)?(this.categoriesSignal.update(r=>r.filter(i=>i.id!==t)),this.saveToStorage(),!0):!1}generateId(){return Date.now().toString(36)+Math.random().toString(36).substr(2)}static \u0275fac=function(o){return new(o||e)};static \u0275prov=R({token:e,factory:e.\u0275fac,providedIn:"root"})};var fn=L((e=l($),t=l(F))=>e.pipe(B(E.loadNotes),O(()=>{try{let o=t.notes(),n=t.categories(),r=o.map(i=>{let s=n.find(a=>a.id===i.categoryId);return p(d({},i),{categoryName:s?.name})});return w(E.loadNotesSuccess({notes:r}))}catch(o){return w(E.loadNotesFailure({error:o.message||"Failed to load notes"}))}}),W(o=>w(E.loadNotesFailure({error:o.message||"Failed to load notes"})))),{functional:!0}),ln=L((e=l($),t=l(F),o=l(fe),n=l(J))=>e.pipe(B(E.createNote),O(i=>re(null,[i],function*({note:r}){try{let s=t.createNote(r),a=t.categories(),g=a.find(c=>c.id===s.categoryId),f=p(d({},s),{categoryName:g?.name,needsSync:!0}),u=E.createNoteSuccess({note:f});return n.isSignedIn()&&o.syncToDrive(t.notes(),a).catch(c=>{console.error("Failed to sync to Drive:",c)}),u}catch(s){return E.createNoteFailure({error:s.message})}}))),{functional:!0}),pn=L((e=l($),t=l(F),o=l(fe),n=l(J))=>e.pipe(B(E.updateNote),O(s=>re(null,[s],function*({id:r,updates:i}){try{let a=t.updateNote(r,i);if(a){let g=t.categories(),f=g.find(y=>y.id===a.categoryId),u=p(d({},a),{categoryName:f?.name,needsSync:!0}),c=E.updateNoteSuccess({note:u});return n.isSignedIn()&&o.syncToDrive(t.notes(),g).catch(y=>{console.error("Failed to sync to Drive:",y)}),c}return E.updateNoteFailure({error:"Note not found"})}catch(a){return E.updateNoteFailure({error:a.message})}}))),{functional:!0}),gn=L((e=l($),t=l(F),o=l(fe),n=l(J))=>e.pipe(B(E.deleteNote),O(i=>re(null,[i],function*({id:r}){try{if(t.deleteNote(r)){let a=E.deleteNoteSuccess({id:r});return n.isSignedIn()&&o.syncToDrive(t.notes(),t.categories()).catch(g=>{console.error("Failed to sync to Drive:",g)}),a}return E.deleteNoteFailure({error:"Note not found"})}catch(s){return E.deleteNoteFailure({error:s.message})}}))),{functional:!0}),hn=L((e=l($),t=l(F))=>e.pipe(B(I.loadCategories),O(()=>{try{let o=t.categories();return w(I.loadCategoriesSuccess({categories:o}))}catch(o){return w(I.loadCategoriesFailure({error:o.message||"Failed to load categories"}))}}),W(o=>w(I.loadCategoriesFailure({error:o.message||"Failed to load categories"})))),{functional:!0}),yn=L((e=l($),t=l(F))=>e.pipe(B(I.createCategory),O(({category:o})=>{try{let n=t.createCategory(o);return w(I.createCategorySuccess({category:n}))}catch(n){return w(I.createCategoryFailure({error:n.message}))}})),{functional:!0}),mn=L((e=l($),t=l(F))=>e.pipe(B(I.updateCategory),O(({id:o,updates:n})=>{try{let r=t.updateCategory(o,n);return r?w(I.updateCategorySuccess({category:r})):w(I.updateCategoryFailure({error:"Category not found"}))}catch(r){return w(I.updateCategoryFailure({error:r.message}))}})),{functional:!0}),Sn=L((e=l($),t=l(F))=>e.pipe(B(I.deleteCategory),O(({id:o})=>{try{return t.deleteCategory(o)?w(I.deleteCategorySuccess({id:o})):w(I.deleteCategoryFailure({error:"Category cannot be deleted"}))}catch(n){return w(I.deleteCategoryFailure({error:n.message}))}})),{functional:!0});var En=()=>[Ot({notes:dn}),Lt({loadNotes$:fn,createNote$:ln,updateNote$:pn,deleteNote$:gn,loadCategories$:hn,createCategory$:yn,updateCategory$:mn,deleteCategory$:Sn}),un({maxAge:25,logOnly:!ae(),autoPause:!0,trace:!1,traceLimit:75})];var vn={providers:[ct(),pt({eventCoalescing:!0}),mt(xt),jt("ngsw-worker.js",{enabled:!ae(),registrationStrategy:"registerWhenStable:30000"}),...En()]};var ve=class e{themeService=l(Tt);ngOnInit(){}static \u0275fac=function(o){return new(o||e)};static \u0275cmp=dt({type:e,selectors:[["app-root"]],decls:1,vars:0,template:function(o,n){o&1&&lt(0,"router-outlet")},dependencies:[ht],encapsulation:2})};gt(ve,vn).catch(e=>console.error(e));
