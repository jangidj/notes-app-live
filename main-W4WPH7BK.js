import{a as At}from"./chunk-74LLULWK.js";import{a as v,b as I}from"./chunk-LOCZZ25B.js";import{a as fe}from"./chunk-A7V3V4Y2.js";import{a as St,b as Et,f as Te,g as ce,h as vt,i as Ct,j as It,k as bt,l as Ot,m as Ne,n as ue,o as wt,p as de,s as Tt,t as R,u as Nt}from"./chunk-OODGCCPB.js";import{$a as gt,A as et,C as tt,D as rt,E as nt,F as T,G as oe,H as ot,I as W,J as it,L as D,N as L,O as C,P as f,Q as Y,R as st,Sa as pt,W as at,Xa as ae,Y as ie,Z as ct,_ as Oe,a as l,aa as ut,b as h,bb as ht,c as ne,cb as mt,d as _,e as Q,ea as se,fb as yt,g as Ve,gb as J,h as We,i as He,ia as dt,j as Ke,k as O,l as Qe,m as w,ma as ft,n as Ie,na as we,o as Z,p as G,q as x,r as V,s as Ze,t as Ye,u as P,v as Je,w as Xe,y as qe,ya as lt,z as be}from"./chunk-FCD34S5F.js";var le=()=>{let e=f(J),t=f(mt);return e.isSignedIn()?!0:(t.navigate(["/login"]),!1)},xt=[{path:"login",loadComponent:()=>import("./chunk-4WTUTALI.js").then(e=>e.Login)},{path:"",loadComponent:()=>import("./chunk-BXJDXHXU.js").then(e=>e.Dashboard),canActivate:[le]},{path:"note/:id",loadComponent:()=>import("./chunk-CWUWQ4EX.js").then(e=>e.NoteEditor),canActivate:[le]},{path:"categories",loadComponent:()=>import("./chunk-MFFKLJI2.js").then(e=>e.CategoriesPage),canActivate:[le]},{path:"profile",loadComponent:()=>import("./chunk-SXLACWEP.js").then(e=>e.Profile),canActivate:[le]},{path:"**",redirectTo:""}];var Ae="Service workers are disabled or not supported by this browser",X=class{serviceWorker;worker;registration;events;constructor(t,o){if(this.serviceWorker=t,!t)this.worker=this.events=this.registration=new _(r=>r.error(new W(5601,!1)));else{let r=null,n=new Q;this.worker=new _(d=>(r!==null&&d.next(r),n.subscribe(u=>d.next(u))));let i=()=>{let{controller:d}=t;d!==null&&(r=d,n.next(r))};t.addEventListener("controllerchange",i),i(),this.registration=this.worker.pipe(T(()=>t.getRegistration().then(d=>{if(!d)throw new W(5601,!1);return d})));let s=new Q;this.events=s.asObservable();let a=d=>{let{data:u}=d;u?.type&&s.next(u)};t.addEventListener("message",a),o?.get(we,null,{optional:!0})?.onDestroy(()=>{t.removeEventListener("controllerchange",i),t.removeEventListener("message",a)})}}postMessage(t,o){return new Promise(r=>{this.worker.pipe(P(1)).subscribe(n=>{n.postMessage(l({action:t},o)),r()})})}postMessageWithOperation(t,o,r){let n=this.waitForOperationCompleted(r),i=this.postMessage(t,o);return Promise.all([i,n]).then(([,s])=>s)}generateNonce(){return Math.round(Math.random()*1e7)}eventsOfType(t){let o;return typeof t=="string"?o=r=>r.type===t:o=r=>t.includes(r.type),this.events.pipe(x(o))}nextEventOfType(t){return this.eventsOfType(t).pipe(P(1))}waitForOperationCompleted(t){return new Promise((o,r)=>{this.eventsOfType("OPERATION_COMPLETED").pipe(x(n=>n.nonce===t),P(1),w(n=>{if(n.result!==void 0)return n.result;throw new Error(n.error)})).subscribe({next:o,error:r})})}get isEnabled(){return!!this.serviceWorker}},vr=(()=>{class e{sw;messages;notificationClicks;notificationCloses;pushSubscriptionChanges;subscription;get isEnabled(){return this.sw.isEnabled}pushManager=null;subscriptionChanges=new Q;constructor(o){if(this.sw=o,!o.isEnabled){this.messages=G,this.notificationClicks=G,this.notificationCloses=G,this.pushSubscriptionChanges=G,this.subscription=G;return}this.messages=this.sw.eventsOfType("PUSH").pipe(w(n=>n.data)),this.notificationClicks=this.sw.eventsOfType("NOTIFICATION_CLICK").pipe(w(n=>n.data)),this.notificationCloses=this.sw.eventsOfType("NOTIFICATION_CLOSE").pipe(w(n=>n.data)),this.pushSubscriptionChanges=this.sw.eventsOfType("PUSH_SUBSCRIPTION_CHANGE").pipe(w(n=>n.data)),this.pushManager=this.sw.registration.pipe(w(n=>n.pushManager));let r=this.pushManager.pipe(T(n=>n.getSubscription()));this.subscription=new _(n=>{let i=r.subscribe(n),s=this.subscriptionChanges.subscribe(n);return()=>{i.unsubscribe(),s.unsubscribe()}})}requestSubscription(o){if(!this.sw.isEnabled||this.pushManager===null)return Promise.reject(new Error(Ae));let r={userVisibleOnly:!0},n=this.decodeBase64(o.serverPublicKey.replace(/_/g,"/").replace(/-/g,"+")),i=new Uint8Array(new ArrayBuffer(n.length));for(let s=0;s<n.length;s++)i[s]=n.charCodeAt(s);return r.applicationServerKey=i,new Promise((s,a)=>{this.pushManager.pipe(T(g=>g.subscribe(r)),P(1)).subscribe({next:g=>{this.subscriptionChanges.next(g),s(g)},error:a})})}unsubscribe(){if(!this.sw.isEnabled)return Promise.reject(new Error(Ae));let o=r=>{if(r===null)throw new W(5602,!1);return r.unsubscribe().then(n=>{if(!n)throw new W(5603,!1);this.subscriptionChanges.next(null)})};return new Promise((r,n)=>{this.subscription.pipe(P(1),T(o)).subscribe({next:r,error:n})})}decodeBase64(o){return atob(o)}static \u0275fac=function(r){return new(r||e)(C(X))};static \u0275prov=D({token:e,factory:e.\u0275fac})}return e})(),Cr=(()=>{class e{sw;versionUpdates;unrecoverable;get isEnabled(){return this.sw.isEnabled}ongoingCheckForUpdate=null;constructor(o){if(this.sw=o,!o.isEnabled){this.versionUpdates=G,this.unrecoverable=G;return}this.versionUpdates=this.sw.eventsOfType(["VERSION_DETECTED","VERSION_INSTALLATION_FAILED","VERSION_READY","NO_NEW_VERSION_DETECTED"]),this.unrecoverable=this.sw.eventsOfType("UNRECOVERABLE_STATE")}checkForUpdate(){if(!this.sw.isEnabled)return Promise.reject(new Error(Ae));if(this.ongoingCheckForUpdate)return this.ongoingCheckForUpdate;let o=this.sw.generateNonce();return this.ongoingCheckForUpdate=this.sw.postMessageWithOperation("CHECK_FOR_UPDATES",{nonce:o},o).finally(()=>{this.ongoingCheckForUpdate=null}),this.ongoingCheckForUpdate}activateUpdate(){if(!this.sw.isEnabled)return Promise.reject(new W(5601,!1));let o=this.sw.generateNonce();return this.sw.postMessageWithOperation("ACTIVATE_UPDATE",{nonce:o},o)}static \u0275fac=function(r){return new(r||e)(C(X))};static \u0275prov=D({token:e,factory:e.\u0275fac})}return e})();var Ft=new L("");function Ir(){let e=f(ee);if(!("serviceWorker"in navigator&&e.enabled!==!1))return;let t=f(Ft),o=f(se),r=f(we);o.runOutsideAngular(()=>{let n=navigator.serviceWorker,i=()=>n.controller?.postMessage({action:"INITIALIZE"});n.addEventListener("controllerchange",i),r.onDestroy(()=>{n.removeEventListener("controllerchange",i)})}),o.runOutsideAngular(()=>{let n,{registrationStrategy:i}=e;if(typeof i=="function")n=new Promise(s=>i().subscribe(()=>s()));else{let[s,...a]=(i||"registerWhenStable:30000").split(":");switch(s){case"registerImmediately":n=Promise.resolve();break;case"registerWithDelay":n=Dt(+a[0]||0);break;case"registerWhenStable":n=Promise.race([r.whenStable(),Dt(+a[0])]);break;default:throw new W(5600,!1)}}n.then(()=>{r.destroyed||navigator.serviceWorker.register(t,{scope:e.scope,updateViaCache:e.updateViaCache,type:e.type}).catch(s=>console.error(it(5604,!1)))})})}function Dt(e){return new Promise(t=>setTimeout(t,e))}function br(e,t){return new X(e.enabled!==!1?navigator.serviceWorker:void 0,t)}var ee=class{enabled;updateViaCache;type;scope;registrationStrategy};function jt(e,t={}){return Y([vr,Cr,{provide:Ft,useValue:e},{provide:ee,useValue:t},{provide:X,useFactory:br,deps:[ee,at]},ft(Ir)])}var wr={dispatch:!0,functional:!1,useEffectsErrorHandler:!0},ge="__@ngrx/effects_create__";function $(e,t={}){let o=t.functional?e:e(),r=l(l({},wr),t);return Object.defineProperty(o,ge,{value:r}),o}function Tr(e){return Object.getOwnPropertyNames(e).filter(r=>e[r]&&e[r].hasOwnProperty(ge)?e[r][ge].hasOwnProperty("dispatch"):!1).map(r=>{let n=e[r][ge];return l({propertyName:r},n)})}function Nr(e){return Tr(e)}function kt(e){return Object.getPrototypeOf(e)}function Ar(e){return!!e.constructor&&e.constructor.name!=="Object"&&e.constructor.name!=="Function"}function Pt(e){return typeof e=="function"}function xr(e){return e.filter(Pt)}function Dr(e,t,o){let r=kt(e),i=!!r&&r.constructor.name!=="Object"?r.constructor.name:null,s=Nr(e).map(({propertyName:a,dispatch:g,useEffectsErrorHandler:d})=>{let u=typeof e[a]=="function"?e[a]():e[a],c=d?o(u,t):u;return g===!1?c.pipe(Je()):c.pipe(et()).pipe(w(N=>({effect:e[a],notification:N,propertyName:a,sourceName:i,sourceInstance:e})))});return Z(...s)}var Rr=10;function _t(e,t,o=Rr){return e.pipe(V(r=>(t&&t.handleError(r),o<=1?e:_t(e,t,o-1))))}var U=(()=>{let t=class t extends _{constructor(r){super(),r&&(this.source=r)}lift(r){let n=new t;return n.source=this,n.operator=r,n}};t.\u0275fac=function(n){return new(n||t)(C(ue))},t.\u0275prov=D({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();function B(...e){return x(t=>e.some(o=>typeof o=="string"?o===t.type:o.type===t.type))}var Mr=new L("@ngrx/effects Effects Error Handler",{providedIn:"root",factory:()=>_t}),Fr="@ngrx/effects/init",jr=Et(Fr);function kr(e,t){if(e.notification.kind==="N"){let o=e.notification.value;!Pr(o)&&t.handleError(new Error(`Effect ${_r(e)} dispatched an invalid action: ${Lr(o)}`))}}function Pr(e){return typeof e!="function"&&e&&e.type&&typeof e.type=="string"}function _r({propertyName:e,sourceInstance:t,sourceName:o}){let r=typeof t[e]=="function";return!!o?`"${o}.${String(e)}${r?"()":""}"`:`"${String(e)}()"`}function Lr(e){try{return JSON.stringify(e)}catch{return e}}var $r="ngrxOnIdentifyEffects";function Ur(e){return xe(e,$r)}var Br="ngrxOnRunEffects";function zr(e){return xe(e,Br)}var Gr="ngrxOnInitEffects";function Vr(e){return xe(e,Gr)}function xe(e,t){return e&&t in e&&typeof e[t]=="function"}var Lt=(()=>{let t=class t extends Q{constructor(r,n){super(),this.errorHandler=r,this.effectsErrorHandler=n}addEffects(r){this.next(r)}toActions(){return this.pipe(be(r=>Ar(r)?kt(r):r),Ie(r=>r.pipe(be(Wr))),Ie(r=>{let n=r.pipe(qe(s=>Hr(this.errorHandler,this.effectsErrorHandler)(s)),w(s=>(kr(s,this.errorHandler),s.notification)),x(s=>s.kind==="N"&&s.value!=null),Xe()),i=r.pipe(P(1),x(Vr),w(s=>s.ngrxOnInitEffects()));return Z(n,i)}))}};t.\u0275fac=function(n){return new(n||t)(C(ie),C(Mr))},t.\u0275prov=D({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();function Wr(e){return Ur(e)?e.ngrxOnIdentifyEffects():""}function Hr(e,t){return o=>{let r=Dr(o,e,t);return zr(o)?o.ngrxOnRunEffects(r):r}}var Kr=(()=>{let t=class t{get isStarted(){return!!this.effectsSubscription}constructor(r,n){this.effectSources=r,this.store=n,this.effectsSubscription=null}start(){this.effectsSubscription||(this.effectsSubscription=this.effectSources.toActions().subscribe(this.store))}ngOnDestroy(){this.effectsSubscription&&(this.effectsSubscription.unsubscribe(),this.effectsSubscription=null)}};t.\u0275fac=function(n){return new(n||t)(C(Lt),C(de))},t.\u0275prov=D({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();function $t(...e){let t=e.flat(),o=xr(t);return Y([o,st(()=>{f(Ct),f(It,{optional:!0});let r=f(Kr),n=f(Lt),i=!r.isStarted;i&&r.start();for(let s of t){let a=Pt(s)?f(s):s;n.addEffects(a)}i&&f(de).dispatch(jr())})])}var re="PERFORM_ACTION",Qr="REFRESH",Wt="RESET",Ht="ROLLBACK",Kt="COMMIT",Qt="SWEEP",Zt="TOGGLE_ACTION",Zr="SET_ACTIONS_ACTIVE",Yt="JUMP_TO_STATE",Jt="JUMP_TO_ACTION",ze="IMPORT_STATE",Xt="LOCK_CHANGES",qt="PAUSE_RECORDING",q=class{constructor(t,o){if(this.action=t,this.timestamp=o,this.type=re,typeof t.type>"u")throw new Error('Actions may not have an undefined "type" property. Have you misspelled a constant?')}},De=class{constructor(){this.type=Qr}},Re=class{constructor(t){this.timestamp=t,this.type=Wt}},Me=class{constructor(t){this.timestamp=t,this.type=Ht}},Fe=class{constructor(t){this.timestamp=t,this.type=Kt}},je=class{constructor(){this.type=Qt}},ke=class{constructor(t){this.id=t,this.type=Zt}};var Pe=class{constructor(t){this.index=t,this.type=Yt}},_e=class{constructor(t){this.actionId=t,this.type=Jt}},Le=class{constructor(t){this.nextLiftedState=t,this.type=ze}},$e=class{constructor(t){this.status=t,this.type=Xt}},Ue=class{constructor(t){this.status=t,this.type=qt}};var Se=new L("@ngrx/store-devtools Options"),Ut=new L("@ngrx/store-devtools Initial Config");function er(){return null}var Yr="NgRx Store DevTools";function Jr(e){let t={maxAge:!1,monitor:er,actionSanitizer:void 0,stateSanitizer:void 0,name:Yr,serialize:!1,logOnly:!1,autoPause:!1,trace:!1,traceLimit:75,features:{pause:!0,lock:!0,persist:!0,export:!0,import:"custom",jump:!0,skip:!0,reorder:!0,dispatch:!0,test:!0},connectInZone:!1},o=typeof e=="function"?e():e,r=o.logOnly?{pause:!0,export:!0,test:!0}:!1,n=o.features||r||t.features;n.import===!0&&(n.import="custom");let i=Object.assign({},t,{features:n},o);if(i.maxAge&&i.maxAge<2)throw new Error(`Devtools 'maxAge' cannot be less than 2, got ${i.maxAge}`);return i}function Bt(e,t){return e.filter(o=>t.indexOf(o)<0)}function tr(e){let{computedStates:t,currentStateIndex:o}=e;if(o>=t.length){let{state:n}=t[t.length-1];return n}let{state:r}=t[o];return r}function te(e){return new q(e,+Date.now())}function Xr(e,t){return Object.keys(t).reduce((o,r)=>{let n=Number(r);return o[n]=rr(e,t[n],n),o},{})}function rr(e,t,o){return h(l({},t),{action:e(t.action,o)})}function qr(e,t){return t.map((o,r)=>({state:nr(e,o.state,r),error:o.error}))}function nr(e,t,o){return e(t,o)}function or(e){return e.predicate||e.actionsSafelist||e.actionsBlocklist}function en(e,t,o,r){let n=[],i={},s=[];return e.stagedActionIds.forEach((a,g)=>{let d=e.actionsById[a];d&&(g&&Ge(e.computedStates[g],d,t,o,r)||(i[a]=d,n.push(a),s.push(e.computedStates[g])))}),h(l({},e),{stagedActionIds:n,actionsById:i,computedStates:s})}function Ge(e,t,o,r,n){let i=o&&!o(e,t.action),s=r&&!t.action.type.match(r.map(g=>zt(g)).join("|")),a=n&&t.action.type.match(n.map(g=>zt(g)).join("|"));return i||s||a}function zt(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function ir(e){return{ngZone:e?f(se):null,connectInZone:e}}var Ee=(()=>{let t=class t extends ce{};t.\u0275fac=(()=>{let r;return function(i){return(r||(r=ut(t)))(i||t)}})(),t.\u0275prov=D({token:t,factory:t.\u0275fac});let e=t;return e})(),he={START:"START",DISPATCH:"DISPATCH",STOP:"STOP",ACTION:"ACTION"},Be=new L("@ngrx/store-devtools Redux Devtools Extension"),sr=(()=>{let t=class t{constructor(r,n,i){this.config=n,this.dispatcher=i,this.zoneConfig=ir(this.config.connectInZone),this.devtoolsExtension=r,this.createActionStreams()}notify(r,n){if(this.devtoolsExtension)if(r.type===re){if(n.isLocked||n.isPaused)return;let i=tr(n);if(or(this.config)&&Ge(i,r,this.config.predicate,this.config.actionsSafelist,this.config.actionsBlocklist))return;let s=this.config.stateSanitizer?nr(this.config.stateSanitizer,i,n.currentStateIndex):i,a=this.config.actionSanitizer?rr(this.config.actionSanitizer,r,n.nextActionId):r;this.sendToReduxDevtools(()=>this.extensionConnection.send(a,s))}else{let i=h(l({},n),{stagedActionIds:n.stagedActionIds,actionsById:this.config.actionSanitizer?Xr(this.config.actionSanitizer,n.actionsById):n.actionsById,computedStates:this.config.stateSanitizer?qr(this.config.stateSanitizer,n.computedStates):n.computedStates});this.sendToReduxDevtools(()=>this.devtoolsExtension.send(null,i,this.getExtensionConfig(this.config)))}}createChangesObservable(){return this.devtoolsExtension?new _(r=>{let n=this.zoneConfig.connectInZone?this.zoneConfig.ngZone.runOutsideAngular(()=>this.devtoolsExtension.connect(this.getExtensionConfig(this.config))):this.devtoolsExtension.connect(this.getExtensionConfig(this.config));return this.extensionConnection=n,n.init(),n.subscribe(i=>r.next(i)),n.unsubscribe}):He}createActionStreams(){let r=this.createChangesObservable().pipe(rt()),n=r.pipe(x(u=>u.type===he.START)),i=r.pipe(x(u=>u.type===he.STOP)),s=r.pipe(x(u=>u.type===he.DISPATCH),w(u=>this.unwrapAction(u.payload)),Ze(u=>u.type===ze?this.dispatcher.pipe(x(c=>c.type===Ne),Qe(1e3),Ye(1e3),w(()=>u),V(()=>O(u)),P(1)):O(u))),g=r.pipe(x(u=>u.type===he.ACTION),w(u=>this.unwrapAction(u.payload))).pipe(oe(i)),d=s.pipe(oe(i));this.start$=n.pipe(oe(i)),this.actions$=this.start$.pipe(T(()=>g)),this.liftedActions$=this.start$.pipe(T(()=>d))}unwrapAction(r){return typeof r=="string"?(0,eval)(`(${r})`):r}getExtensionConfig(r){let n={name:r.name,features:r.features,serialize:r.serialize,autoPause:r.autoPause??!1,trace:r.trace??!1,traceLimit:r.traceLimit??75};return r.maxAge!==!1&&(n.maxAge=r.maxAge),n}sendToReduxDevtools(r){try{r()}catch(n){console.warn("@ngrx/store-devtools: something went wrong inside the redux devtools",n)}}};t.\u0275fac=function(n){return new(n||t)(C(Be),C(Se),C(Ee))},t.\u0275prov=D({token:t,factory:t.\u0275fac});let e=t;return e})(),ye={type:Te},tn="@ngrx/store-devtools/recompute",rn={type:tn};function ar(e,t,o,r,n){if(r)return{state:o,error:"Interrupted by an error up the chain"};let i=o,s;try{i=e(o,t)}catch(a){s=a.toString(),n.handleError(a)}return{state:i,error:s}}function me(e,t,o,r,n,i,s,a,g){if(t>=e.length&&e.length===i.length)return e;let d=e.slice(0,t),u=i.length-(g?1:0);for(let c=t;c<u;c++){let y=i[c],N=n[y].action,m=d[c-1],p=m?m.state:r,j=m?m.error:void 0,k=s.indexOf(y)>-1?m:ar(o,N,p,j,a);d.push(k)}return g&&d.push(e[e.length-1]),d}function nn(e,t){return{monitorState:t(void 0,{}),nextActionId:1,actionsById:{0:te(ye)},stagedActionIds:[0],skippedActionIds:[],committedState:e,currentStateIndex:0,computedStates:[],isLocked:!1,isPaused:!1}}function on(e,t,o,r,n={}){return i=>(s,a)=>{let{monitorState:g,actionsById:d,nextActionId:u,stagedActionIds:c,skippedActionIds:y,committedState:N,currentStateIndex:m,computedStates:p,isLocked:j,isPaused:A}=s||t;s||(d=Object.create(d));function k(b){let E=b,z=c.slice(1,E+1);for(let M=0;M<z.length;M++)if(p[M+1].error){E=M,z=c.slice(1,E+1);break}else delete d[z[M]];y=y.filter(M=>z.indexOf(M)===-1),c=[0,...c.slice(E+1)],N=p[E].state,p=p.slice(E),m=m>E?m-E:0}function K(){d={0:te(ye)},u=1,c=[0],y=[],N=p[m].state,m=0,p=[]}let S=0;switch(a.type){case Xt:{j=a.status,S=1/0;break}case qt:{A=a.status,A?(c=[...c,u],d[u]=new q({type:"@ngrx/devtools/pause"},+Date.now()),u++,S=c.length-1,p=p.concat(p[p.length-1]),m===c.length-2&&m++,S=1/0):K();break}case Wt:{d={0:te(ye)},u=1,c=[0],y=[],N=e,m=0,p=[];break}case Kt:{K();break}case Ht:{d={0:te(ye)},u=1,c=[0],y=[],m=0,p=[];break}case Zt:{let{id:b}=a;y.indexOf(b)===-1?y=[b,...y]:y=y.filter(z=>z!==b),S=c.indexOf(b);break}case Zr:{let{start:b,end:E,active:z}=a,M=[];for(let Ce=b;Ce<E;Ce++)M.push(Ce);z?y=Bt(y,M):y=[...y,...M],S=c.indexOf(b);break}case Yt:{m=a.index,S=1/0;break}case Jt:{let b=c.indexOf(a.actionId);b!==-1&&(m=b),S=1/0;break}case Qt:{c=Bt(c,y),y=[],m=Math.min(m,c.length-1);break}case re:{if(j)return s||t;if(A||s&&Ge(s.computedStates[m],a,n.predicate,n.actionsSafelist,n.actionsBlocklist)){let E=p[p.length-1];p=[...p.slice(0,-1),ar(i,a.action,E.state,E.error,o)],S=1/0;break}n.maxAge&&c.length===n.maxAge&&k(1),m===c.length-1&&m++;let b=u++;d[b]=a,c=[...c,b],S=c.length-1;break}case ze:{({monitorState:g,actionsById:d,nextActionId:u,stagedActionIds:c,skippedActionIds:y,committedState:N,currentStateIndex:m,computedStates:p,isLocked:j,isPaused:A}=a.nextLiftedState);break}case Te:{S=0,n.maxAge&&c.length>n.maxAge&&(p=me(p,S,i,N,d,c,y,o,A),k(c.length-n.maxAge),S=1/0);break}case Ne:{if(p.filter(E=>E.error).length>0)S=0,n.maxAge&&c.length>n.maxAge&&(p=me(p,S,i,N,d,c,y,o,A),k(c.length-n.maxAge),S=1/0);else{if(!A&&!j){m===c.length-1&&m++;let E=u++;d[E]=new q(a,+Date.now()),c=[...c,E],S=c.length-1,p=me(p,S,i,N,d,c,y,o,A)}p=p.map(E=>h(l({},E),{state:i(E.state,rn)})),m=c.length-1,n.maxAge&&c.length>n.maxAge&&k(c.length-n.maxAge),S=1/0}break}default:{S=1/0;break}}return p=me(p,S,i,N,d,c,y,o,A),g=r(g,a),{monitorState:g,actionsById:d,nextActionId:u,stagedActionIds:c,skippedActionIds:y,committedState:N,currentStateIndex:m,computedStates:p,isLocked:j,isPaused:A}}}var Gt=(()=>{let t=class t{constructor(r,n,i,s,a,g,d,u){let c=nn(d,u.monitor),y=on(d,c,g,u.monitor,u),N=Z(Z(n.asObservable().pipe(nt(1)),s.actions$).pipe(w(te)),r,s.liftedActions$).pipe(Ke(We)),m=i.pipe(w(y)),p=ir(u.connectInZone),j=new Ve(1);this.liftedStateSubscription=N.pipe(ot(m),Vt(p),tt(({state:K},[S,b])=>{let E=b(K,S);return S.type!==re&&or(u)&&(E=en(E,u.predicate,u.actionsSafelist,u.actionsBlocklist)),s.notify(S,E),{state:E,action:S}},{state:c,action:null})).subscribe(({state:K,action:S})=>{if(j.next(K),S.type===re){let b=S.action;a.next(b)}}),this.extensionStartSubscription=s.start$.pipe(Vt(p)).subscribe(()=>{this.refresh()});let A=j.asObservable(),k=A.pipe(w(tr));Object.defineProperty(k,"state",{value:St(k,{manualCleanup:!0,requireSync:!0})}),this.dispatcher=r,this.liftedState=A,this.state=k}ngOnDestroy(){this.liftedStateSubscription.unsubscribe(),this.extensionStartSubscription.unsubscribe()}dispatch(r){this.dispatcher.next(r)}next(r){this.dispatcher.next(r)}error(r){}complete(){}performAction(r){this.dispatch(new q(r,+Date.now()))}refresh(){this.dispatch(new De)}reset(){this.dispatch(new Re(+Date.now()))}rollback(){this.dispatch(new Me(+Date.now()))}commit(){this.dispatch(new Fe(+Date.now()))}sweep(){this.dispatch(new je)}toggleAction(r){this.dispatch(new ke(r))}jumpToAction(r){this.dispatch(new _e(r))}jumpToState(r){this.dispatch(new Pe(r))}importState(r){this.dispatch(new Le(r))}lockChanges(r){this.dispatch(new $e(r))}pauseRecording(r){this.dispatch(new Ue(r))}};t.\u0275fac=function(n){return new(n||t)(C(Ee),C(ce),C(bt),C(sr),C(ue),C(ie),C(vt),C(Se))},t.\u0275prov=D({token:t,factory:t.\u0275fac});let e=t;return e})();function Vt({ngZone:e,connectInZone:t}){return o=>t?new _(r=>o.subscribe({next:n=>e.run(()=>r.next(n)),error:n=>e.run(()=>r.error(n)),complete:()=>e.run(()=>r.complete())})):o}var sn=new L("@ngrx/store-devtools Is Devtools Extension or Monitor Present");function an(e,t){return!!e||t.monitor!==er}function cn(){let e="__REDUX_DEVTOOLS_EXTENSION__";return typeof window=="object"&&typeof window[e]<"u"?window[e]:null}function un(e){return e.state}function cr(e={}){return Y([sr,Ee,Gt,{provide:Ut,useValue:e},{provide:sn,deps:[Be,Se],useFactory:an},{provide:Be,useFactory:cn},{provide:Se,deps:[Ut],useFactory:Jr},{provide:wt,deps:[Gt],useFactory:un},{provide:Ot,useExisting:Ee}])}var dn={notes:[],categories:[],filteredNotes:[],searchQuery:"",selectedCategoryId:null,loading:!1,error:null};function H(e,t,o){let r=[...e];if(o&&(r=r.filter(n=>n.categoryId===o)),t.trim()){let n=t.toLowerCase();r=r.filter(i=>i.title.toLowerCase().includes(n)||i.content.toLowerCase().includes(n)||i.tags?.some(s=>s.toLowerCase().includes(n)))}return r}var ur=Nt(dn,R(v.loadNotes,e=>h(l({},e),{loading:!0,error:null})),R(v.loadNotesSuccess,(e,{notes:t})=>h(l({},e),{notes:t,filteredNotes:H(t,e.searchQuery,e.selectedCategoryId),loading:!1})),R(v.loadNotesFailure,(e,{error:t})=>h(l({},e),{error:t,loading:!1})),R(v.createNoteSuccess,(e,{note:t})=>{let o=[...e.notes,t];return h(l({},e),{notes:o,filteredNotes:H(o,e.searchQuery,e.selectedCategoryId)})}),R(v.updateNoteSuccess,(e,{note:t})=>{let o=e.notes.map(r=>r.id===t.id?t:r);return h(l({},e),{notes:o,filteredNotes:H(o,e.searchQuery,e.selectedCategoryId)})}),R(v.deleteNoteSuccess,(e,{id:t})=>{let o=e.notes.filter(r=>r.id!==t);return h(l({},e),{notes:o,filteredNotes:H(o,e.searchQuery,e.selectedCategoryId)})}),R(v.searchNotes,(e,{query:t})=>h(l({},e),{searchQuery:t,filteredNotes:H(e.notes,t,e.selectedCategoryId)})),R(v.filterByCategory,(e,{categoryId:t})=>h(l({},e),{selectedCategoryId:t,filteredNotes:H(e.notes,e.searchQuery,t)})),R(I.loadCategoriesSuccess,(e,{categories:t})=>h(l({},e),{categories:t})),R(I.createCategorySuccess,(e,{category:t})=>h(l({},e),{categories:[...e.categories,t]})),R(I.updateCategorySuccess,(e,{category:t})=>{let o=e.categories.map(n=>n.id===t.id?t:n),r=e.notes.map(n=>n.categoryId===t.id?h(l({},n),{categoryName:t.name}):n);return h(l({},e),{categories:o,notes:r,filteredNotes:H(r,e.searchQuery,e.selectedCategoryId)})}),R(I.deleteCategorySuccess,(e,{id:t})=>h(l({},e),{categories:e.categories.filter(o=>o.id!==t)})));var F=class e{notesSignal=Oe([]);categoriesSignal=Oe([]);notes=this.notesSignal.asReadonly();categories=this.categoriesSignal.asReadonly();NOTES_KEY="notes_app_notes";CATEGORIES_KEY="notes_app_categories";constructor(){this.loadFromStorage(),this.initializeDefaultCategories()}loadFromStorage(){let t=localStorage.getItem(this.NOTES_KEY),o=localStorage.getItem(this.CATEGORIES_KEY);if(t){let r=JSON.parse(t).map(n=>h(l({},n),{createdAt:new Date(n.createdAt),updatedAt:new Date(n.updatedAt)}));this.notesSignal.set(r)}if(o){let r=JSON.parse(o).map(n=>h(l({},n),{createdAt:new Date(n.createdAt)}));this.categoriesSignal.set(r)}}saveToStorage(){localStorage.setItem(this.NOTES_KEY,JSON.stringify(this.notesSignal())),localStorage.setItem(this.CATEGORIES_KEY,JSON.stringify(this.categoriesSignal()))}initializeDefaultCategories(){if(this.categoriesSignal().length===0){let t=[{id:"1",name:"Personal",color:"#4CAF50",createdAt:new Date},{id:"2",name:"Work",color:"#2196F3",createdAt:new Date},{id:"3",name:"Ideas",color:"#FF9800",createdAt:new Date},{id:"4",name:"Shopping",color:"#9C27B0",createdAt:new Date}];this.categoriesSignal.set(t),this.saveToStorage()}}getNoteById(t){return this.notesSignal().find(o=>o.id===t)}getNotesByCategory(t){return this.notesSignal().filter(o=>o.categoryId===t)}searchNotes(t){let o=t.toLowerCase();return this.notesSignal().filter(r=>r.title.toLowerCase().includes(o)||r.content.toLowerCase().includes(o)||r.tags?.some(n=>n.toLowerCase().includes(o)))}createNote(t){let o=h(l({},t),{id:this.generateId(),createdAt:new Date,updatedAt:new Date});return this.notesSignal.update(r=>[...r,o]),this.saveToStorage(),o}updateNote(t,o){let r=this.getNoteById(t);if(!r)return null;let n=h(l(l({},r),o),{id:t,updatedAt:new Date});return this.notesSignal.update(i=>i.map(s=>s.id===t?n:s)),this.saveToStorage(),n}deleteNote(t){return this.notesSignal().some(r=>r.id===t)?(this.notesSignal.update(r=>r.filter(n=>n.id!==t)),this.saveToStorage(),!0):!1}getCategoryById(t){return this.categoriesSignal().find(o=>o.id===t)}createCategory(t){let o=h(l({},t),{id:this.generateId(),createdAt:new Date});return this.categoriesSignal.update(r=>[...r,o]),this.saveToStorage(),o}updateCategory(t,o){let r=this.getCategoryById(t);if(!r)return null;let n=h(l(l({},r),o),{id:t});return this.categoriesSignal.update(i=>i.map(s=>s.id===t?n:s)),this.notesSignal.update(i=>i.map(s=>s.categoryId===t?h(l({},s),{categoryName:n.name}):s)),this.saveToStorage(),n}deleteCategory(t){return this.notesSignal().some(n=>n.categoryId===t)?!1:this.categoriesSignal().some(n=>n.id===t)?(this.categoriesSignal.update(n=>n.filter(i=>i.id!==t)),this.saveToStorage(),!0):!1}generateId(){return Date.now().toString(36)+Math.random().toString(36).substr(2)}static \u0275fac=function(o){return new(o||e)};static \u0275prov=D({token:e,factory:e.\u0275fac,providedIn:"root"})};var dr=$((e=f(U),t=f(F))=>e.pipe(B(v.loadNotes),T(()=>{try{let o=t.notes(),r=t.categories(),n=o.map(i=>{let s=r.find(a=>a.id===i.categoryId);return h(l({},i),{categoryName:s?.name})});return O(v.loadNotesSuccess({notes:n}))}catch(o){return O(v.loadNotesFailure({error:o.message||"Failed to load notes"}))}}),V(o=>O(v.loadNotesFailure({error:o.message||"Failed to load notes"})))),{functional:!0}),fr=$((e=f(U),t=f(F),o=f(fe),r=f(J))=>e.pipe(B(v.createNote),T(i=>ne(null,[i],function*({note:n}){try{let s=t.createNote(n),a=t.categories(),g=a.find(u=>u.id===s.categoryId),d=h(l({},s),{categoryName:g?.name});if(r.isSignedIn())try{yield o.syncToDrive(t.notes(),a)}catch(u){console.error("Failed to sync to Drive:",u)}return v.createNoteSuccess({note:d})}catch(s){return v.createNoteFailure({error:s.message})}}))),{functional:!0}),lr=$((e=f(U),t=f(F),o=f(fe),r=f(J))=>e.pipe(B(v.updateNote),T(s=>ne(null,[s],function*({id:n,updates:i}){try{let a=t.updateNote(n,i);if(a){let g=t.categories(),d=g.find(c=>c.id===a.categoryId),u=h(l({},a),{categoryName:d?.name});if(r.isSignedIn())try{yield o.syncToDrive(t.notes(),g)}catch(c){console.error("Failed to sync to Drive:",c)}return v.updateNoteSuccess({note:u})}return v.updateNoteFailure({error:"Note not found"})}catch(a){return v.updateNoteFailure({error:a.message})}}))),{functional:!0}),pr=$((e=f(U),t=f(F),o=f(fe),r=f(J))=>e.pipe(B(v.deleteNote),T(i=>ne(null,[i],function*({id:n}){try{if(t.deleteNote(n)){if(r.isSignedIn())try{yield o.syncToDrive(t.notes(),t.categories())}catch(a){console.error("Failed to sync to Drive:",a)}return v.deleteNoteSuccess({id:n})}return v.deleteNoteFailure({error:"Note not found"})}catch(s){return v.deleteNoteFailure({error:s.message})}}))),{functional:!0}),gr=$((e=f(U),t=f(F))=>e.pipe(B(I.loadCategories),T(()=>{try{let o=t.categories();return O(I.loadCategoriesSuccess({categories:o}))}catch(o){return O(I.loadCategoriesFailure({error:o.message||"Failed to load categories"}))}}),V(o=>O(I.loadCategoriesFailure({error:o.message||"Failed to load categories"})))),{functional:!0}),hr=$((e=f(U),t=f(F))=>e.pipe(B(I.createCategory),T(({category:o})=>{try{let r=t.createCategory(o);return O(I.createCategorySuccess({category:r}))}catch(r){return O(I.createCategoryFailure({error:r.message}))}})),{functional:!0}),mr=$((e=f(U),t=f(F))=>e.pipe(B(I.updateCategory),T(({id:o,updates:r})=>{try{let n=t.updateCategory(o,r);return n?O(I.updateCategorySuccess({category:n})):O(I.updateCategoryFailure({error:"Category not found"}))}catch(n){return O(I.updateCategoryFailure({error:n.message}))}})),{functional:!0}),yr=$((e=f(U),t=f(F))=>e.pipe(B(I.deleteCategory),T(({id:o})=>{try{return t.deleteCategory(o)?O(I.deleteCategorySuccess({id:o})):O(I.deleteCategoryFailure({error:"Category cannot be deleted"}))}catch(r){return O(I.deleteCategoryFailure({error:r.message}))}})),{functional:!0});var Sr=()=>[Tt({notes:ur}),$t({loadNotes$:dr,createNote$:fr,updateNote$:lr,deleteNote$:pr,loadCategories$:gr,createCategory$:hr,updateCategory$:mr,deleteCategory$:yr}),cr({maxAge:25,logOnly:!ae(),autoPause:!0,trace:!1,traceLimit:75})];var Er={providers:[ct(),pt({eventCoalescing:!0}),yt(xt),jt("ngsw-worker.js",{enabled:!ae(),registrationStrategy:"registerWhenStable:30000"}),...Sr()]};var ve=class e{themeService=f(At);ngOnInit(){}static \u0275fac=function(o){return new(o||e)};static \u0275cmp=dt({type:e,selectors:[["app-root"]],decls:1,vars:0,template:function(o,r){o&1&&lt(0,"router-outlet")},dependencies:[ht],encapsulation:2})};gt(ve,Er).catch(e=>console.error(e));
