import{a as B}from"./chunk-6GGWYJMI.js";import{a as F}from"./chunk-2XLQIVWH.js";import{a as V,c as j,h as L}from"./chunk-XYIVAT5K.js";import{Aa as h,Ab as G,Ga as M,Gb as N,Hb as U,Ia as f,Ka as d,O as m,Oa as n,Pa as b,Qa as x,R as g,S as p,Ta as k,Va as w,Wa as E,aa as P,c as C,ca as o,eb as I,fb as A,ia as O,jb as D,kb as z,nb as T,qa as S,ra as u,sa as _,xa as v,ya as t,za as e}from"./chunk-QFRUTNPX.js";var W=()=>["/login"];function Y(i,r){if(i&1&&(t(0,"p",12),n(1),w(2,"date"),e()),i&2){let a=d(2);o(),x("Last synced: ",E(2,1,a.lastSynced,"short"))}}function q(i,r){i&1&&(t(0,"div",21)(1,"p")(2,"strong"),n(3,"Automatic AI Integration:"),e()(),t(4,"p"),n(5,"AI features (text suggestions, tag generation) use your Google account automatically. No API key needed!"),e(),t(6,"p"),n(7,"When you sign in with Google, the app uses your OAuth token to access Gemini AI securely."),e(),t(8,"p")(9,"strong"),n(10,"Privacy:"),e(),n(11," Your OAuth token is stored locally and never shared with third parties."),e()())}function H(i,r){i&1&&(t(0,"p",23),n(1,"\u2713 AI features enabled (using your Google account)"),e())}function J(i,r){i&1&&(t(0,"p",24),n(1,"Sign in with Google to enable AI features"),e())}function K(i,r){if(i&1){let a=M();t(0,"div",4)(1,"div",5),h(2,"img",6),e(),t(3,"h2"),n(4),e(),t(5,"p",7),n(6),e()(),t(7,"div",8)(8,"h3"),n(9,"Google Drive Sync"),e(),t(10,"div",9)(11,"button",10),f("click",function(){g(a);let s=d();return p(s.syncToDrive())}),n(12),e(),t(13,"button",11),f("click",function(){g(a);let s=d();return p(s.syncFromDrive())}),n(14),e()(),u(15,Y,3,4,"p",12),e(),t(16,"div",13)(17,"h3"),n(18,"Statistics"),e(),t(19,"div",14)(20,"div",15)(21,"span",16),n(22),e(),t(23,"span",17),n(24,"Notes"),e()(),t(25,"div",15)(26,"span",16),n(27),e(),t(28,"span",17),n(29,"Categories"),e()()()(),t(30,"div",18)(31,"div",19)(32,"h3"),n(33,"AI Features"),e(),t(34,"button",20),f("click",function(){g(a);let s=d();return p(s.toggleAiInfo())}),n(35," ? "),e()(),u(36,q,12,0,"div",21),t(37,"div",22),u(38,H,2,0,"p",23)(39,J,2,0,"p",24),e()(),t(40,"div",25)(41,"button",26),f("click",function(){g(a);let s=d();return p(s.signOut())}),n(42," Sign Out "),e()()}if(i&2){let a,l,s,y,c=d();o(2),v("src",((a=c.currentUser())==null?null:a.imageUrl)||"/assets/default-avatar.png",P)("alt",(l=c.currentUser())==null?null:l.name),o(2),b((s=c.currentUser())==null?null:s.name),o(2),b((y=c.currentUser())==null?null:y.email),o(5),v("disabled",c.isSyncing),o(),x(" ",c.isSyncing?"\u23F3 Syncing...":"\u2601\uFE0F Sync to Drive"," "),o(),v("disabled",c.isSyncing),o(),x(" ",c.isSyncing?"\u23F3 Syncing...":"\u2B07\uFE0F Sync from Drive"," "),o(),_(c.lastSynced?15:-1),o(7),b(c.notes().length),o(5),b(c.categories().length),o(7),S("aria-label","Show AI info"),o(2),_(c.showAiInfo?36:-1),o(2),_(c.isSignedIn()?38:39)}}function Q(i,r){i&1&&(t(0,"div",3)(1,"p"),n(2,"Sign in with Google to sync your notes"),e(),t(3,"a",27),n(4,"Sign In"),e()()),i&2&&(o(3),v("routerLink",k(1,W)))}var R=class i{authService=m(T);driveService=m(B);notesService=m(F);store=m(G);router=m(D);isSignedIn=this.authService.isSignedIn;currentUser=this.authService.currentUser;notes=this.store.selectSignal(V);categories=this.store.selectSignal(j);isSyncing=!1;lastSynced=null;showAiInfo=!1;ngOnInit(){}toggleAiInfo(){this.showAiInfo=!this.showAiInfo}syncToDrive(){return C(this,null,function*(){if(this.authService.isSignedIn()){this.isSyncing=!0;try{yield this.driveService.syncToDrive(this.notes(),this.categories()),this.lastSynced=new Date}catch(r){console.error("Error syncing to Drive:",r)}finally{this.isSyncing=!1}}})}syncFromDrive(){return C(this,null,function*(){if(this.authService.isSignedIn()){this.isSyncing=!0;try{(yield this.driveService.syncFromDrive())&&(this.lastSynced=new Date)}catch(r){console.error("Error syncing from Drive:",r)}finally{this.isSyncing=!1}}})}signOut(){return C(this,null,function*(){try{yield this.authService.signOut(),this.notesService.clearCurrentUserData(),this.notesService.loadFromStorage(null),this.store.dispatch(N.loadNotes()),this.store.dispatch(U.loadCategories()),this.router.navigate(["/login"])}catch(r){console.error("Error signing out:",r)}})}static \u0275fac=function(a){return new(a||i)};static \u0275cmp=O({type:i,selectors:[["app-profile"]],decls:8,vars:1,consts:[[1,"profile"],[1,"profile-header"],[1,"profile-content"],[1,"sign-in-prompt"],[1,"user-section"],[1,"user-avatar-container"],[1,"user-avatar",3,"src","alt"],[1,"user-email"],[1,"sync-section"],[1,"sync-controls"],[1,"btn","btn-primary",3,"click","disabled"],[1,"btn","btn-secondary",3,"click","disabled"],[1,"sync-time"],[1,"stats-section"],[1,"stats-grid"],[1,"stat-card"],[1,"stat-value"],[1,"stat-label"],[1,"ai-info-section"],[1,"section-header"],[1,"btn-help",3,"click"],[1,"ai-info-help"],[1,"ai-status"],[1,"ai-status-active"],[1,"ai-status-inactive"],[1,"actions-section"],[1,"btn","btn-danger",3,"click"],[1,"btn","btn-primary",3,"routerLink"]],template:function(a,l){a&1&&(t(0,"div",0)(1,"header",1)(2,"h1"),n(3,"Profile"),e()(),t(4,"div",2),u(5,K,43,14)(6,Q,5,2,"div",3),e(),h(7,"app-bottom-nav"),e()),a&2&&(o(5),_(l.isSignedIn()?5:6))},dependencies:[A,z,L,I],styles:[".profile[_ngcontent-%COMP%]{min-height:100vh;background:var(--bg-primary);padding-bottom:80px;padding-top:env(safe-area-inset-top)}.profile-header[_ngcontent-%COMP%]{background:var(--bg-elevated);border-bottom:1px solid var(--border-color);padding:1rem;position:sticky;top:0;z-index:10;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px)}.profile-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:0;font-size:1.5rem;font-weight:600;color:var(--text-primary)}.profile-content[_ngcontent-%COMP%]{padding:1.5rem 1rem}.user-section[_ngcontent-%COMP%]{text-align:center;padding:2rem 0;margin-bottom:2rem}.user-section[_ngcontent-%COMP%]   .user-avatar-container[_ngcontent-%COMP%]{margin-bottom:1rem}.user-section[_ngcontent-%COMP%]   .user-avatar[_ngcontent-%COMP%]{width:100px;height:100px;border-radius:50%;border:3px solid var(--border-color);object-fit:cover}.user-section[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0 0 .5rem;color:var(--text-primary);font-size:1.5rem}.user-section[_ngcontent-%COMP%]   .user-email[_ngcontent-%COMP%]{margin:0;color:var(--text-secondary);font-size:.875rem}.sync-section[_ngcontent-%COMP%]{background:var(--bg-elevated);border-radius:12px;padding:1.5rem;margin-bottom:1.5rem;border:1px solid var(--border-color)}.sync-section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 1rem;font-size:1.125rem;color:var(--text-primary)}.sync-section[_ngcontent-%COMP%]   .sync-controls[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.75rem;margin-bottom:1rem}.sync-section[_ngcontent-%COMP%]   .sync-time[_ngcontent-%COMP%]{margin:0;font-size:.875rem;color:var(--text-secondary);text-align:center}.stats-section[_ngcontent-%COMP%]{background:var(--bg-elevated);border-radius:12px;padding:1.5rem;margin-bottom:1.5rem;border:1px solid var(--border-color)}.stats-section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 1rem;font-size:1.125rem;color:var(--text-primary)}.stats-section[_ngcontent-%COMP%]   .stats-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(2,1fr);gap:1rem}.stats-section[_ngcontent-%COMP%]   .stat-card[_ngcontent-%COMP%]{background:var(--bg-secondary);border-radius:10px;padding:1.5rem;text-align:center;border:1px solid var(--border-color)}.stats-section[_ngcontent-%COMP%]   .stat-card[_ngcontent-%COMP%]   .stat-value[_ngcontent-%COMP%]{display:block;font-size:2rem;font-weight:700;color:var(--primary-color);margin-bottom:.5rem}.stats-section[_ngcontent-%COMP%]   .stat-card[_ngcontent-%COMP%]   .stat-label[_ngcontent-%COMP%]{display:block;font-size:.875rem;color:var(--text-secondary)}.ai-info-section[_ngcontent-%COMP%]{background:var(--bg-elevated);border-radius:12px;padding:1.5rem;margin-bottom:1.5rem;border:1px solid var(--border-color)}.ai-info-section[_ngcontent-%COMP%]   .section-header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;margin-bottom:1rem}.ai-info-section[_ngcontent-%COMP%]   .section-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;font-size:1.125rem;color:var(--text-primary)}.ai-info-section[_ngcontent-%COMP%]   .section-header[_ngcontent-%COMP%]   .btn-help[_ngcontent-%COMP%]{background:var(--bg-secondary);border:1px solid var(--border-color);border-radius:50%;width:24px;height:24px;display:flex;align-items:center;justify-content:center;cursor:pointer;color:var(--text-secondary);font-size:.875rem;font-weight:600;transition:all .2s}.ai-info-section[_ngcontent-%COMP%]   .section-header[_ngcontent-%COMP%]   .btn-help[_ngcontent-%COMP%]:hover{background:var(--bg-tertiary);color:var(--text-primary)}.ai-info-section[_ngcontent-%COMP%]   .ai-info-help[_ngcontent-%COMP%]{background:var(--bg-secondary);border-radius:8px;padding:1rem;margin-bottom:1rem;font-size:.875rem;color:var(--text-secondary);line-height:1.6}.ai-info-section[_ngcontent-%COMP%]   .ai-info-help[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0 0 .5rem}.ai-info-section[_ngcontent-%COMP%]   .ai-info-help[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]:last-child{margin-bottom:0}.ai-info-section[_ngcontent-%COMP%]   .ai-status[_ngcontent-%COMP%]{margin-top:.5rem}.ai-info-section[_ngcontent-%COMP%]   .ai-status[_ngcontent-%COMP%]   .ai-status-active[_ngcontent-%COMP%]{margin:0;font-size:.875rem;color:var(--success-color, #10b981);padding:.75rem;background:var(--bg-secondary);border-radius:8px;border:1px solid var(--success-color, #10b981)}.ai-info-section[_ngcontent-%COMP%]   .ai-status[_ngcontent-%COMP%]   .ai-status-inactive[_ngcontent-%COMP%]{margin:0;font-size:.875rem;color:var(--text-secondary);padding:.75rem;background:var(--bg-secondary);border-radius:8px}.actions-section[_ngcontent-%COMP%]{padding:1rem 0}.actions-section[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{width:100%}.sign-in-prompt[_ngcontent-%COMP%]{text-align:center;padding:3rem 1rem}.sign-in-prompt[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0 0 1.5rem;color:var(--text-secondary)}.sign-in-prompt[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{width:100%;max-width:300px}"]})};export{R as Profile};
