import{a as At}from"./chunk-TBAM4YNP.js";import{a as de}from"./chunk-5XES65YU.js";import{a as U}from"./chunk-WYIH2S7K.js";import{A as tt,Ab as S,B as nt,Bb as I,C as w,D as oe,E as rt,F as H,G as ot,I as D,K as _,L as C,M as d,N as X,O as st,Sa as lt,T as it,V as se,W as ct,Wa as ce,Y as at,a as l,aa as ie,ab as pt,b as y,c as re,cb as ht,d as P,db as gt,e as Q,ea as ut,f as Ve,g as Ge,gb as yt,h as We,hb as Y,i as He,ib as mt,j as O,ja as ft,jb as Et,k as Ke,ka as be,kb as Oe,l as T,lb as ae,m as Ce,mb as St,n as Z,nb as vt,o as V,ob as Ct,p as M,pb as It,q as W,qb as bt,r as Qe,rb as Te,s as Ze,sb as ue,t as k,tb as Ot,u as Xe,ub as fe,v as Ye,va as dt,w as Je,x as Ie,xb as Tt,y as qe,yb as A,z as et,zb as wt}from"./chunk-AEIAZLYF.js";var le=()=>{let e=d(Y),t=d(gt);return e.isSignedIn()?!0:(t.navigate(["/login"]),!1)},Nt=[{path:"login",loadComponent:()=>import("./chunk-U5CSUJDI.js").then(e=>e.Login)},{path:"",loadComponent:()=>import("./chunk-TVN436BY.js").then(e=>e.Dashboard),canActivate:[le]},{path:"note/:id",loadComponent:()=>import("./chunk-ZADQEI4F.js").then(e=>e.NoteEditor),canActivate:[le]},{path:"categories",loadComponent:()=>import("./chunk-46KYVI2P.js").then(e=>e.CategoriesPage),canActivate:[le]},{path:"profile",loadComponent:()=>import("./chunk-BUZ3IBUN.js").then(e=>e.Profile),canActivate:[le]},{path:"**",redirectTo:""}];var we="Service workers are disabled or not supported by this browser",J=class{serviceWorker;worker;registration;events;constructor(t,o){if(this.serviceWorker=t,!t)this.worker=this.events=this.registration=new P(n=>n.error(new H(5601,!1)));else{let n=null,r=new Q;this.worker=new P(f=>(n!==null&&f.next(n),r.subscribe(u=>f.next(u))));let s=()=>{let{controller:f}=t;f!==null&&(n=f,r.next(n))};t.addEventListener("controllerchange",s),s(),this.registration=this.worker.pipe(w(()=>t.getRegistration().then(f=>{if(!f)throw new H(5601,!1);return f})));let i=new Q;this.events=i.asObservable();let c=f=>{let{data:u}=f;u?.type&&i.next(u)};t.addEventListener("message",c),o?.get(be,null,{optional:!0})?.onDestroy(()=>{t.removeEventListener("controllerchange",s),t.removeEventListener("message",c)})}}postMessage(t,o){return new Promise(n=>{this.worker.pipe(k(1)).subscribe(r=>{r.postMessage(l({action:t},o)),n()})})}postMessageWithOperation(t,o,n){let r=this.waitForOperationCompleted(n),s=this.postMessage(t,o);return Promise.all([s,r]).then(([,i])=>i)}generateNonce(){return Math.round(Math.random()*1e7)}eventsOfType(t){let o;return typeof t=="string"?o=n=>n.type===t:o=n=>t.includes(n.type),this.events.pipe(M(o))}nextEventOfType(t){return this.eventsOfType(t).pipe(k(1))}waitForOperationCompleted(t){return new Promise((o,n)=>{this.eventsOfType("OPERATION_COMPLETED").pipe(M(r=>r.nonce===t),k(1),T(r=>{if(r.result!==void 0)return r.result;throw new Error(r.error)})).subscribe({next:o,error:n})})}get isEnabled(){return!!this.serviceWorker}},vn=(()=>{class e{sw;messages;notificationClicks;notificationCloses;pushSubscriptionChanges;subscription;get isEnabled(){return this.sw.isEnabled}pushManager=null;subscriptionChanges=new Q;constructor(o){if(this.sw=o,!o.isEnabled){this.messages=V,this.notificationClicks=V,this.notificationCloses=V,this.pushSubscriptionChanges=V,this.subscription=V;return}this.messages=this.sw.eventsOfType("PUSH").pipe(T(r=>r.data)),this.notificationClicks=this.sw.eventsOfType("NOTIFICATION_CLICK").pipe(T(r=>r.data)),this.notificationCloses=this.sw.eventsOfType("NOTIFICATION_CLOSE").pipe(T(r=>r.data)),this.pushSubscriptionChanges=this.sw.eventsOfType("PUSH_SUBSCRIPTION_CHANGE").pipe(T(r=>r.data)),this.pushManager=this.sw.registration.pipe(T(r=>r.pushManager));let n=this.pushManager.pipe(w(r=>r.getSubscription()));this.subscription=new P(r=>{let s=n.subscribe(r),i=this.subscriptionChanges.subscribe(r);return()=>{s.unsubscribe(),i.unsubscribe()}})}requestSubscription(o){if(!this.sw.isEnabled||this.pushManager===null)return Promise.reject(new Error(we));let n={userVisibleOnly:!0},r=this.decodeBase64(o.serverPublicKey.replace(/_/g,"/").replace(/-/g,"+")),s=new Uint8Array(new ArrayBuffer(r.length));for(let i=0;i<r.length;i++)s[i]=r.charCodeAt(i);return n.applicationServerKey=s,new Promise((i,c)=>{this.pushManager.pipe(w(p=>p.subscribe(n)),k(1)).subscribe({next:p=>{this.subscriptionChanges.next(p),i(p)},error:c})})}unsubscribe(){if(!this.sw.isEnabled)return Promise.reject(new Error(we));let o=n=>{if(n===null)throw new H(5602,!1);return n.unsubscribe().then(r=>{if(!r)throw new H(5603,!1);this.subscriptionChanges.next(null)})};return new Promise((n,r)=>{this.subscription.pipe(k(1),w(o)).subscribe({next:n,error:r})})}decodeBase64(o){return atob(o)}static \u0275fac=function(n){return new(n||e)(C(J))};static \u0275prov=D({token:e,factory:e.\u0275fac})}return e})(),Cn=(()=>{class e{sw;versionUpdates;unrecoverable;get isEnabled(){return this.sw.isEnabled}ongoingCheckForUpdate=null;constructor(o){if(this.sw=o,!o.isEnabled){this.versionUpdates=V,this.unrecoverable=V;return}this.versionUpdates=this.sw.eventsOfType(["VERSION_DETECTED","VERSION_INSTALLATION_FAILED","VERSION_READY","NO_NEW_VERSION_DETECTED"]),this.unrecoverable=this.sw.eventsOfType("UNRECOVERABLE_STATE")}checkForUpdate(){if(!this.sw.isEnabled)return Promise.reject(new Error(we));if(this.ongoingCheckForUpdate)return this.ongoingCheckForUpdate;let o=this.sw.generateNonce();return this.ongoingCheckForUpdate=this.sw.postMessageWithOperation("CHECK_FOR_UPDATES",{nonce:o},o).finally(()=>{this.ongoingCheckForUpdate=null}),this.ongoingCheckForUpdate}activateUpdate(){if(!this.sw.isEnabled)return Promise.reject(new H(5601,!1));let o=this.sw.generateNonce();return this.sw.postMessageWithOperation("ACTIVATE_UPDATE",{nonce:o},o)}static \u0275fac=function(n){return new(n||e)(C(J))};static \u0275prov=D({token:e,factory:e.\u0275fac})}return e})();var Dt=new _("");function In(){let e=d(ee);if(!("serviceWorker"in navigator&&e.enabled!==!1))return;let t=d(Dt),o=d(ie),n=d(be);o.runOutsideAngular(()=>{let r=navigator.serviceWorker,s=()=>r.controller?.postMessage({action:"INITIALIZE"});r.addEventListener("controllerchange",s),n.onDestroy(()=>{r.removeEventListener("controllerchange",s)})}),o.runOutsideAngular(()=>{let r,{registrationStrategy:s}=e;if(typeof s=="function")r=new Promise(i=>s().subscribe(()=>i()));else{let[i,...c]=(s||"registerWhenStable:30000").split(":");switch(i){case"registerImmediately":r=Promise.resolve();break;case"registerWithDelay":r=xt(+c[0]||0);break;case"registerWhenStable":r=Promise.race([n.whenStable(),xt(+c[0])]);break;default:throw new H(5600,!1)}}r.then(()=>{n.destroyed||navigator.serviceWorker.register(t,{scope:e.scope,updateViaCache:e.updateViaCache,type:e.type}).catch(i=>console.error(ot(5604,!1)))})})}function xt(e){return new Promise(t=>setTimeout(t,e))}function bn(e,t){return new J(e.enabled!==!1?navigator.serviceWorker:void 0,t)}var ee=class{enabled;updateViaCache;type;scope;registrationStrategy};function Ft(e,t={}){return X([vn,Cn,{provide:Dt,useValue:e},{provide:ee,useValue:t},{provide:J,useFactory:bn,deps:[ee,it]},ft(In)])}var Tn={dispatch:!0,functional:!1,useEffectsErrorHandler:!0},pe="__@ngrx/effects_create__";function $(e,t={}){let o=t.functional?e:e(),n=l(l({},Tn),t);return Object.defineProperty(o,pe,{value:n}),o}function wn(e){return Object.getOwnPropertyNames(e).filter(n=>e[n]&&e[n].hasOwnProperty(pe)?e[n][pe].hasOwnProperty("dispatch"):!1).map(n=>{let r=e[n][pe];return l({propertyName:n},r)})}function An(e){return wn(e)}function jt(e){return Object.getPrototypeOf(e)}function Nn(e){return!!e.constructor&&e.constructor.name!=="Object"&&e.constructor.name!=="Function"}function kt(e){return typeof e=="function"}function xn(e){return e.filter(kt)}function Mn(e,t,o){let n=jt(e),s=!!n&&n.constructor.name!=="Object"?n.constructor.name:null,i=An(e).map(({propertyName:c,dispatch:p,useEffectsErrorHandler:f})=>{let u=typeof e[c]=="function"?e[c]():e[c],a=f?o(u,t):u;return p===!1?a.pipe(Xe()):a.pipe(qe()).pipe(T(N=>({effect:e[c],notification:N,propertyName:c,sourceName:s,sourceInstance:e})))});return Z(...i)}var Rn=10;function Pt(e,t,o=Rn){return e.pipe(W(n=>(t&&t.handleError(n),o<=1?e:Pt(e,t,o-1))))}var L=(()=>{let t=class t extends P{constructor(n){super(),n&&(this.source=n)}lift(n){let r=new t;return r.source=this,r.operator=n,r}};t.\u0275fac=function(r){return new(r||t)(C(ue))},t.\u0275prov=D({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();function B(...e){return M(t=>e.some(o=>typeof o=="string"?o===t.type:o.type===t.type))}var Dn=new _("@ngrx/effects Effects Error Handler",{providedIn:"root",factory:()=>Pt}),Fn="@ngrx/effects/init",jn=Et(Fn);function kn(e,t){if(e.notification.kind==="N"){let o=e.notification.value;!Pn(o)&&t.handleError(new Error(`Effect ${_n(e)} dispatched an invalid action: ${Un(o)}`))}}function Pn(e){return typeof e!="function"&&e&&e.type&&typeof e.type=="string"}function _n({propertyName:e,sourceInstance:t,sourceName:o}){let n=typeof t[e]=="function";return!!o?`"${o}.${String(e)}${n?"()":""}"`:`"${String(e)}()"`}function Un(e){try{return JSON.stringify(e)}catch{return e}}var $n="ngrxOnIdentifyEffects";function Ln(e){return Ne(e,$n)}var Bn="ngrxOnRunEffects";function zn(e){return Ne(e,Bn)}var Vn="ngrxOnInitEffects";function Gn(e){return Ne(e,Vn)}function Ne(e,t){return e&&t in e&&typeof e[t]=="function"}var _t=(()=>{let t=class t extends Q{constructor(n,r){super(),this.errorHandler=n,this.effectsErrorHandler=r}addEffects(n){this.next(n)}toActions(){return this.pipe(Ie(n=>Nn(n)?jt(n):n),Ce(n=>n.pipe(Ie(Wn))),Ce(n=>{let r=n.pipe(Je(i=>Hn(this.errorHandler,this.effectsErrorHandler)(i)),T(i=>(kn(i,this.errorHandler),i.notification)),M(i=>i.kind==="N"&&i.value!=null),Ye()),s=n.pipe(k(1),M(Gn),T(i=>i.ngrxOnInitEffects()));return Z(r,s)}))}};t.\u0275fac=function(r){return new(r||t)(C(se),C(Dn))},t.\u0275prov=D({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();function Wn(e){return Ln(e)?e.ngrxOnIdentifyEffects():""}function Hn(e,t){return o=>{let n=Mn(o,e,t);return zn(o)?o.ngrxOnRunEffects(n):n}}var Kn=(()=>{let t=class t{get isStarted(){return!!this.effectsSubscription}constructor(n,r){this.effectSources=n,this.store=r,this.effectsSubscription=null}start(){this.effectsSubscription||(this.effectsSubscription=this.effectSources.toActions().subscribe(this.store))}ngOnDestroy(){this.effectsSubscription&&(this.effectsSubscription.unsubscribe(),this.effectsSubscription=null)}};t.\u0275fac=function(r){return new(r||t)(C(_t),C(fe))},t.\u0275prov=D({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();function Ut(...e){let t=e.flat(),o=xn(t);return X([o,st(()=>{d(vt),d(Ct,{optional:!0});let n=d(Kn),r=d(_t),s=!n.isStarted;s&&n.start();for(let i of t){let c=kt(i)?d(i):i;r.addEffects(c)}s&&d(fe).dispatch(jn())})])}var ne="PERFORM_ACTION",Qn="REFRESH",Gt="RESET",Wt="ROLLBACK",Ht="COMMIT",Kt="SWEEP",Qt="TOGGLE_ACTION",Zn="SET_ACTIONS_ACTIVE",Zt="JUMP_TO_STATE",Xt="JUMP_TO_ACTION",Be="IMPORT_STATE",Yt="LOCK_CHANGES",Jt="PAUSE_RECORDING",q=class{constructor(t,o){if(this.action=t,this.timestamp=o,this.type=ne,typeof t.type>"u")throw new Error('Actions may not have an undefined "type" property. Have you misspelled a constant?')}},xe=class{constructor(){this.type=Qn}},Me=class{constructor(t){this.timestamp=t,this.type=Gt}},Re=class{constructor(t){this.timestamp=t,this.type=Wt}},De=class{constructor(t){this.timestamp=t,this.type=Ht}},Fe=class{constructor(){this.type=Kt}},je=class{constructor(t){this.id=t,this.type=Qt}};var ke=class{constructor(t){this.index=t,this.type=Zt}},Pe=class{constructor(t){this.actionId=t,this.type=Xt}},_e=class{constructor(t){this.nextLiftedState=t,this.type=Be}},Ue=class{constructor(t){this.status=t,this.type=Yt}},$e=class{constructor(t){this.status=t,this.type=Jt}};var me=new _("@ngrx/store-devtools Options"),$t=new _("@ngrx/store-devtools Initial Config");function qt(){return null}var Xn="NgRx Store DevTools";function Yn(e){let t={maxAge:!1,monitor:qt,actionSanitizer:void 0,stateSanitizer:void 0,name:Xn,serialize:!1,logOnly:!1,autoPause:!1,trace:!1,traceLimit:75,features:{pause:!0,lock:!0,persist:!0,export:!0,import:"custom",jump:!0,skip:!0,reorder:!0,dispatch:!0,test:!0},connectInZone:!1},o=typeof e=="function"?e():e,n=o.logOnly?{pause:!0,export:!0,test:!0}:!1,r=o.features||n||t.features;r.import===!0&&(r.import="custom");let s=Object.assign({},t,{features:r},o);if(s.maxAge&&s.maxAge<2)throw new Error(`Devtools 'maxAge' cannot be less than 2, got ${s.maxAge}`);return s}function Lt(e,t){return e.filter(o=>t.indexOf(o)<0)}function en(e){let{computedStates:t,currentStateIndex:o}=e;if(o>=t.length){let{state:r}=t[t.length-1];return r}let{state:n}=t[o];return n}function te(e){return new q(e,+Date.now())}function Jn(e,t){return Object.keys(t).reduce((o,n)=>{let r=Number(n);return o[r]=tn(e,t[r],r),o},{})}function tn(e,t,o){return y(l({},t),{action:e(t.action,o)})}function qn(e,t){return t.map((o,n)=>({state:nn(e,o.state,n),error:o.error}))}function nn(e,t,o){return e(t,o)}function rn(e){return e.predicate||e.actionsSafelist||e.actionsBlocklist}function er(e,t,o,n){let r=[],s={},i=[];return e.stagedActionIds.forEach((c,p)=>{let f=e.actionsById[c];f&&(p&&ze(e.computedStates[p],f,t,o,n)||(s[c]=f,r.push(c),i.push(e.computedStates[p])))}),y(l({},e),{stagedActionIds:r,actionsById:s,computedStates:i})}function ze(e,t,o,n,r){let s=o&&!o(e,t.action),i=n&&!t.action.type.match(n.map(p=>Bt(p)).join("|")),c=r&&t.action.type.match(r.map(p=>Bt(p)).join("|"));return s||i||c}function Bt(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function on(e){return{ngZone:e?d(ie):null,connectInZone:e}}var Ee=(()=>{let t=class t extends ae{};t.\u0275fac=(()=>{let n;return function(s){return(n||(n=at(t)))(s||t)}})(),t.\u0275prov=D({token:t,factory:t.\u0275fac});let e=t;return e})(),he={START:"START",DISPATCH:"DISPATCH",STOP:"STOP",ACTION:"ACTION"},Le=new _("@ngrx/store-devtools Redux Devtools Extension"),sn=(()=>{let t=class t{constructor(n,r,s){this.config=r,this.dispatcher=s,this.zoneConfig=on(this.config.connectInZone),this.devtoolsExtension=n,this.createActionStreams()}notify(n,r){if(this.devtoolsExtension)if(n.type===ne){if(r.isLocked||r.isPaused)return;let s=en(r);if(rn(this.config)&&ze(s,n,this.config.predicate,this.config.actionsSafelist,this.config.actionsBlocklist))return;let i=this.config.stateSanitizer?nn(this.config.stateSanitizer,s,r.currentStateIndex):s,c=this.config.actionSanitizer?tn(this.config.actionSanitizer,n,r.nextActionId):n;this.sendToReduxDevtools(()=>this.extensionConnection.send(c,i))}else{let s=y(l({},r),{stagedActionIds:r.stagedActionIds,actionsById:this.config.actionSanitizer?Jn(this.config.actionSanitizer,r.actionsById):r.actionsById,computedStates:this.config.stateSanitizer?qn(this.config.stateSanitizer,r.computedStates):r.computedStates});this.sendToReduxDevtools(()=>this.devtoolsExtension.send(null,s,this.getExtensionConfig(this.config)))}}createChangesObservable(){return this.devtoolsExtension?new P(n=>{let r=this.zoneConfig.connectInZone?this.zoneConfig.ngZone.runOutsideAngular(()=>this.devtoolsExtension.connect(this.getExtensionConfig(this.config))):this.devtoolsExtension.connect(this.getExtensionConfig(this.config));return this.extensionConnection=r,r.init(),r.subscribe(s=>n.next(s)),r.unsubscribe}):We}createActionStreams(){let n=this.createChangesObservable().pipe(tt()),r=n.pipe(M(u=>u.type===he.START)),s=n.pipe(M(u=>u.type===he.STOP)),i=n.pipe(M(u=>u.type===he.DISPATCH),T(u=>this.unwrapAction(u.payload)),Qe(u=>u.type===Be?this.dispatcher.pipe(M(a=>a.type===Te),Ke(1e3),Ze(1e3),T(()=>u),W(()=>O(u)),k(1)):O(u))),p=n.pipe(M(u=>u.type===he.ACTION),T(u=>this.unwrapAction(u.payload))).pipe(oe(s)),f=i.pipe(oe(s));this.start$=r.pipe(oe(s)),this.actions$=this.start$.pipe(w(()=>p)),this.liftedActions$=this.start$.pipe(w(()=>f))}unwrapAction(n){return typeof n=="string"?(0,eval)(`(${n})`):n}getExtensionConfig(n){let r={name:n.name,features:n.features,serialize:n.serialize,autoPause:n.autoPause??!1,trace:n.trace??!1,traceLimit:n.traceLimit??75};return n.maxAge!==!1&&(r.maxAge=n.maxAge),r}sendToReduxDevtools(n){try{n()}catch(r){console.warn("@ngrx/store-devtools: something went wrong inside the redux devtools",r)}}};t.\u0275fac=function(r){return new(r||t)(C(Le),C(me),C(Ee))},t.\u0275prov=D({token:t,factory:t.\u0275fac});let e=t;return e})(),ye={type:Oe},tr="@ngrx/store-devtools/recompute",nr={type:tr};function cn(e,t,o,n,r){if(n)return{state:o,error:"Interrupted by an error up the chain"};let s=o,i;try{s=e(o,t)}catch(c){i=c.toString(),r.handleError(c)}return{state:s,error:i}}function ge(e,t,o,n,r,s,i,c,p){if(t>=e.length&&e.length===s.length)return e;let f=e.slice(0,t),u=s.length-(p?1:0);for(let a=t;a<u;a++){let g=s[a],N=r[g].action,m=f[a-1],h=m?m.state:n,F=m?m.error:void 0,j=i.indexOf(g)>-1?m:cn(o,N,h,F,c);f.push(j)}return p&&f.push(e[e.length-1]),f}function rr(e,t){return{monitorState:t(void 0,{}),nextActionId:1,actionsById:{0:te(ye)},stagedActionIds:[0],skippedActionIds:[],committedState:e,currentStateIndex:0,computedStates:[],isLocked:!1,isPaused:!1}}function or(e,t,o,n,r={}){return s=>(i,c)=>{let{monitorState:p,actionsById:f,nextActionId:u,stagedActionIds:a,skippedActionIds:g,committedState:N,currentStateIndex:m,computedStates:h,isLocked:F,isPaused:x}=i||t;i||(f=Object.create(f));function j(b){let v=b,z=a.slice(1,v+1);for(let R=0;R<z.length;R++)if(h[R+1].error){v=R,z=a.slice(1,v+1);break}else delete f[z[R]];g=g.filter(R=>z.indexOf(R)===-1),a=[0,...a.slice(v+1)],N=h[v].state,h=h.slice(v),m=m>v?m-v:0}function K(){f={0:te(ye)},u=1,a=[0],g=[],N=h[m].state,m=0,h=[]}let E=0;switch(c.type){case Yt:{F=c.status,E=1/0;break}case Jt:{x=c.status,x?(a=[...a,u],f[u]=new q({type:"@ngrx/devtools/pause"},+Date.now()),u++,E=a.length-1,h=h.concat(h[h.length-1]),m===a.length-2&&m++,E=1/0):K();break}case Gt:{f={0:te(ye)},u=1,a=[0],g=[],N=e,m=0,h=[];break}case Ht:{K();break}case Wt:{f={0:te(ye)},u=1,a=[0],g=[],m=0,h=[];break}case Qt:{let{id:b}=c;g.indexOf(b)===-1?g=[b,...g]:g=g.filter(z=>z!==b),E=a.indexOf(b);break}case Zn:{let{start:b,end:v,active:z}=c,R=[];for(let ve=b;ve<v;ve++)R.push(ve);z?g=Lt(g,R):g=[...g,...R],E=a.indexOf(b);break}case Zt:{m=c.index,E=1/0;break}case Xt:{let b=a.indexOf(c.actionId);b!==-1&&(m=b),E=1/0;break}case Kt:{a=Lt(a,g),g=[],m=Math.min(m,a.length-1);break}case ne:{if(F)return i||t;if(x||i&&ze(i.computedStates[m],c,r.predicate,r.actionsSafelist,r.actionsBlocklist)){let v=h[h.length-1];h=[...h.slice(0,-1),cn(s,c.action,v.state,v.error,o)],E=1/0;break}r.maxAge&&a.length===r.maxAge&&j(1),m===a.length-1&&m++;let b=u++;f[b]=c,a=[...a,b],E=a.length-1;break}case Be:{({monitorState:p,actionsById:f,nextActionId:u,stagedActionIds:a,skippedActionIds:g,committedState:N,currentStateIndex:m,computedStates:h,isLocked:F,isPaused:x}=c.nextLiftedState);break}case Oe:{E=0,r.maxAge&&a.length>r.maxAge&&(h=ge(h,E,s,N,f,a,g,o,x),j(a.length-r.maxAge),E=1/0);break}case Te:{if(h.filter(v=>v.error).length>0)E=0,r.maxAge&&a.length>r.maxAge&&(h=ge(h,E,s,N,f,a,g,o,x),j(a.length-r.maxAge),E=1/0);else{if(!x&&!F){m===a.length-1&&m++;let v=u++;f[v]=new q(c,+Date.now()),a=[...a,v],E=a.length-1,h=ge(h,E,s,N,f,a,g,o,x)}h=h.map(v=>y(l({},v),{state:s(v.state,nr)})),m=a.length-1,r.maxAge&&a.length>r.maxAge&&j(a.length-r.maxAge),E=1/0}break}default:{E=1/0;break}}return h=ge(h,E,s,N,f,a,g,o,x),p=n(p,c),{monitorState:p,actionsById:f,nextActionId:u,stagedActionIds:a,skippedActionIds:g,committedState:N,currentStateIndex:m,computedStates:h,isLocked:F,isPaused:x}}}var zt=(()=>{let t=class t{constructor(n,r,s,i,c,p,f,u){let a=rr(f,u.monitor),g=or(f,a,p,u.monitor,u),N=Z(Z(r.asObservable().pipe(nt(1)),i.actions$).pipe(T(te)),n,i.liftedActions$).pipe(He(Ge)),m=s.pipe(T(g)),h=on(u.connectInZone),F=new Ve(1);this.liftedStateSubscription=N.pipe(rt(m),Vt(h),et(({state:K},[E,b])=>{let v=b(K,E);return E.type!==ne&&rn(u)&&(v=er(v,u.predicate,u.actionsSafelist,u.actionsBlocklist)),i.notify(E,v),{state:v,action:E}},{state:a,action:null})).subscribe(({state:K,action:E})=>{if(F.next(K),E.type===ne){let b=E.action;c.next(b)}}),this.extensionStartSubscription=i.start$.pipe(Vt(h)).subscribe(()=>{this.refresh()});let x=F.asObservable(),j=x.pipe(T(en));Object.defineProperty(j,"state",{value:mt(j,{manualCleanup:!0,requireSync:!0})}),this.dispatcher=n,this.liftedState=x,this.state=j}ngOnDestroy(){this.liftedStateSubscription.unsubscribe(),this.extensionStartSubscription.unsubscribe()}dispatch(n){this.dispatcher.next(n)}next(n){this.dispatcher.next(n)}error(n){}complete(){}performAction(n){this.dispatch(new q(n,+Date.now()))}refresh(){this.dispatch(new xe)}reset(){this.dispatch(new Me(+Date.now()))}rollback(){this.dispatch(new Re(+Date.now()))}commit(){this.dispatch(new De(+Date.now()))}sweep(){this.dispatch(new Fe)}toggleAction(n){this.dispatch(new je(n))}jumpToAction(n){this.dispatch(new Pe(n))}jumpToState(n){this.dispatch(new ke(n))}importState(n){this.dispatch(new _e(n))}lockChanges(n){this.dispatch(new Ue(n))}pauseRecording(n){this.dispatch(new $e(n))}};t.\u0275fac=function(r){return new(r||t)(C(Ee),C(ae),C(It),C(sn),C(ue),C(se),C(St),C(me))},t.\u0275prov=D({token:t,factory:t.\u0275fac});let e=t;return e})();function Vt({ngZone:e,connectInZone:t}){return o=>t?new P(n=>o.subscribe({next:r=>e.run(()=>n.next(r)),error:r=>e.run(()=>n.error(r)),complete:()=>e.run(()=>n.complete())})):o}var sr=new _("@ngrx/store-devtools Is Devtools Extension or Monitor Present");function ir(e,t){return!!e||t.monitor!==qt}function cr(){let e="__REDUX_DEVTOOLS_EXTENSION__";return typeof window=="object"&&typeof window[e]<"u"?window[e]:null}function ar(e){return e.state}function an(e={}){return X([sn,Ee,zt,{provide:$t,useValue:e},{provide:sr,deps:[Le,me],useFactory:ir},{provide:Le,useFactory:cr},{provide:me,deps:[$t],useFactory:Yn},{provide:Ot,deps:[zt],useFactory:ar},{provide:bt,useExisting:Ee}])}var ur={notes:[],categories:[],filteredNotes:[],searchQuery:"",selectedCategoryId:null,loading:!1,error:null,lastSyncedAt:null,isSyncing:!1,hasUnsyncedChanges:!1};function G(e,t,o){let n=[...e];if(o&&(n=n.filter(r=>r.categoryId===o)),t.trim()){let r=t.toLowerCase();n=n.filter(s=>s.title.toLowerCase().includes(r)||s.content.toLowerCase().includes(r)||s.tags?.some(i=>i.toLowerCase().includes(r)))}return n}var un=wt(ur,A(S.loadNotes,e=>y(l({},e),{loading:!0,error:null})),A(S.loadNotesSuccess,(e,{notes:t})=>y(l({},e),{notes:t,filteredNotes:G(t,e.searchQuery,e.selectedCategoryId),loading:!1})),A(S.loadNotesFailure,(e,{error:t})=>y(l({},e),{error:t,loading:!1})),A(S.createNoteSuccess,(e,{note:t})=>{let o=[...e.notes,y(l({},t),{needsSync:!0})];return y(l({},e),{notes:o,filteredNotes:G(o,e.searchQuery,e.selectedCategoryId),hasUnsyncedChanges:!0})}),A(S.updateNoteSuccess,(e,{note:t})=>{let o=e.notes.map(n=>n.id===t.id?y(l({},t),{needsSync:!0}):n);return y(l({},e),{notes:o,filteredNotes:G(o,e.searchQuery,e.selectedCategoryId),hasUnsyncedChanges:!0})}),A(S.deleteNoteSuccess,(e,{id:t})=>{let o=e.notes.filter(n=>n.id!==t);return y(l({},e),{notes:o,filteredNotes:G(o,e.searchQuery,e.selectedCategoryId),hasUnsyncedChanges:!0})}),A(S.searchNotes,(e,{query:t})=>y(l({},e),{searchQuery:t,filteredNotes:G(e.notes,t,e.selectedCategoryId)})),A(S.filterByCategory,(e,{categoryId:t})=>y(l({},e),{selectedCategoryId:t,filteredNotes:G(e.notes,e.searchQuery,t)})),A(I.loadCategoriesSuccess,(e,{categories:t})=>y(l({},e),{categories:t})),A(I.createCategorySuccess,(e,{category:t})=>y(l({},e),{categories:[...e.categories,y(l({},t),{needsSync:!0})],hasUnsyncedChanges:!0})),A(I.updateCategorySuccess,(e,{category:t})=>{let o=e.categories.map(r=>r.id===t.id?y(l({},t),{needsSync:!0}):r),n=e.notes.map(r=>r.categoryId===t.id?y(l({},r),{categoryName:t.name}):r);return y(l({},e),{categories:o,notes:n,filteredNotes:G(n,e.searchQuery,e.selectedCategoryId),hasUnsyncedChanges:!0})}),A(I.deleteCategorySuccess,(e,{id:t})=>y(l({},e),{categories:e.categories.filter(o=>o.id!==t),hasUnsyncedChanges:!0})),A(S.startSync,e=>y(l({},e),{isSyncing:!0})),A(S.syncSuccess,(e,{notes:t,categories:o})=>{let n=new Date,r=t.map(i=>y(l({},i),{lastSyncedAt:n,needsSync:!1})),s=o.map(i=>y(l({},i),{lastSyncedAt:n,needsSync:!1}));return y(l({},e),{notes:r,categories:s,filteredNotes:G(r,e.searchQuery,e.selectedCategoryId),lastSyncedAt:n,isSyncing:!1,hasUnsyncedChanges:!1})}),A(S.syncFailure,e=>y(l({},e),{isSyncing:!1})));var fn=$((e=d(L),t=d(U))=>e.pipe(B(S.loadNotes),w(()=>{try{let o=t.notes(),n=t.categories(),r=o.map(s=>{let i=n.find(c=>c.id===s.categoryId);return y(l({},s),{categoryName:i?.name})});return O(S.loadNotesSuccess({notes:r}))}catch(o){return O(S.loadNotesFailure({error:o.message||"Failed to load notes"}))}}),W(o=>O(S.loadNotesFailure({error:o.message||"Failed to load notes"})))),{functional:!0}),dn=$((e=d(L),t=d(U),o=d(de),n=d(Y))=>e.pipe(B(S.createNote),w(s=>re(null,[s],function*({note:r}){try{let i=t.createNote(r),c=t.categories(),p=c.find(a=>a.id===i.categoryId),f=y(l({},i),{categoryName:p?.name,needsSync:!0}),u=S.createNoteSuccess({note:f});return n.isSignedIn()&&o.syncToDrive(t.notes(),c).catch(a=>{console.error("Failed to sync to Drive:",a)}),u}catch(i){return S.createNoteFailure({error:i.message})}}))),{functional:!0}),ln=$((e=d(L),t=d(U),o=d(de),n=d(Y))=>e.pipe(B(S.updateNote),w(i=>re(null,[i],function*({id:r,updates:s}){try{let c=t.updateNote(r,s);if(c){let p=t.categories(),f=p.find(g=>g.id===c.categoryId),u=y(l({},c),{categoryName:f?.name,needsSync:!0}),a=S.updateNoteSuccess({note:u});return n.isSignedIn()&&o.syncToDrive(t.notes(),p).catch(g=>{console.error("Failed to sync to Drive:",g)}),a}return S.updateNoteFailure({error:"Note not found"})}catch(c){return S.updateNoteFailure({error:c.message})}}))),{functional:!0}),pn=$((e=d(L),t=d(U),o=d(de),n=d(Y))=>e.pipe(B(S.deleteNote),w(s=>re(null,[s],function*({id:r}){try{if(t.deleteNote(r)){let c=S.deleteNoteSuccess({id:r});return n.isSignedIn()&&o.syncToDrive(t.notes(),t.categories()).catch(p=>{console.error("Failed to sync to Drive:",p)}),c}return S.deleteNoteFailure({error:"Note not found"})}catch(i){return S.deleteNoteFailure({error:i.message})}}))),{functional:!0}),hn=$((e=d(L),t=d(U))=>e.pipe(B(I.loadCategories),w(()=>{try{let o=t.categories();return O(I.loadCategoriesSuccess({categories:o}))}catch(o){return O(I.loadCategoriesFailure({error:o.message||"Failed to load categories"}))}}),W(o=>O(I.loadCategoriesFailure({error:o.message||"Failed to load categories"})))),{functional:!0}),gn=$((e=d(L),t=d(U))=>e.pipe(B(I.createCategory),w(({category:o})=>{try{let n=t.createCategory(o);return O(I.createCategorySuccess({category:n}))}catch(n){return O(I.createCategoryFailure({error:n.message}))}})),{functional:!0}),yn=$((e=d(L),t=d(U))=>e.pipe(B(I.updateCategory),w(({id:o,updates:n})=>{try{let r=t.updateCategory(o,n);return r?O(I.updateCategorySuccess({category:r})):O(I.updateCategoryFailure({error:"Category not found"}))}catch(r){return O(I.updateCategoryFailure({error:r.message}))}})),{functional:!0}),mn=$((e=d(L),t=d(U))=>e.pipe(B(I.deleteCategory),w(({id:o})=>{try{return t.deleteCategory(o)?O(I.deleteCategorySuccess({id:o})):O(I.deleteCategoryFailure({error:"Category cannot be deleted"}))}catch(n){return O(I.deleteCategoryFailure({error:n.message}))}})),{functional:!0});var En=()=>[Tt({notes:un}),Ut({loadNotes$:fn,createNote$:dn,updateNote$:ln,deleteNote$:pn,loadCategories$:hn,createCategory$:gn,updateCategory$:yn,deleteCategory$:mn}),an({maxAge:25,logOnly:!ce(),autoPause:!0,trace:!1,traceLimit:75})];var Sn={providers:[ct(),lt({eventCoalescing:!0}),yt(Nt),Ft("ngsw-worker.js",{enabled:!ce(),registrationStrategy:"registerWhenStable:30000"}),...En()]};var Se=class e{themeService=d(At);ngOnInit(){}static \u0275fac=function(o){return new(o||e)};static \u0275cmp=ut({type:e,selectors:[["app-root"]],decls:1,vars:0,template:function(o,n){o&1&&dt(0,"router-outlet")},dependencies:[ht],encapsulation:2})};pt(Se,Sn).catch(e=>console.error(e));
